/*! For license information please see renderer.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(540),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=a[c]||0,d="".concat(c," ").concat(u);a[c]=u+1;var f=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(h);else{var p=o(h,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:p,references:1})}i.push(d)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var l=r(e,o),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},131:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,"/* VSCode Dark Theme Colors */\n:root {\n  /* カラーパレット */\n  --color-bg-primary: #1E1E1E;\n  --color-bg-secondary: #252526;\n  --color-bg-tertiary: #2D2D30;\n  --color-bg-active: #094771;\n  --color-bg-hover: #2A2D2E;\n  --color-border: #3C3C3C;\n  --color-text-primary: #CCCCCC;\n  --color-text-secondary: #969696;\n  --color-text-disabled: #6A6A6A;\n  --color-accent: #007ACC;\n  --color-success: #4FC1FF;\n  --color-error: #F44747;\n  --color-warning: #FFCC02;\n  \n  /* レイアウト */\n  --titlebar-height: 30px;\n  --left-panel-width: 300px;\n  --bottom-panel-height: 200px;\n  --border-width: 1px;\n  --border-radius: 3px;\n  --spacing-xs: 4px;\n  --spacing-sm: 8px;\n  --spacing-md: 12px;\n  --spacing-lg: 16px;\n  --spacing-xl: 24px;\n  \n  /* フォント */\n  --font-family-ui: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  --font-family-mono: 'Cascadia Code', 'Fira Code', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  --font-size-sm: 12px;\n  --font-size-md: 13px;\n  --font-size-lg: 14px;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-bold: 600;\n}\n\n/* リセット＋基本スタイル */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  font-family: var(--font-family-ui);\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-normal);\n  color: var(--color-text-primary);\n  background-color: var(--color-bg-primary);\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#root {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* アプリケーションメインコンテナ */\n.app {\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--color-bg-primary);\n}\n\n/* タイトルバー */\n.titlebar {\n  height: var(--titlebar-height);\n  background-color: var(--color-bg-secondary);\n  border-bottom: var(--border-width) solid var(--color-border);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 var(--spacing-sm);\n  -webkit-app-region: drag;\n  user-select: none;\n}\n\n.titlebar__title {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n}\n\n.titlebar__controls {\n  display: flex;\n  align-items: center;\n  -webkit-app-region: no-drag;\n}\n\n.titlebar__button {\n  width: 46px;\n  height: var(--titlebar-height);\n  background: transparent;\n  border: none;\n  color: var(--color-text-primary);\n  font-size: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.15s ease;\n  user-select: none;\n  outline: none;\n}\n\n.titlebar__button:hover {\n  background-color: var(--color-bg-hover);\n}\n\n.titlebar__button--close:hover {\n  background-color: #E81123;\n  color: white;\n}\n\n.titlebar__button:active {\n  background-color: var(--color-bg-active);\n}\n\n/* メインレイアウト */\n.main-layout {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n/* 左パネル（ファイルエクスプローラー） */\n.left-panel {\n  /* width: var(--left-panel-width); */ /* 動的リサイズのためコメントアウト */\n  background-color: var(--color-bg-secondary);\n  border-right: var(--border-width) solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.left-panel__header {\n  padding: var(--spacing-md);\n  border-bottom: var(--border-width) solid var(--color-border);\n  background-color: var(--color-bg-tertiary);\n}\n\n.left-panel__title {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.left-panel__content {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--spacing-sm);\n}\n\n/* 右パネル */\n.right-panel {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.right-panel__audio-section {\n  flex: 0 0 auto;\n  border-bottom: var(--border-width) solid var(--color-border);\n}\n\n.right-panel__section-header {\n  padding: var(--spacing-sm) var(--spacing-md);\n  background: var(--color-bg-tertiary);\n  border-bottom: var(--border-width) solid var(--color-border);\n}\n\n.right-panel__section-title {\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n  margin: 0;\n}\n\n.right-panel__audio-player {\n  margin: var(--spacing-md);\n}\n\n/* 上部パネル（テキストエリア） */\n.top-panel {\n  flex: 1;\n  min-height: 200px;\n  background-color: var(--color-bg-primary);\n  border-bottom: var(--border-width) solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.top-panel__header {\n  padding: var(--spacing-md);\n  background-color: var(--color-bg-secondary);\n  border-bottom: var(--border-width) solid var(--color-border);\n}\n\n.top-panel__title {\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n}\n\n.top-panel__content {\n  flex: 1;\n  padding: var(--spacing-lg);\n  overflow-y: auto;\n  font-family: var(--font-family-mono);\n  font-size: var(--font-size-md);\n  line-height: 1.5;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n\n/* 音声認識セクション */\n.right-panel__speech-section {\n  flex: 1;\n  background-color: var(--color-bg-primary);\n  border-top: var(--border-width) solid var(--color-border);\n  overflow-y: auto;\n  min-height: 300px;\n}\n\n/* 下部パネル（コントロール） */\n.bottom-panel {\n  height: var(--bottom-panel-height);\n  min-height: var(--bottom-panel-height);\n  max-height: var(--bottom-panel-height);\n  background-color: var(--color-bg-secondary);\n  border-top: var(--border-width) solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.bottom-panel__header {\n  padding: var(--spacing-md);\n  background-color: var(--color-bg-tertiary);\n  border-bottom: var(--border-width) solid var(--color-border);\n}\n\n.bottom-panel__title {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.bottom-panel__content {\n  flex: 1;\n  padding: var(--spacing-lg);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n}\n\n/* ボタン共通スタイル */\n.btn {\n  padding: var(--spacing-sm) var(--spacing-md);\n  border: var(--border-width) solid var(--color-border);\n  border-radius: var(--border-radius);\n  background-color: var(--color-bg-tertiary);\n  color: var(--color-text-primary);\n  font-family: var(--font-family-ui);\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-medium);\n  cursor: pointer;\n  transition: background-color 0.15s ease, border-color 0.15s ease;\n  outline: none;\n}\n\n.btn:hover {\n  background-color: var(--color-bg-hover);\n  border-color: var(--color-accent);\n}\n\n.btn:focus {\n  border-color: var(--color-accent);\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.3);\n}\n\n.btn:active {\n  background-color: var(--color-bg-active);\n}\n\n.btn--primary {\n  background-color: var(--color-accent);\n  border-color: var(--color-accent);\n  color: white;\n}\n\n.btn--primary:hover {\n  background-color: #005a9e;\n  border-color: #005a9e;\n}\n\n.btn--success {\n  background-color: var(--color-success);\n  border-color: var(--color-success);\n  color: var(--color-bg-primary);\n}\n\n.btn--error {\n  background-color: var(--color-error);\n  border-color: var(--color-error);\n  color: white;\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* フォーム要素 */\n.input {\n  padding: var(--spacing-sm);\n  border: var(--border-width) solid var(--color-border);\n  border-radius: var(--border-radius);\n  background-color: var(--color-bg-primary);\n  color: var(--color-text-primary);\n  font-family: var(--font-family-ui);\n  font-size: var(--font-size-md);\n  outline: none;\n  transition: border-color 0.15s ease;\n}\n\n.input:focus {\n  border-color: var(--color-accent);\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.3);\n}\n\n.select {\n  padding: var(--spacing-sm);\n  border: var(--border-width) solid var(--color-border);\n  border-radius: var(--border-radius);\n  background-color: var(--color-bg-primary);\n  color: var(--color-text-primary);\n  font-family: var(--font-family-ui);\n  font-size: var(--font-size-md);\n  outline: none;\n  cursor: pointer;\n}\n\n/* スクロールバー */\n::-webkit-scrollbar {\n  width: 12px;\n  height: 12px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--color-bg-secondary);\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--color-border);\n  border-radius: 6px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: #555;\n}\n\n/* ================================\n   AudioPlayer コンポーネント\n   ================================ */\n\n.audio-player {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  padding: var(--spacing-md);\n  background: var(--color-bg-secondary);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n}\n\n.audio-player__header {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-xs);\n}\n\n.audio-player__file-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.audio-player__file-name {\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.audio-player__file-path {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.audio-player__no-file {\n  font-size: var(--font-size-md);\n  color: var(--color-text-disabled);\n  font-style: italic;\n}\n\n.audio-player__error {\n  padding: var(--spacing-xs);\n  background: rgba(244, 71, 71, 0.1);\n  border: 1px solid var(--color-error);\n  border-radius: var(--border-radius);\n  color: var(--color-error);\n  font-size: var(--font-size-sm);\n}\n\n/* SeekBar コンポーネント */\n.seek-bar {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-xs);\n}\n\n.seek-bar__time-display {\n  display: flex;\n  justify-content: space-between;\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  font-family: var(--font-family-mono);\n}\n\n.seek-bar__track {\n  position: relative;\n  height: 6px;\n  border-radius: 3px;\n  background: var(--color-bg-primary);\n  border: 1px solid var(--color-border);\n  overflow: hidden;\n}\n\n.seek-bar__track--loading {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\n.seek-bar__background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--color-bg-primary);\n}\n\n.seek-bar__progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: var(--color-accent);\n  transition: width 0.1s ease;\n}\n\n.seek-bar__progress--dragging {\n  transition: none;\n}\n\n.seek-bar__handle {\n  position: absolute;\n  top: 50%;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: var(--color-accent);\n  border: 2px solid var(--color-bg-primary);\n  transform: translate(-50%, -50%);\n  transition: left 0.1s ease;\n  cursor: pointer;\n}\n\n.seek-bar__handle--dragging {\n  transition: none;\n  transform: translate(-50%, -50%) scale(1.2);\n}\n\n.seek-bar__loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n/* PlaybackControls コンポーネント */\n.playback-controls {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-lg);\n  flex-wrap: wrap;\n}\n\n.playback-controls__main {\n  display: flex;\n  gap: var(--spacing-sm);\n}\n\n.playback-controls__play-pause {\n  min-width: 100px;\n  justify-content: center;\n}\n\n.playback-controls__button-text {\n  margin-left: var(--spacing-xs);\n}\n\n.playback-controls__stop {\n  padding: var(--spacing-xs);\n  min-width: 36px;\n}\n\n.playback-controls__volume {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.playback-controls__volume-label {\n  font-size: 16px;\n  cursor: pointer;\n}\n\n.playback-controls__volume-slider {\n  width: 80px;\n  height: 4px;\n  border-radius: 2px;\n  background: var(--color-bg-primary);\n  outline: none;\n  cursor: pointer;\n  -webkit-appearance: none;\n  appearance: none;\n}\n\n.playback-controls__volume-slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: var(--color-accent);\n  cursor: pointer;\n}\n\n.playback-controls__volume-slider::-moz-range-thumb {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: var(--color-accent);\n  cursor: pointer;\n  border: none;\n}\n\n.playback-controls__volume-value {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  font-family: var(--font-family-mono);\n  min-width: 35px;\n}\n\n.playback-controls__rate {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.playback-controls__rate-label {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n}\n\n.playback-controls__rate-select {\n  min-width: 60px;\n}\n\n.playback-controls__no-file {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-disabled);\n  font-style: italic;\n}\n\n/* ファイルツリー */\n.file-tree {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.file-tree__item {\n  display: flex;\n  align-items: center;\n  padding: var(--spacing-xs) var(--spacing-sm);\n  cursor: pointer;\n  border-radius: var(--border-radius);\n  font-size: var(--font-size-sm);\n  color: var(--color-text-primary);\n  transition: background-color 0.15s ease;\n}\n\n.file-tree__item:hover {\n  background-color: var(--color-bg-hover);\n}\n\n.file-tree__item--active {\n  background-color: var(--color-bg-active);\n  color: white;\n}\n\n.file-tree__icon {\n  margin-right: var(--spacing-sm);\n  font-size: var(--font-size-sm);\n}\n\n/* ユーティリティクラス */\n.text-primary { color: var(--color-text-primary); }\n.text-secondary { color: var(--color-text-secondary); }\n.text-disabled { color: var(--color-text-disabled); }\n.text-accent { color: var(--color-accent); }\n.text-success { color: var(--color-success); }\n.text-error { color: var(--color-error); }\n\n.bg-primary { background-color: var(--color-bg-primary); }\n.bg-secondary { background-color: var(--color-bg-secondary); }\n.bg-tertiary { background-color: var(--color-bg-tertiary); }\n\n.flex { display: flex; }\n.flex-col { flex-direction: column; }\n.flex-1 { flex: 1; }\n.items-center { align-items: center; }\n.justify-center { justify-content: center; }\n.justify-between { justify-content: space-between; }\n\n.w-full { width: 100%; }\n.h-full { height: 100%; }\n\n.p-sm { padding: var(--spacing-sm); }\n.p-md { padding: var(--spacing-md); }\n.p-lg { padding: var(--spacing-lg); }\n\n.m-sm { margin: var(--spacing-sm); }\n.m-md { margin: var(--spacing-md); }\n.m-lg { margin: var(--spacing-lg); }\n\n.gap-sm { gap: var(--spacing-sm); }\n.gap-md { gap: var(--spacing-md); }\n.gap-lg { gap: var(--spacing-lg); }\n\n/* レイアウト修正用クラス */\n.layout-3pane {\n  display: flex;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.layout-3pane .left-pane {\n  width: var(--left-panel-width);\n  min-width: var(--left-panel-width);\n  max-width: var(--left-panel-width);\n}\n\n.layout-3pane .center-pane {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.layout-3pane .top-section {\n  flex: 1;\n  min-height: 200px;\n  overflow: hidden;\n}\n\n.layout-3pane .bottom-section {\n  height: var(--bottom-panel-height);\n  min-height: var(--bottom-panel-height);\n  max-height: var(--bottom-panel-height);\n  overflow: hidden;\n}\n\n/* =========================== */\n/* アコーディオン UI スタイル */\n/* =========================== */\n\n.accordion-section {\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-bg-secondary);\n}\n\n.accordion-section:first-child {\n  border-top: 1px solid var(--color-border);\n}\n\n.accordion-section--main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 200px;\n}\n\n.accordion-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: var(--spacing-md);\n  cursor: pointer;\n  user-select: none;\n  background: var(--color-bg-tertiary);\n  border-bottom: 1px solid var(--color-border);\n  transition: background-color 0.2s ease;\n}\n\n.accordion-header:hover {\n  background: var(--color-bg-hover);\n}\n\n/* 削除: always-open スタイルは不要 */\n\n.accordion-title {\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-text-primary);\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n}\n\n.accordion-icon {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  transition: transform 0.2s ease;\n}\n\n.accordion-content {\n  overflow: hidden;\n}\n\n.accordion-content--expanded {\n  overflow-y: auto;\n}\n\n.accordion-section--main .accordion-content--expanded {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n\n/* 固定サイズセクション用 */\n.accordion-section:not(.accordion-section--main) .accordion-content--expanded {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.accordion-audio-player {\n  padding: var(--spacing-md);\n  background: var(--color-bg-primary);\n}\n\n/* 右パネルのレイアウト調整 */\n.right-panel {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow-y: auto;\n}\n\n/* SpeechRecognition コンポーネント内のスタイル調整 */\n.accordion-section--main .accordion-content--expanded > div {\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 文字起こし結果表示エリアのスクロール対応 */\n.accordion-section--main .accordion-content--expanded [style*=\"maxHeight\"] {\n  flex: 1;\n  overflow-y: auto;\n  max-height: none !important;\n}",""]);const s=i},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,o)&&!C.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:S.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+P(l,0):a,x(i)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),R(i,t,o,"",function(e){return e})):null!=i&&(T(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var u=a+P(s=e[c],c);l+=R(s,t,o,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=R(s=s.value,t,o,u=a+P(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function F(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",function(e){return t.call(n,e,o++)}),r}function z(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},A={transition:null},N={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:F,forEach:function(e,t,n){F(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return F(e,function(){t++}),t},toArray:function(e){return F(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=L,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!C.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:z}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},338:(e,t,n)=>{var r=n(961);t.H=r.createRoot,r.hydrateRoot},454:(e,t,n)=>{n.d(t,{AudioChunkProcessor:()=>o});var r=n(723);class o{constructor(){this.audioContext=null}async initAudioContext(){if(!this.audioContext){console.log("🔍 AudioContext初期化開始");try{this.audioContext=new AudioContext,console.log("🔍 AudioContext初期化完了:",{state:this.audioContext.state,sampleRate:this.audioContext.sampleRate})}catch(e){throw console.error("🚨 AudioContext初期化エラー:",e),e}}return this.audioContext}async processAudioFile(e,t=r._.CHUNK.DEFAULT_SIZE,n=r._.CHUNK.DEFAULT_OVERLAP){if(console.log("🚨 CRASH PREVENTION: チャンク分割処理開始:",e),this.isRecordingWebMFile(e))return console.log("🎆 録音中WebMファイルを検出 - リアルタイムチャンク処理で実行"),await this.createRealTimeRecordingChunks(e,t,n);try{const r=await this.loadAudioFile(e);console.log("音声ファイル読み込み成功:",{duration:r.duration,sampleRate:r.sampleRate,channels:r.numberOfChannels,length:r.length});const o=this.createChunks(r,t,n);if(console.log(`チャンク分割完了: ${o.length}個のチャンクを生成`),0===o.length)throw console.warn("通常の音声ファイルでチャンクが0個生成されました"),new Error("音声ファイルが短すぎるか、音声データが不十分です");return o}catch(r){if(console.error("音声ファイル処理エラー:",r),r instanceof Error&&(r.message.includes("録音中")||r.message.includes("ファイルの読み込みに失敗")||r.message.includes("WebMファイルのデコードに失敗")||r.message.includes("部分的なファイル")||r.message.includes("デコードタイムアウト"))){console.log("録音中ファイルエラーを検出 - 安全なフォールバック処理を実行");try{return await this.createMinimalRecordingChunks(e,t,n)}catch(e){return console.error("フォールバック処理も失敗:",e),this.createSafeMinimalChunks(t)}}throw r}}async loadAudioFile(e){console.log("🔍 loadAudioFile開始:",e);const t=await this.initAudioContext();console.log("🔍 AudioContext初期化完了、ファイル読み込み開始");try{console.log("音声ファイル読み込み開始:",e),console.log("🔍 window.electronAPI.loadAudioFile実行直前");const n=await window.electronAPI.loadAudioFile(e);if(console.log("🔍 window.electronAPI.loadAudioFile実行完了"),!n)throw new Error("ファイルの読み込みに失敗しました");console.log("ファイル読み込み成功、デコード開始"),console.log("🔍 fetch実行直前");const r=await fetch(n);console.log("🔍 fetch実行完了、response.arrayBuffer実行直前");const o=await r.arrayBuffer();if(console.log("🔍 response.arrayBuffer実行完了"),0===o.byteLength)throw new Error("空の音声ファイルです");console.log("ファイルサイズ:",o.byteLength,"bytes"),this.logMemoryUsage("デコード前");try{if(console.log("🔍 decodeAudioData開始 - arrayBuffer:",{byteLength:o.byteLength,constructor:o.constructor.name}),console.log("🔍 AudioContext状態:",{state:t.state,sampleRate:t.sampleRate}),e.includes(".webm")&&!await this.validateWebMHeader(o))throw new Error("仮説1確認: WebMファイルヘッダーが破損しています");let n;console.log("🔍 decodeAudioData実行直前");try{const e=o.slice(),r=t.decodeAudioData(e),a=new Promise((e,t)=>{setTimeout(()=>t(new Error("デコードタイムアウト")),5e3)});n=await Promise.race([r,a]),console.log("🔍 decodeAudioData実行完了"),this.logMemoryUsage("デコード後")}catch(t){if(console.error("🚨 decodeAudioData内部エラー:",t),this.logMemoryUsage("エラー時"),e.includes("recording_")&&e.includes(".webm"))throw console.log("🚨 録音中WebMファイルのデコード失敗を検出 - 安全にエラーを返す"),new Error("録音中WebMファイルのデコードに失敗しました。部分的なファイルの可能性があります。");throw t}return console.log("オーディオデコード成功"),console.log("デコード結果:",{duration:n.duration,sampleRate:n.sampleRate,channels:n.numberOfChannels,length:n.length}),n}catch(t){if(console.error("🚨 AudioContextでのデコードに失敗:",t),console.error("🚨 デコードエラーの詳細:",{name:t instanceof Error?t.name:"unknown",message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:"no stack",arrayBufferSize:o.byteLength}),e.includes("recording_")&&e.includes(".webm"))throw console.log("🚨 録音中WebMファイルのデコード失敗を検出 - フォールバック処理に移行"),new Error("録音中WebMファイルのデコードに失敗しました。部分的なファイルの可能性があります。");if(e.includes(".webm"))throw console.log("WebMファイルのデコードに失敗しました。ファイルが破損している可能性があります。"),new Error("WebMファイルのデコードに失敗しました。ファイルが破損している可能性があります。");throw t}}catch(e){console.error("音声ファイル読み込みエラー:",e);let t="音声ファイルの読み込みに失敗しました";throw e instanceof Error&&(e.message.includes("decode")?t="音声ファイルのデコードに失敗しました。ファイルが壊れているか、サポートされていない形式です。":e.message.includes("空")&&(t="音声ファイルが空です。録音が完了してから再試行してください。"),t+=` (詳細: ${e.message})`),new Error(t)}}createChunks(e,t,n){const r=e.sampleRate,o=e.numberOfChannels,a=(e.duration,Math.floor(t*r)),i=a-Math.floor(n*r),s=[];let l=0;for(let t=0;t<e.length;t+=i){const i=Math.min(t+a,e.length);if((i-t)/r<1)break;const c={id:`chunk_${l}`,sequenceNumber:l,startTime:t/r,endTime:i/r,audioData:this.extractAudioData(e,t,i),sampleRate:r,channels:o,overlapWithPrevious:l>0?n:0};this.validateChunk(c)&&s.push(c),l++}return s}extractAudioData(e,t,n){const r=e.numberOfChannels,o=n-t,a=new Float32Array(o*r);for(let n=0;n<r;n++){const i=e.getChannelData(n);for(let e=0;e<o;e++)a[e*r+n]=i[t+e]}return a.buffer}validateChunk(e){if(e.id.startsWith("recording_live_chunk_")||e.id.startsWith("safe_recording_chunk_")||e.id.startsWith("pending_chunk_")||e.id.startsWith("live_real_chunk_")||e.id.startsWith("safe_minimal_chunk_"))return console.log(`🎆 録音中チャンク ${e.id} は特別処理で有効として処理`),!0;if(e.endTime-e.startTime<1)return console.log(`チャンク ${e.id} は時間が短すぎます: ${e.endTime-e.startTime}秒`),!1;if(!e.audioData||0===e.audioData.byteLength)return console.warn(`チャンク ${e.id} に音声データがありません`),!1;const t=new Float32Array(e.audioData),n=this.calculateRMS(t);return n<.001&&console.warn(`チャンク ${e.id} は無音の可能性があります (RMS: ${n})`),console.log(`チャンク ${e.id} は有効です (RMS: ${n.toFixed(6)}, 時間: ${e.endTime-e.startTime}秒)`),!0}calculateRMS(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t/e.length)}createWavBuffer(e){const t=new Float32Array(e.audioData),n=e.sampleRate,r=e.channels,o=t.length,a=new ArrayBuffer(44+2*o),i=new DataView(a);return this.writeWavHeader(i,n,r,o),this.writeAudioData(i,t,44),a}writeWavHeader(e,t,n,r){const o=2*r,a=44+o;e.setUint32(0,1380533830,!1),e.setUint32(4,a-8,!0),e.setUint32(8,1463899717,!1),e.setUint32(12,1718449184,!1),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,n,!0),e.setUint32(24,t,!0),e.setUint32(28,t*n*2,!0),e.setUint16(32,2*n,!0),e.setUint16(34,16,!0),e.setUint32(36,1684108385,!1),e.setUint32(40,o,!0)}writeAudioData(e,t,n){for(let r=0;r<t.length;r++){const o=Math.max(-1,Math.min(1,t[r])),a=o<0?32768*o:32767*o;e.setInt16(n+2*r,a,!0)}}async createRecordingChunks(e,t,n){console.log("録音中のファイルに対するリアルタイムチャンク処理を開始");const r=await this.checkRecordingFileQuality(e);if(console.log("録音中ファイルの品質チェック結果:",r),!r.isReady&&(console.log("録音中のファイルの品質が不十分です。データの蓄積を待機します。"),await this.waitForFileDataAccumulation(e)>0)){const t=await this.checkRecordingFileQuality(e);console.log("再試行後の品質チェック結果:",t),t.isReady||console.warn("データ蓄積後も品質が不十分です。最小チャンクを作成します。")}let o=0;for(;o<5;){try{const r=await window.electronAPI.getFileSize(e);if(console.log(`録音中ファイルサイズ確認 (試行 ${o+1}): ${r} bytes`),r>1e4){console.log("録音中のファイルサイズが十分です。音声データ取得を試行します。");const r=await this.getCurrentRecordingData(e);if(r&&r.duration>0){const e=this.createChunks(r,t,n);if(console.log(`録音中データから${e.length}個のチャンクを生成（${r.duration}秒）`),e.length>0)return e.map(e=>({...e,id:`recording_${e.id}`,sequenceNumber:e.sequenceNumber}))}}else console.log(`録音中のファイルサイズが小さいため、待機します (${r} bytes)`)}catch(e){console.warn(`録音中データの取得に失敗 (試行 ${o+1}/5):`,e)}if(o++,o<5){const e=Math.min(2e3*o,8e3);console.log(`${e}ms待機してから再試行します...`),await new Promise(t=>setTimeout(t,e))}}console.warn("録音中のファイルから有効なデータが取得できませんでした。"),console.log("録音が開始されているか確認し、数秒待ってから再試行してください。");const a=await window.electronAPI.getFileSize(e);if(console.log(`最終的なファイルサイズ: ${a} bytes`),a>0){const e=Math.max(a/16e3,t);console.log(`推定時間: ${e}秒でダミーチャンクを作成`);const n={id:"recording_estimated_chunk_0",sequenceNumber:0,startTime:0,endTime:e,audioData:await this.createRecordingStartBuffer(e),sampleRate:44100,channels:1,overlapWithPrevious:0};return console.log("推定時間に基づくチャンクを作成しました"),[n]}{const e={id:"recording_start_chunk_0",sequenceNumber:0,startTime:0,endTime:t,audioData:await this.createRecordingStartBuffer(t),sampleRate:44100,channels:1,overlapWithPrevious:0};return console.log("録音開始直後用のチャンクを作成しました"),[e]}}async getCurrentRecordingData(e){try{console.log("録音中のファイルからデータを取得中:",e);const t=await this.checkRecordingFileQuality(e);if(!t.isReady)return console.log("録音中のファイルがまだ準備されていません:",t),null;const n=await this.loadPartialAudioFile(e);return n&&n.duration>0?(console.log(`録音中のファイルから ${n.duration} 秒の音声データを取得`),console.log(`品質: ${t.dataQuality}, サイズ: ${t.fileSize} bytes`),n):(console.log("録音中のファイルから有効な音声データを取得できませんでした"),null)}catch(e){return console.error("録音中データの取得エラー:",e),e instanceof Error&&(e.message.includes("decode")?console.warn("録音中のファイルのデコードエラー。録音が完了していない可能性があります。"):e.message.includes("fetch")?console.warn("録音中のファイルへのアクセスエラー。ファイルがロックされている可能性があります。"):e.message.includes("loadPartialAudioFile")&&console.warn("録音中のファイルAPIエラー。録音プロセスが開始されていない可能性があります。")),null}}async loadPartialAudioFile(e){const t=await this.initAudioContext();try{if(console.log("=== 録音中ファイルの診断開始 ==="),"function"!=typeof window.electronAPI.loadPartialAudioFile)throw console.error("loadPartialAudioFile APIが利用できません"),new Error("loadPartialAudioFile APIが利用できません");if("function"!=typeof window.electronAPI.getFileSize)throw console.error("getFileSize APIが利用できません"),new Error("getFileSize APIが利用できません");const n=await window.electronAPI.getFileSize(e);if(console.log(`録音中ファイルのサイズ: ${n} bytes`),0===n&&(console.warn("ファイルサイズが0です。録音データが蓄積されるまで待機します。"),0===await this.waitForFileDataAccumulation(e))){console.warn("録音データが蓄積されていません。最小限のチャンクを作成します。");const e=t.createBuffer(1,220500,44100),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=.01*(Math.random()-.5);return console.log("録音開始直後用のダミーバッファを作成しました（5秒間）"),e}console.log("loadPartialAudioFile APIを呼び出し中...");const r=await window.electronAPI.loadPartialAudioFile(e);if(!r)throw console.error("loadPartialAudioFile APIからnullが返されました"),new Error("部分的なファイルの読み込みに失敗しました");console.log("loadPartialAudioFile APIから正常にデータを取得しました");const o=await fetch(r),a=await o.arrayBuffer();if(console.log(`録音中ファイルのArrayBufferサイズ: ${a.byteLength} bytes`),0===a.byteLength)throw console.error("ArrayBufferのサイズが0です"),new Error("ArrayBufferのサイズが0です");try{console.log("AudioContext.decodeAudioDataを試行中...");const e=await t.decodeAudioData(a);return console.log(`録音中ファイルから ${e.duration} 秒の音声データを正常に取得`),console.log("=== 録音中ファイルの診断終了（成功） ==="),e}catch(e){if(console.warn("録音中ファイルのデコードに失敗:",e),a.byteLength>1e4){console.log("ファイルサイズが十分大きいため、推定時間でダミーバッファを作成します");const e=Math.min(Math.max(a.byteLength/16e3,1),60),n=44100,r=Math.floor(e*n),o=t.createBuffer(1,r,n),i=o.getChannelData(0);for(let e=0;e<i.length;e++)i[e]=.001*(Math.random()-.5);return console.log(`録音中ファイル用のダミーバッファを作成しました（推定時間: ${e}秒）`),console.log("=== 録音中ファイルの診断終了（ダミーバッファ） ==="),o}throw e}}catch(e){throw console.error("部分的な音声ファイル読み込みエラー:",e),console.log("=== 録音中ファイルの診断終了（エラー） ==="),e}}createSilentAudioBuffer(e){const t=new Float32Array(44100*e*1);for(let e=0;e<t.length;e++)t[e]=.001*(Math.random()-.5);return t.buffer}async waitForFileDataAccumulation(e){console.log("録音中のファイルのデータ蓄積を監視開始");let t=0,n=0,r=0,o=0,a=3e3;for(;t<45e3;)try{const i=await window.electronAPI.getFileSize(e);if(console.log(`録音中ファイルサイズ監視: ${i} bytes (経過時間: ${t}ms)`),i>n){r++;const e=i-n;if(console.log(`ファイルサイズ増加を検出: ${n} → ${i} bytes (+${e}) (連続増加: ${r}回)`),a=1e3,i>=5e3){if(console.log(`最小データサイズに到達: ${i} bytes >= 5000 bytes`),i>=5e4)return console.log("安定した録音データサイズに達しました。処理を開始します。"),i;if(r>=2)return console.log("録音データが安定して蓄積されています。処理を開始します。"),i}}else if(i===n&&i>0){if(o++,console.log(`ファイルサイズが安定しています: ${i} bytes (安定回数: ${o})`),i>=5e3&&o>=2)return console.log("データサイズが十分で安定しているため、処理を開始します。"),i}else console.warn(`ファイルサイズが減少しました: ${n} → ${i} bytes`),o=0,r=0;n=i,await new Promise(e=>setTimeout(e,a)),t+=a}catch(e){console.error("ファイルサイズ取得エラー:",e),await new Promise(e=>setTimeout(e,1e3)),t+=1e3}return console.warn("録音データの蓄積を45000ms間待機しましたが、十分なデータが蓄積されませんでした。"),console.log(`最終ファイルサイズ: ${n} bytes`),n}async checkRecordingFileQuality(e){const t=await window.electronAPI.getFileSize(e),n={isReady:!1,fileSize:t,estimatedDuration:0,hasValidHeader:!1,bitRate:0,dataQuality:"insufficient"};if(t<1e3)return console.warn("録音ファイルサイズが小さすぎます:",t),n;try{const r=await window.electronAPI.loadPartialAudioFile(e);if(r){const e=await fetch(r),o=await e.arrayBuffer(),a=new Uint8Array(o.slice(0,64));if(26===a[0]&&69===a[1]&&223===a[2]&&163===a[3]){n.hasValidHeader=!0;const e=Math.floor(8*t/Math.max(1,t/16e3));n.bitRate=e,n.estimatedDuration=Math.max(1,t/16e3),t>=1e5?(n.dataQuality="excellent",n.isReady=!0):t>=5e4?(n.dataQuality="good",n.isReady=!0):t>=1e4?(n.dataQuality="poor",n.isReady=!0):(n.dataQuality="insufficient",n.isReady=!1),console.log("録音ファイル品質チェック:",{...n,bitrateKbps:Math.round(n.bitRate/1e3)})}else console.warn("WebMヘッダーが見つかりませんでした。他の形式の可能性があります。"),82===a[0]&&73===a[1]&&70===a[2]&&70===a[3]&&(n.hasValidHeader=!0,n.estimatedDuration=Math.max(1,t/176400),n.isReady=t>5e3,n.dataQuality=t>=5e4?"excellent":t>=2e4?"good":t>=5e3?"poor":"insufficient",console.log("WAVファイルとして品質チェック:",n))}}catch(e){console.warn("録音ファイルの品質チェックに失敗:",e),t>=1e4&&(n.isReady=!0,n.dataQuality="poor",n.estimatedDuration=Math.max(1,t/16e3),console.log("エラー発生時の代替品質判定:",n))}return n}async createRecordingStartBuffer(e){const t=new Float32Array(44100*e*1);for(let e=0;e<t.length;e++){const n=e/44100;t[e]=.001*Math.sin(2*Math.PI*440*n)}return t.buffer}async createMinimalRecordingChunks(e,t,n){console.log("録音中ファイル用のチャンク作成開始:",e);try{let r=0;try{r=await window.electronAPI.getFileSize(e),console.log("録音中ファイルサイズ:",r,"bytes")}catch(e){console.warn("ファイルサイズ取得エラー:",e)}if(r<1e3)return console.log("ファイルサイズが小さいか不明のため、最小チャンクを作成"),this.createSafeMinimalChunks(t);try{console.log("録音中ファイルの音声データ読み込みを試行...");const r=await Promise.race([this.loadAudioFileWithRetry(e,3),new Promise((e,t)=>setTimeout(()=>t(new Error("Audio loading timeout")),5e3))]);return console.log("録音中ファイルの音声データ読み込み成功:",{duration:r.duration,sampleRate:r.sampleRate,channels:r.numberOfChannels}),this.createChunks(r,t,n)}catch(e){console.warn("録音中ファイルの音声データ読み込み失敗:",e);const o=Math.max(1,r/16e3),a=Math.max(1,Math.min(10,Math.floor(o/t)));return console.log(`推定ベースでチャンク作成: ${o}秒、${a}チャンク`),this.createEstimatedChunks(o,a,t,n)}}catch(e){return console.error("録音中ファイルチャンク作成で予期しないエラー:",e),this.createSafeMinimalChunks(t)}}async loadAudioFileWithRetry(e,t){let n=null;for(let r=0;r<t;r++)try{return console.log(`音声ファイル読み込み試行 ${r+1}/${t}`),await this.loadAudioFile(e)}catch(e){n=e,console.warn(`読み込み試行 ${r+1} 失敗:`,e),r<t-1&&await new Promise(e=>setTimeout(e,500))}throw n||new Error("すべての読み込み試行が失敗しました")}createEstimatedChunks(e,t,n,r){const o=[];for(let a=0;a<t;a++){const t=a*n,i=Math.min((a+1)*n,e);o.push({id:`estimated_chunk_${a}`,sequenceNumber:a,startTime:t,endTime:i,audioData:new ArrayBuffer(0),sampleRate:44100,channels:1,overlapWithPrevious:a>0?r:0})}return console.log(`推定ベースで${o.length}個のチャンクを作成`),o}isRecordingWebMFile(e){return!(!e.includes("recording_")||!e.includes(".webm")||(console.log("🚨 録音中WebMファイルを検出:",e),0))}async validateWebMHeader(e){try{const t=new Uint8Array(e),n=t.length>=4&&26===t[0]&&69===t[1]&&223===t[2]&&163===t[3];if(console.log("🔍 WebMヘッダー検証:",{hasValidHeader:n,firstBytes:Array.from(t.slice(0,8)).map(e=>"0x"+e.toString(16).padStart(2,"0")),fileSize:e.byteLength}),!n)return console.error("🚨 仮説1確認: WebMヘッダーが破損しています"),!1;if(t.length>=8){const n=t[4]|t[5]<<8|t[6]<<16|t[7]<<24;if(console.log("🔍 EBMLサイズ情報:",n,"vs 実際のファイルサイズ:",e.byteLength),n>2*e.byteLength)return console.error("🚨 仮説1確認: EBMLサイズが不正確です"),!1}return!0}catch(e){return console.error("🚨 WebMヘッダー検証エラー:",e),!1}}logMemoryUsage(e){try{const t=performance.memory;if(t){const n=Math.round(t.usedJSHeapSize/1024/1024),r=Math.round(t.totalJSHeapSize/1024/1024),o=Math.round(t.jsHeapSizeLimit/1024/1024);console.log(`🔍 メモリ使用量[${e}]:`,{used:`${n}MB`,total:`${r}MB`,limit:`${o}MB`,usage:`${Math.round(n/o*100)}%`}),n/o>.8&&console.warn("🚨 仮説2確認: メモリ使用率が高いです")}else console.log(`🔍 メモリ情報[${e}]: 利用不可`)}catch(t){console.log(`🔍 メモリ情報[${e}]: エラー`,t)}}async createSafeRecordingChunks(e,t,n){console.log("🎆 録音中ファイル用の安全なチャンク作成（decodeAudioData回避）:",e);try{let r=0,o=t;try{r=await window.electronAPI.getFileSize(e),console.log("録音中ファイルサイズ:",r,"bytes"),r>1e3&&(o=Math.max(1,Math.min(300,r/2e4)))}catch(e){console.warn("ファイルサイズ取得エラー:",e)}const a=Math.max(1,Math.min(10,Math.ceil(o/t)));console.log(`録音中ファイルの推定時間: ${o.toFixed(1)}秒, 生成チャンク数: ${a}`);const i=[];for(let e=0;e<a;e++){const r=e*t,a=Math.min((e+1)*t,o);i.push({id:`recording_live_chunk_${e}`,sequenceNumber:e,startTime:r,endTime:a,audioData:await this.createRecordingChunkData(r,a-r),sampleRate:44100,channels:1,overlapWithPrevious:e>0?n:0})}return console.log(`🎆 録音中ファイル用のチャンクを${i.length}個生成完了`),i}catch(e){return console.error("安全なチャンク作成でエラー:",e),this.createSafeMinimalChunks(t)}}async createRecordingChunkData(e,t){try{return console.log(`録音中チャンクダミーデータ生成: ${t}秒 - 空のバッファで処理`),new ArrayBuffer(0)}catch(e){return console.warn("ダミーデータ生成エラー:",e),new ArrayBuffer(0)}}async createRealTimeRecordingChunks(e,t,n){console.log("🎆 録音中ファイルからリアルタイムチャンク作成:",e);try{const r=await window.electronAPI.getFileSize(e);if(console.log("録音中ファイルサイズ:",r,"bytes"),r>5e4)try{return console.log("🎆 ファイルサイズが十分なので、実際の音声データ取得を試行"),await this.tryExtractRealAudioChunks(e,t,n,r)}catch(e){console.warn("実際の音声データ取得に失敗、プレースホルダーチャンクで続行:",e)}return await this.createSafeRecordingChunks(e,t,n)}catch(r){return console.error("リアルタイムチャンク作成エラー:",r),await this.createSafeRecordingChunks(e,t,n)}}async tryExtractRealAudioChunks(e,t,n,r){console.log("🎆 実際の音声データ抽出を試行中...");const o=Math.max(1,Math.min(120,r/2e4)),a=Math.max(1,Math.min(8,Math.ceil(o/t)));console.log(`実際の音声データベースの推定: ${o.toFixed(1)}秒, ${a}チャンク`);const i=[];for(let e=0;e<a;e++){const r=e*t,a=Math.min((e+1)*t,o);i.push({id:`live_real_chunk_${e}`,sequenceNumber:e,startTime:r,endTime:a,audioData:new ArrayBuffer(0),sampleRate:44100,channels:1,overlapWithPrevious:e>0?n:0})}return console.log(`🎆 実際の音声データベースのチャンクを${i.length}個生成`),i}createSafeMinimalChunks(e){return console.log("安全な最小チャンクを作成"),[{id:"safe_minimal_chunk_0",sequenceNumber:0,startTime:0,endTime:e,audioData:new ArrayBuffer(0),sampleRate:44100,channels:1,overlapWithPrevious:0}]}createPlaceholderChunks(e){return this.createSafeMinimalChunks(e)}cleanup(){this.audioContext&&(this.audioContext.close(),this.audioContext=null)}}},463:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,A(k);else{var t=r(u);null!==t&&N(x,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var a=h;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!R());){var i=f.callback;if("function"==typeof i){f.callback=null,h=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?f.callback=s:f===r(c)&&o(c),w(n)}else o(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&N(x,d.startTime-n),l=!1}return l}finally{f=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,T=-1,_=5,P=-1;function R(){return!(t.unstable_now()-P<_)}function F(){if(null!==E){var e=t.unstable_now();P=e;var n=!0;try{n=E(!0,e)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"==typeof b)S=function(){b(F)};else if("undefined"!=typeof MessageChannel){var z=new MessageChannel,I=z.port2;z.port1.onmessage=F,S=function(){I.postMessage(null)}}else S=function(){v(F,0)};function A(e){E=e,C||(C=!0,S())}function N(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,A(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(m?(y(T),T=-1):m=!0,N(x,a-i))):(e.sortIndex=s,n(c,e),g||p||(g=!0,A(k))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},540:(e,t,n)=>{e.exports=n(287)},551:(e,t,n)=>{var r=n(540),o=n(982);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}var M,D=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var $=!1;function U(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var l="\n"+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function O(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 1:return U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case F:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case z:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ce=null;function Ee(e){if(e=wo(e)){if("function"!=typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Te(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function _e(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Pe(e,t){return e(t)}function Re(){}var Fe=!1;function ze(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Pe(e,t,n)}finally{Fe=!1,(null!==Se||null!==Ce)&&(Re(),_e())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Ae=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Ae=!1}function Le(e,t,n,r,o,a,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Me=!1,De=null,je=!1,$e=null,Ue={onError:function(e){Me=!0,De=e}};function Oe(e,t,n,r,o,a,i,s,l){Me=!1,De=null,Le.apply(Ue,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return He(o),e;if(i===r)return He(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Qe=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,Ke=o.unstable_shouldYield,Ge=o.unstable_requestPaint,Xe=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null,it=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=dt(s):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~o)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var xt,kt,St,Ct,Et,Tt=!1,_t=[],Pt=null,Rt=null,Ft=null,zt=new Map,It=new Map,At=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":zt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Mt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&null!==(t=wo(t))&&kt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=bo(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function $t(e,t,n){jt(e)&&n.delete(t)}function Ut(){Tt=!1,null!==Pt&&jt(Pt)&&(Pt=null),null!==Rt&&jt(Rt)&&(Rt=null),null!==Ft&&jt(Ft)&&(Ft=null),zt.forEach($t),It.forEach($t)}function Ot(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return Ot(t,e)}if(0<_t.length){Ot(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&Ot(Pt,e),null!==Rt&&Ot(Rt,e),null!==Ft&&Ot(Ft,e),zt.forEach(t),It.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Dt(n),null===n.blockedOn&&At.shift()}var Bt=w.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var o=bt,a=Bt.transition;Bt.transition=null;try{bt=1,Qt(e,t,n,r)}finally{bt=o,Bt.transition=a}}function Vt(e,t,n,r){var o=bt,a=Bt.transition;Bt.transition=null;try{bt=4,Qt(e,t,n,r)}finally{bt=o,Bt.transition=a}}function Qt(e,t,n,r){if(Ht){var o=Kt(e,t,n,r);if(null===o)Hr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Pt=Mt(Pt,e,t,n,r,o),!0;case"dragenter":return Rt=Mt(Rt,e,t,n,r,o),!0;case"mouseover":return Ft=Mt(Ft,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return zt.set(a,Mt(zt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,It.set(a,Mt(It.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==o;){var a=wo(o);if(null!==a&&xt(a),null===(a=Kt(e,t,n,r))&&Hr(e,t,r,Yt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=bo(e=xe(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,o="value"in Xt?Xt.value:Xt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=D({},cn,{view:0,detail:0}),fn=on(dn),hn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(hn),gn=on(D({},hn,{dataTransfer:0})),mn=on(D({},dn,{relatedTarget:0})),vn=on(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(D({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Cn}var Tn=D({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(Tn),Pn=on(D({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Fn=on(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),zn=D({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=on(zn),An=[9,13,27,32],Nn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Dn=u&&(!Nn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),$n=!1;function Un(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1,Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Qn=null;function Yn(e){jr(e,0)}function Kn(e){if(Q(xo(e)))return e}function Gn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Qn=Vn=null)}function nr(e){if("value"===e.propertyName&&Kn(Qn)){var t=[];qn(t,Qn,e,xe(e)),ze(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Qn)}function ar(e,t){if("click"===e)return Kn(t)}function ir(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=ur(n,a);var i=ur(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||(r="selectionStart"in(r=mr)&&hr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Cr={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=Er("animationend"),_r=Er("animationiteration"),Pr=Er("animationstart"),Rr=Er("transitionend"),Fr=new Map,zr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Fr.set(e,t),l(t,[e])}for(var Ar=0;Ar<zr.length;Ar++){var Nr=zr[Ar];Ir(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Ir(Tr,"onAnimationEnd"),Ir(_r,"onAnimationIteration"),Ir(Pr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,c){if(Oe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var u=De;Me=!1,De=null,je||(je=!0,$e=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Dr(o,s,c),a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Dr(o,s,c),a=l}}}if(je)throw e=$e,je=!1,$e=null,e}function $r(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Or="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Or]){e[Or]=!0,i.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Or]||(t[Or]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Gt(t)){case 1:var o=qt;break;case 4:o=Vt;break;default:o=Qt}n=o.bind(null,t,n,e),o=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=bo(s)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}s=s.parentNode}}r=r.return}ze(function(){var r=a,o=xe(n),i=[];e:{var s=Fr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Tr:case _r:case Pr:l=vn;break;case Rr:l=Fn;break;case"scroll":l=fn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,p=r;null!==p;){var g=(h=p).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==f&&null!=(g=Ie(p,f))&&u.push(qr(p,g,h))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),i.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[go])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,g="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?s:xo(l),h=null==c?s:xo(c),(s=new u(g,p+"leave",l,n,o)).target=d,s.relatedTarget=h,g=null,bo(o)===r&&((u=new u(f,p+"enter",c,n,o)).target=h,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Qr(h))p++;for(h=0,g=f;g;g=Qr(g))h++;for(;0<p-h;)u=Qr(u),p--;for(;0<h-p;)f=Qr(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Qr(u),f=Qr(f)}u=null}else u=null;null!==l&&Yr(i,s,l,u,!1),null!==c&&null!==d&&Yr(i,d,c,u,!0)}if("select"===(l=(s=r?xo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Gn;else if(Hn(s))if(Xn)m=ir;else{m=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?qn(i,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xo(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(i,n,o)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Jt="value"in(Xt=o)?Xt.value:Xt.textContent,Wn=!0)),0<(v=Vr(r,b)).length&&(b=new wn(b,e,null,n,o),i.push({event:b,listeners:v}),(y||null!==(y=On(n)))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:($n=!0,jn);case"textInput":return(e=t.data)===jn&&$n?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Nn&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Vr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=y)}jr(i,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Ie(e,n))&&r.unshift(qr(e,a,o)),null!=(a=Ie(e,t))&&r.push(qr(e,a,o))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Ie(n,a))&&i.unshift(qr(n,l,s)):o||null!=(l=Ie(n,a))&&i.push(qr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Kr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Kr,"\n").replace(Gr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,ao="function"==typeof Promise?Promise:void 0,io="function"==typeof queueMicrotask?queueMicrotask:void 0!==ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Wt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),ho="__reactFiber$"+fo,po="__reactProps$"+fo,go="__reactContainer$"+fo,mo="__reactEvents$"+fo,vo="__reactListeners$"+fo,yo="__reactHandles$"+fo;function bo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[ho])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[ho]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ko(e){return e[po]||null}var So=[],Co=-1;function Eo(e){return{current:e}}function To(e){0>Co||(e.current=So[Co],So[Co]=null,Co--)}function _o(e,t){Co++,So[Co]=e.current,e.current=t}var Po={},Ro=Eo(Po),Fo=Eo(!1),zo=Po;function Io(e,t){var n=e.type.contextTypes;if(!n)return Po;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ao(e){return null!=e.childContextTypes}function No(){To(Fo),To(Ro)}function Lo(e,t,n){if(Ro.current!==Po)throw Error(a(168));_o(Ro,t),_o(Fo,n)}function Mo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,B(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Po,zo=Ro.current,_o(Ro,e),_o(Fo,Fo.current),!0}function jo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Mo(e,t,zo),r.__reactInternalMemoizedMergedChildContext=e,To(Fo),To(Ro),_o(Ro,e)):To(Fo),_o(Fo,n)}var $o=null,Uo=!1,Oo=!1;function Wo(e){null===$o?$o=[e]:$o.push(e)}function Bo(){if(!Oo&&null!==$o){Oo=!0;var e=0,t=bt;try{var n=$o;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$o=null,Uo=!1}catch(t){throw null!==$o&&($o=$o.slice(e+1)),Qe(Ze,Bo),t}finally{bt=t,Oo=!1}}return null}var Ho=[],qo=0,Vo=null,Qo=0,Yo=[],Ko=0,Go=null,Xo=1,Jo="";function Zo(e,t){Ho[qo++]=Qo,Ho[qo++]=Vo,Vo=e,Qo=t}function ea(e,t,n){Yo[Ko++]=Xo,Yo[Ko++]=Jo,Yo[Ko++]=Go,Go=e;var r=Xo;e=Jo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Xo=1<<32-it(t)+o|n<<o|r,Jo=a+e}else Xo=1<<a|n<<o|r,Jo=e}function ta(e){null!==e.return&&(Zo(e,1),ea(e,1,0))}function na(e){for(;e===Vo;)Vo=Ho[--qo],Ho[qo]=null,Qo=Ho[--qo],Ho[qo]=null;for(;e===Go;)Go=Yo[--Ko],Yo[Ko]=null,Jo=Yo[--Ko],Yo[Ko]=null,Xo=Yo[--Ko],Yo[Ko]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=zc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Go?{id:Xo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=zc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return!(!(1&e.mode)||128&e.flags)}function ua(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&la(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=co(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=oa;e;)e=co(e.nextSibling)}function pa(){oa=ra=null,aa=!1}function ga(e){null===ia?ia=[e]:ia.push(e)}var ma=w.ReactCurrentBatchConfig;function va(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===I&&ba(a)===t.type)?((r=o(t,n.props)).ref=va(e,t,n),r.return=e,r):((r=Nc(n.type,n.key,n.props,null,e.mode,r)).ref=va(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=va(e,null,t),n.return=e,n;case k:return(t=jc(t,e.mode,n)).return=e,t;case I:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case I:return h(e,t,(o=n._init)(n._payload),r)}if(te(n)||L(n))return null!==o?null:d(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case I:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,o,null);ya(t,r)}return null}function g(o,a,s,l){for(var c=null,u=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=h(o,d,s[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(o,d),a=i(v,a,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===s.length)return n(o,d),aa&&Zo(o,g),c;if(null===d){for(;g<s.length;g++)null!==(d=f(o,s[g],l))&&(a=i(d,a,g),null===u?c=d:u.sibling=d,u=d);return aa&&Zo(o,g),c}for(d=r(o,d);g<s.length;g++)null!==(m=p(d,o,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=i(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),aa&&Zo(o,g),c}function m(o,s,l,c){var u=L(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=h(o,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(o,g),s=i(b,s,m),null===d?u=b:d.sibling=b,d=b,g=v}if(y.done)return n(o,g),aa&&Zo(o,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=f(o,y.value,c))&&(s=i(y,s,m),null===d?u=y:d.sibling=y,d=y);return aa&&Zo(o,m),u}for(g=r(o,g);!y.done;m++,y=l.next())null!==(y=p(g,o,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=i(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach(function(e){return t(o,e)}),aa&&Zo(o,m),u}return function e(r,a,i,l){if("object"==typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"==typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=a;null!==u;){if(u.key===c){if((c=i.type)===S){if(7===u.tag){n(r,u.sibling),(a=o(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===I&&ba(c)===u.type){n(r,u.sibling),(a=o(u,i.props)).ref=va(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===S?((a=Lc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Nc(i.type,i.key,i.props,null,r.mode,l)).ref=va(r,a,i),l.return=r,r=l)}return s(r);case k:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(i,r.mode,l)).return=r,r=a}return s(r);case I:return e(r,a,(u=i._init)(i._payload),l)}if(te(i))return g(r,a,i,l);if(L(i))return m(r,a,i,l);ya(r,i)}return"string"==typeof i&&""!==i||"number"==typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Dc(i,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var xa=wa(!0),ka=wa(!1),Sa=Eo(null),Ca=null,Ea=null,Ta=null;function _a(){Ta=Ea=Ca=null}function Pa(e){var t=Sa.current;To(Sa),e._currentValue=t}function Ra(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fa(e,t){Ca=e,Ta=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function za(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},null===Ea){if(null===Ca)throw Error(a(308));Ea=e,Ca.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return t}var Ia=null;function Aa(e){null===Ia?Ia=[e]:Ia.push(e)}function Na(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Aa(t)):(n.next=o.next,o.next=n),t.interleaved=n,La(e,r)}function La(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ja(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $a(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Pl){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,La(e,n)}return null===(o=r.interleaved)?(t.next=t,Aa(r)):(t.next=o.next,o.next=t),r.interleaved=t,La(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Wa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var o=e.updateQueue;Ma=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==a){var d=o.baseState;for(i=0,u=c=l=null,s=a;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(f=t,h=n,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=g.payload)?p.call(h,d,f):p))break e;d=D({},d,f);break e;case 2:Ma=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,i|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Ml|=i,e.lanes=i,e.memoizedState=d}}function Ha(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(a(191,o));o.call(r)}}}var qa={},Va=Eo(qa),Qa=Eo(qa),Ya=Eo(qa);function Ka(e){if(e===qa)throw Error(a(174));return e}function Ga(e,t){switch(_o(Ya,t),_o(Qa,e),_o(Va,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}To(Va),_o(Va,t)}function Xa(){To(Va),To(Qa),To(Ya)}function Ja(e){Ka(Ya.current);var t=Ka(Va.current),n=le(t,e.type);t!==n&&(_o(Qa,e),_o(Va,n))}function Za(e){Qa.current===e&&(To(Va),To(Qa))}var ei=Eo(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var oi=w.ReactCurrentDispatcher,ai=w.ReactCurrentBatchConfig,ii=0,si=null,li=null,ci=null,ui=!1,di=!1,fi=0,hi=0;function pi(){throw Error(a(321))}function gi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function mi(e,t,n,r,o,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=null===e||null===e.memoizedState?Zi:es,e=n(r,o),di){i=0;do{if(di=!1,fi=0,25<=i)throw Error(a(301));i+=1,ci=li=null,t.updateQueue=null,oi.current=ts,e=n(r,o)}while(di)}if(oi.current=Ji,t=null!==li&&null!==li.next,ii=0,ci=li=si=null,ui=!1,t)throw Error(a(300));return e}function vi(){var e=0!==fi;return fi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?si.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?si.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?si.memoizedState=ci=e:ci=ci.next=e}return ci}function wi(e,t){return"function"==typeof t?t(e):t}function xi(e){var t=bi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=li,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=r):c=c.next=f,si.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,si.lanes|=i,Ml|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=bi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(bs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Si(){}function Ci(e,t){var n=si,r=bi(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,bs=!0),r=r.queue,Mi(_i.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,zi(9,Ti.bind(null,n,r,o,t),void 0,null),null===Rl)throw Error(a(349));30&ii||Ei(n,t,o)}return o}function Ei(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ti(e,t,n,r){t.value=n,t.getSnapshot=r,Pi(t)&&Ri(e)}function _i(e,t,n){return n(function(){Pi(t)&&Ri(e)})}function Pi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Ri(e){var t=La(e,1);null!==t&&nc(t,e,1,-1)}function Fi(e){var t=yi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,si,e),[t.memoizedState,e]}function zi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ii(){return bi().memoizedState}function Ai(e,t,n,r){var o=yi();si.flags|=e,o.memoizedState=zi(1|t,n,void 0,void 0===r?null:r)}function Ni(e,t,n,r){var o=bi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&gi(r,i.deps))return void(o.memoizedState=zi(t,n,a,r))}si.flags|=e,o.memoizedState=zi(1|t,n,a,r)}function Li(e,t){return Ai(8390656,8,e,t)}function Mi(e,t){return Ni(2048,8,e,t)}function Di(e,t){return Ni(4,2,e,t)}function ji(e,t){return Ni(4,4,e,t)}function $i(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,n){return n=null!=n?n.concat([e]):null,Ni(4,4,$i.bind(null,t,e),n)}function Oi(){}function Wi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 21&ii?(sr(n,t)||(n=gt(),si.lanes|=n,Ml|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n)}function qi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=n,ai.transition=r}}function Vi(){return bi().memoizedState}function Qi(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(e)?Gi(t,n):null!==(n=Na(e,t,n,r))&&(nc(n,e,r,ec()),Xi(n,t,r))}function Yi(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Gi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(o.next=o,Aa(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(e){}null!==(n=Na(e,t,o,r))&&(nc(n,e,r,o=ec()),Xi(n,t,r))}}function Ki(e){var t=e.alternate;return e===si||null!==t&&t===si}function Gi(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ji={readContext:za,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:za,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:za,useEffect:Li,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ai(4194308,4,$i.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qi.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Fi,useDebugValue:Oi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Fi(!1),t=e[0];return e=qi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,o=yi();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rl)throw Error(a(349));30&ii||Ei(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Li(_i.bind(null,r,i,e),[e]),r.flags|=2048,zi(9,Ti.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Rl.identifierPrefix;if(aa){var n=Jo;t=":"+t+"R"+(n=(Xo&~(1<<32-it(Xo)-1)).toString(32)+n),0<(n=fi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:za,useCallback:Wi,useContext:za,useEffect:Mi,useImperativeHandle:Ui,useInsertionEffect:Di,useLayoutEffect:ji,useMemo:Bi,useReducer:xi,useRef:Ii,useState:function(){return xi(wi)},useDebugValue:Oi,useDeferredValue:function(e){return Hi(bi(),li.memoizedState,e)},useTransition:function(){return[xi(wi)[0],bi().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ci,useId:Vi,unstable_isNewReconciler:!1},ts={readContext:za,useCallback:Wi,useContext:za,useEffect:Mi,useImperativeHandle:Ui,useInsertionEffect:Di,useLayoutEffect:ji,useMemo:Bi,useReducer:ki,useRef:Ii,useState:function(){return ki(wi)},useDebugValue:Oi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Hi(t,li.memoizedState,e)},useTransition:function(){return[ki(wi)[0],bi().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ci,useId:Vi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=$a(r,o);a.payload=t,null!=n&&(a.callback=n),null!==(t=Ua(e,a,o))&&(nc(t,e,o,r),Oa(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=$a(r,o);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Ua(e,a,o))&&(nc(t,e,o,r),Oa(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=$a(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=Ua(e,o,r))&&(nc(t,e,r,n),Oa(t,e,r))}};function as(e,t,n,r,o,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(o,a))}function is(e,t,n){var r=!1,o=Po,a=t.contextType;return"object"==typeof a&&null!==a?a=za(a):(o=Ao(t)?zo:Ro.current,a=(r=null!=(r=t.contextTypes))?Io(e,o):Po),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Da(e);var a=t.contextType;"object"==typeof a&&null!==a?o.context=za(a):(a=Ao(t)?zo:Ro.current,o.context=Io(e,a)),o.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Ba(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=O(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var fs="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=$a(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),ds(0,t)},n}function ps(e,t,n){(n=$a(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$a(-1,1)).tag=2,Ua(n,t,1))),n.lanes|=1),e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?ka(t,null,n,r):xa(t,e.child,n,r)}function xs(e,t,n,r,o){n=n.render;var a=t.ref;return Fa(t,o),r=mi(e,t,n,r,a,o),n=vi(),null===e||bs?(aa&&n&&ta(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function ks(e,t,n,r,o){if(null===e){var a=n.type;return"function"!=typeof a||Ic(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Hs(e,t,o)}return t.flags|=1,(e=Ac(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Hs(e,t,o);131072&e.flags&&(bs=!0)}}return Ts(e,t,n,r,o)}function Cs(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_o(Al,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,_o(Al,Il),Il|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_o(Al,Il),Il|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_o(Al,Il),Il|=r;return ws(e,t,o,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,o){var a=Ao(n)?zo:Ro.current;return a=Io(t,a),Fa(t,o),n=mi(e,t,n,r,a,o),r=vi(),null===e||bs?(aa&&r&&ta(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function _s(e,t,n,r,o){if(Ao(n)){var a=!0;Do(t)}else a=!1;if(Fa(t,o),null===t.stateNode)Bs(e,t),is(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;c="object"==typeof c&&null!==c?za(c):Io(t,c=Ao(n)?zo:Ro.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,i,r,c),Ma=!1;var f=t.memoizedState;i.state=f,Ba(t,r,i,o),l=t.memoizedState,s!==r||f!==l||Fo.current||Ma?("function"==typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Ma||as(t,n,s,r,f,l,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ja(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),i.props=c,d=t.pendingProps,f=i.context,l="object"==typeof(l=n.contextType)&&null!==l?za(l):Io(t,l=Ao(n)?zo:Ro.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==d||f!==l)&&ss(t,i,r,l),Ma=!1,f=t.memoizedState,i.state=f,Ba(t,r,i,o);var p=t.memoizedState;s!==d||f!==p||Fo.current||Ma?("function"==typeof h&&(rs(t,n,h,r),p=t.memoizedState),(c=Ma||as(t,n,c,r,f,p,l)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ps(e,t,n,r,a,o)}function Ps(e,t,n,r,o,a){Es(e,t);var i=!!(128&t.flags);if(!r&&!i)return o&&jo(t,n,!1),Hs(e,t,a);r=t.stateNode,ys.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,o&&jo(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Ga(e,t.containerInfo)}function Fs(e,t,n,r,o){return pa(),ga(o),t.flags|=256,ws(e,t,n,r),t.child}var zs,Is,As,Ns,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,o=t.pendingProps,i=ei.current,s=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),_o(ei,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},1&o||null===s?s=Mc(l,o,0,null):(s.childLanes=0,s.pendingProps=l),e=Lc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):js(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,$s(e,t,s,r=us(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Mc({mode:"visible",children:r.children},o,0,null),(i=Lc(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,1&t.mode&&xa(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,i);if(!(1&t.mode))return $s(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,$s(e,t,s,r=us(i=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Rl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,La(e,o),nc(r,e,o,-1))}return gc(),$s(e,t,s,r=us(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Yo[Ko++]=Xo,Yo[Ko++]=Jo,Yo[Ko++]=Go,Xo=e.id,Jo=e.overflow,Go=t),(t=js(t,r.children)).flags|=4096,t)}(e,t,l,o,r,i,n);if(s){s=o.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:o.children};return 1&l||t.child===i?(o=Ac(i,c)).subtreeFlags=14680064&i.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null),null!==r?s=Ac(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Ac(s,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function js(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $s(e,t,n,r){return null!==r&&ga(r),xa(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ra(e.return,t,n)}function Os(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Ws(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),2&(r=ei.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_o(ei,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Os(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ti(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Os(t,!0,n,null,a);break;case"together":Os(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Bs(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:case 17:return Ao(t.type)&&No(),Vs(t),null;case 3:return r=t.stateNode,Xa(),To(Fo),To(Ro),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ia&&(ic(ia),ia=null))),Is(e,t),Vs(t),null;case 5:Za(t);var o=Ka(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)As(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vs(t),null}if(e=Ka(Va.current),fa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ho]=t,r[po]=i,e=!!(1&t.mode),n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(o=0;o<Lr.length;o++)$r(Lr[o],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":G(r,i),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$r("invalid",r);break;case"textarea":oe(r,i),$r("invalid",r)}for(var l in ye(n,i),o=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&$r("scroll",r)}switch(n){case"input":V(r),Z(r,i,!0);break;case"textarea":V(r),ie(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ho]=t,e[po]=r,zs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":$r("cancel",e),$r("close",e),o=r;break;case"iframe":case"object":case"embed":$r("load",e),o=r;break;case"video":case"audio":for(o=0;o<Lr.length;o++)$r(Lr[o],e);o=r;break;case"source":$r("error",e),o=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),o=r;break;case"details":$r("toggle",e),o=r;break;case"input":G(e,r),o=K(e,r),$r("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),$r("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),$r("invalid",e)}for(i in ye(n,o),c=o)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?me(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"==typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&$r("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&null!=t.stateNode)Ns(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(Ya.current),Ka(Va.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Jr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,!!(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return Vs(t),null;case 13:if(To(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&1&t.mode&&!(128&t.flags))ha(),pa(),t.flags|=98560,i=!1;else if(i=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ho]=t}else pa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vs(t),i=!1}else null!==ia&&(ic(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ei.current?0===Nl&&(Nl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Vs(t),null);case 4:return Xa(),Is(e,t),null===e&&Wr(t.stateNode.containerInfo),Vs(t),null;case 10:return Pa(t.type._context),Vs(t),null;case 19:if(To(ei),null===(i=t.memoizedState))return Vs(t),null;if(r=!!(128&t.flags),null===(l=i.rendering))if(r)qs(i,!1);else{if(0!==Nl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,qs(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _o(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>Wl&&(t.flags|=128,r=!0,qs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!aa)return Vs(t),null}else 2*Xe()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,qs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=ei.current,_o(ei,r?1&n|2:1&n),t):(Vs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Il)&&(Vs(t),6&t.subtreeFlags&&(t.flags|=8192)):Vs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(na(t),t.tag){case 1:return Ao(t.type)&&No(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),To(Fo),To(Ro),ri(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(To(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return To(ei),null;case 4:return Xa(),null;case 10:return Pa(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}zs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},As=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ka(Va.current);var a,i=null;switch(n){case"input":o=K(e,o),r=K(e,r),i=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&$r("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ns=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Gs=!1,Xs="function"==typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Cc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Cc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&el(t,n,a)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[ho],delete t[po],delete t[mo],delete t[vo],delete t[yo]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(e){}switch(n.tag){case 5:Gs||Zs(n,t);case 6:var r=ul,o=dl;ul=null,fl(e,t,n),dl=o,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Wt(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,fl(e,t,n),ul=r,dl=o;break;case 0:case 11:case 14:case 15:if(!Gs&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&el(n,t,i),o=o.next}while(o!==r)}fl(e,t,n);break;case 1:if(!Gs&&(Zs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Cc(n,t,e)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Gs=(r=Gs)||null!==n.memoizedState,fl(e,t,n),Gs=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));hl(i,s,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(e){Cc(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){Cc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Cc(e,e.return,t)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(t){Cc(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(o,i),be(l,s);var u=be(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?me(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):b(o,d,f,u)}switch(l){case"input":J(o,i);break;case"textarea":ae(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(o,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[po]=i}catch(t){Cc(e,e.return,t)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(t){Cc(e,e.return,t)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(t){Cc(e,e.return,t)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Ol=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Gs=(u=Gs)||d,gl(t,e),Gs=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Js=e,d=e.child;null!==d;){for(f=Js=d;null!==Js;){switch(p=(h=Js).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zs(h,h.return);var g=h.stateNode;if("function"==typeof g.componentWillUnmount){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){Cc(r,n,e)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){xl(f);continue}}null!==p?(p.return=h,Js=p):xl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,u?"function"==typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,s=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(t){Cc(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){Cc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(a(161))}}catch(t){Cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Js;){var o=Js,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Ks;if(!i){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Gs;s=Ks;var c=Gs;if(Ks=i,(Gs=l)&&!c)for(Js=o;null!==Js;)l=(i=Js).child,22===i.tag&&null!==i.memoizedState?kl(o):null!==l?(l.return=i,Js=l):kl(o);for(;null!==a;)Js=a,bl(a,t,n),a=a.sibling;Js=o,Ks=s,Gs=c}wl(e)}else 8772&o.subtreeFlags&&null!==a?(a.return=o,Js=a):wl(e)}}function wl(e){for(;null!==Js;){var t=Js;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Gs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ha(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ha(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Wt(f)}}}break;default:throw Error(a(163))}Gs||512&t.flags&&ol(t)}catch(e){Cc(t,t.return,e)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function kl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Cc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){Cc(t,o,e)}}var a=t.return;try{ol(t)}catch(e){Cc(t,a,e)}break;case 5:var i=t.return;try{ol(t)}catch(e){Cc(t,i,e)}}}catch(e){Cc(t,t.return,e)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,Cl=Math.ceil,El=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,_l=w.ReactCurrentBatchConfig,Pl=0,Rl=null,Fl=null,zl=0,Il=0,Al=Eo(0),Nl=0,Ll=null,Ml=0,Dl=0,jl=0,$l=null,Ul=null,Ol=0,Wl=1/0,Bl=null,Hl=!1,ql=null,Vl=null,Ql=!1,Yl=null,Kl=0,Gl=0,Xl=null,Jl=-1,Zl=0;function ec(){return 6&Pl?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 1&e.mode?2&Pl&&0!==zl?zl&-zl:null!==ma.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type):1}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(a(185));vt(e,n,r),2&Pl&&e===Rl||(e===Rl&&(!(2&Pl)&&(Dl|=n),4===Nl&&sc(e,zl)),rc(e,r),1===n&&0===Pl&&!(1&t.mode)&&(Wl=Xe()+500,Uo&&Bo()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,l=o[i];-1===l?0!==(s&n)&&0===(s&r)||(o[i]=ht(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Rl?zl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Uo=!0,Wo(e)}(lc.bind(null,e)):Wo(lc.bind(null,e)),io(function(){!(6&Pl)&&Bo()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Jl=-1,Zl=0,6&Pl)throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===Rl?zl:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var o=Pl;Pl|=2;var i=pc();for(Rl===e&&zl===t||(Bl=null,Wl=Xe()+500,fc(e,t));;)try{yc();break}catch(t){hc(e,t)}_a(),El.current=i,Pl=o,null!==Fl?t=0:(Rl=null,zl=0,t=Nl)}if(0!==t){if(2===t&&0!==(o=pt(e))&&(r=o,t=ac(e,o)),1===t)throw n=Ll,fc(e,0),sc(e,r),rc(e,Xe()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=mc(e,r),2===t&&(i=pt(e),0!==i&&(r=i,t=ac(e,i))),1!==t)))throw n=Ll,fc(e,0),sc(e,r),rc(e,Xe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Ul,Bl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ol+500-Xe())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(xc.bind(null,e,Ul,Bl),t);break}xc(e,Ul,Bl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ro(xc.bind(null,e,Ul,Bl),r);break}xc(e,Ul,Bl);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~jl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Pl)throw Error(a(327));kc();var t=ft(e,0);if(!(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ll,fc(e,0),sc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Bl),rc(e,Xe()),null}function cc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Wl=Xe()+500,Uo&&Bo())}}function uc(e){null!==Yl&&0===Yl.tag&&!(6&Pl)&&kc();var t=Pl;Pl|=1;var n=_l.transition,r=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=r,_l.transition=n,!(6&(Pl=t))&&Bo()}}function dc(){Il=Al.current,To(Al)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&No();break;case 3:Xa(),To(Fo),To(Ro),ri();break;case 5:Za(r);break;case 4:Xa();break;case 13:case 19:To(ei);break;case 10:Pa(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Rl=e,Fl=e=Ac(e.current,null),zl=Il=t,Nl=0,Ll=null,jl=Dl=Ml=0,Ul=$l=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Ia=null}return e}function hc(e,t){for(;;){var n=Fl;try{if(_a(),oi.current=Ji,ui){for(var r=si.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ui=!1}if(ii=0,ci=li=si=null,di=!1,fi=0,Tl.current=null,null===n||null===n.return){Nl=1,Ll=t,Fl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=zl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,f=d.tag;if(!(1&d.mode||0!==f&&11!==f&&15!==f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&gs(i,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(!(1&t)){gs(i,u,t),gc();break e}c=Error(a(426))}else if(aa&&1&l.mode){var v=ms(s);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),ga(cs(c,l));break e}}i=c=cs(c,l),4!==Nl&&(Nl=2),null===$l?$l=[i]:$l.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Wa(i,hs(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(128&i.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Vl&&Vl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Wa(i,ps(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(e){t=e,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Ji,null===e?Ji:e}function gc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Rl||!(268435455&Ml)&&!(268435455&Dl)||sc(Rl,zl)}function mc(e,t){var n=Pl;Pl|=2;var r=pc();for(Rl===e&&zl===t||(Bl=null,fc(e,t));;)try{vc();break}catch(t){hc(e,t)}if(_a(),Pl=n,El.current=r,null!==Fl)throw Error(a(261));return Rl=null,zl=0,Nl}function vc(){for(;null!==Fl;)bc(Fl)}function yc(){for(;null!==Fl&&!Ke();)bc(Fl)}function bc(e){var t=Sl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?wc(e):Fl=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return Nl=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Qs(n,t,Il)))return void(Fl=n);if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===Nl&&(Nl=5)}function xc(e,t,n){var r=bt,o=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Yl);if(6&Pl)throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Rl&&(Fl=Rl=null,zl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Ql||(Ql=!0,Rc(tt,function(){return kc(),null})),i=!!(15990&n.flags),15990&n.subtreeFlags||i){i=_l.transition,_l.transition=null;var s=bt;bt=1;var l=Pl;Pl|=4,Tl.current=null,function(e,t){if(eo=Ht,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==o&&3!==f.nodeType||(l=s+o),f!==i||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===o&&(l=s),h===i&&++d===r&&(c=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,1028&t.subtreeFlags&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(e){Cc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(to),Ht=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ge(),Pl=l,bt=s,_l.transition=i}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Kl=o),0===(i=e.pendingLanes)&&(Vl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;!!(1&Kl)&&0!==e.tag&&kc(),1&(i=e.pendingLanes)?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,Bo()}(e,t,n,r)}finally{_l.transition=o,bt=r}return null}function kc(){if(null!==Yl){var e=wt(Kl),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,6&Pl)throw Error(a(331));var o=Pl;for(Pl|=4,Js=e.current;null!==Js;){var i=Js,s=i.child;if(16&Js.flags){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var f=d.child;if(null!==f)f.return=d,Js=f;else for(;null!==Js;){var h=(d=Js).sibling,p=d.return;if(al(d),d===u){Js=null;break}if(null!==h){h.return=p,Js=h;break}Js=p}}}var g=i.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Js=i}}if(2064&i.subtreeFlags&&null!==s)s.return=i,Js=s;else e:for(;null!==Js;){if(2048&(i=Js).flags)switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Js=y;break e}Js=i.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(2064&s.subtreeFlags&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(2048&(l=Js).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Cc(l,l.return,e)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Pl=o,Bo(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(e){}r=!0}return r}finally{bt=n,_l.transition=t}}return!1}function Sc(e,t,n){e=Ua(e,t=hs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=Ua(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(zl&n)===n&&(4===Nl||3===Nl&&(130023424&zl)===zl&&500>Xe()-Ol?fc(e,0):jl|=n),rc(e,t)}function Tc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ec();null!==(e=La(e,t))&&(vt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Rc(e,t){return Qe(e,t)}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zc(e,t,n,r){return new Fc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=zc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,r,o,i){var s=2;if(r=e,"function"==typeof e)Ic(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case S:return Lc(n.children,o,i,t);case C:s=8,o|=8;break;case E:return(e=zc(12,n,t,2|o)).elementType=E,e.lanes=i,e;case R:return(e=zc(13,n,t,o)).elementType=R,e.lanes=i,e;case F:return(e=zc(19,n,t,o)).elementType=F,e.lanes=i,e;case A:return Mc(n,o,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case _:s=9;break e;case P:s=11;break e;case z:s=14;break e;case I:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=zc(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=zc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=zc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=zc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=zc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,o,a,i,s,l){return e=new $c(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=zc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Oc(e){if(!e)return Po;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ao(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ao(n))return Mo(e,n,t)}return t}function Wc(e,t,n,r,o,a,i,s,l){return(e=Uc(n,r,!0,e,0,a,0,s,l)).context=Oc(null),n=e.current,(a=$a(r=ec(),o=tc(n))).callback=null!=t?t:null,Ua(n,a,o),e.current.lanes=o,vt(e,o,r),rc(e,r),e}function Bc(e,t,n,r){var o=t.current,a=ec(),i=tc(o);return n=Oc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$a(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ua(o,t,i))&&(nc(e,o,i,a),Oa(e,o,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fo.current)bs=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),pa();break;case 5:Ja(t);break;case 1:Ao(t.type)&&Do(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;_o(Sa,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_o(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(_o(ei,1&ei.current),null!==(e=Hs(e,t,n))?e.sibling:null);_o(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),_o(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=!!(131072&e.flags)}else bs=!1,aa&&1048576&t.flags&&ea(t,Qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var o=Io(t,Ro.current);Fa(t,n),o=mi(null,t,r,e,o,n);var i=vi();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ao(r)?(i=!0,Do(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Da(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=Ps(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Ic(e)?1:0;if(null!=e){if((e=e.$$typeof)===P)return 11;if(e===z)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=_s(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ts(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,ja(e,t),Ba(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fs(e,t,r,n,o=cs(Error(a(423)),t));break e}if(r!==o){t=Fs(e,t,r,n,o=cs(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===o){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ua(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ds(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,_o(Sa,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!Fo.current){t=Hs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=$a(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ra(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ra(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Fa(t,n),r=r(o=za(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Bs(e,t),t.tag=1,Ao(r)?(e=!0,Do(t)):e=!1,Fa(t,n),is(t,r,o),ls(t,r,o,n),Ps(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Cs(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"==typeof o){var s=o;o=function(){var e=Hc(i);s.call(e)}}Bc(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"==typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[go]=i.current,Wr(8===e.nodeType?e.parentNode:e),uc(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[go]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,o,r);return Hc(i)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Bc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[go]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Dt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),!(6&Pl)&&(Wl=Xe()+500,Bo()))}break;case 13:uc(function(){var t=La(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Vc(e,1)}},kt=function(e){if(13===e.tag){var t=La(e,134217728);null!==t&&nc(t,e,134217728,ec()),Vc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=La(e,t);null!==n&&nc(n,e,t,ec()),Vc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(a(90));Q(r),J(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=cc,Re=uc;var eu={usingClientEntryPoint:!1,Events:[wo,xo,ko,Te,_e,cc]},tu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(a(299));var n=!1,r="",o=Qc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Qc;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,o,0,i,s),e[go]=t.current,Wr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Kc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},723:(e,t,n)=>{n.d(t,{_:()=>r});const r={CHUNK:{DEFAULT_SIZE:20,DEFAULT_OVERLAP:3,MIN_PROCESSING_TIME:15,MAX_CONCURRENCY:2,ENABLE_AUTO_SCROLL:!0,QUALITY_MODE:"accuracy"},REALTIME:{PROCESSING_INTERVAL:5e3,MIN_FILE_SIZE:1e4,BYTES_PER_SECOND:16e3,MIN_PROCESSING_TIME:20,CLEANUP_DELAY:1e3,MAX_RETRY_COUNT:2,RETRY_DELAY:3e3,ERROR_RECOVERY_DELAY:15e3},SPEECH:{DEFAULT_LANGUAGE:"ja",CONFIDENCE_THRESHOLD:.7,MAX_PROCESSING_TIME:18e4},CONSOLIDATION:{OVERLAP_THRESHOLD:1,QUALITY_THRESHOLD:.6,MAX_GAP_FILL:3,ENABLE_AGGRESSIVE_DEDUP:!0},UI:{NOTIFICATION_DURATION:3e3,MAX_DISPLAY_TEXT_LENGTH:50,CHUNK_DISPLAY_MAX_HEIGHT:400},FILE:{TEMP_FILE_PREFIX:"realtime_",SUPPORTED_FORMATS:[".webm",".wav",".mp3",".mp4"],RECORDING_FILE_PREFIX:"recording_"}}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},848:(e,t,n)=>{e.exports=n(20)},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(551)},982:(e,t,n)=>{e.exports=n(463)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r=n(848),o=n(338),a=n(540),i=n(72),s=n.n(i),l=n(825),c=n.n(l),u=n(659),d=n.n(u),f=n(56),h=n.n(f),p=n(159),g=n.n(p),m=n(113),v=n.n(m),y=n(131),b={};b.styleTagTransform=v(),b.setAttributes=h(),b.insert=d().bind(null,"head"),b.domAPI=c(),b.insertStyleElement=g(),s()(y.A,b),y.A&&y.A.locals&&y.A.locals;const w=()=>{const[e,t]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{const e=await window.electronAPI.windowIsMaximized();t(e)}catch(e){console.error("最大化状態取得エラー:",e)}})()},[]);const n=(0,a.useCallback)(async()=>{try{await window.electronAPI.windowMinimize()}catch(e){console.error("最小化エラー:",e)}},[]),o=(0,a.useCallback)(async()=>{try{await window.electronAPI.windowMaximize();const e=await window.electronAPI.windowIsMaximized();t(e)}catch(e){console.error("最大化エラー:",e)}},[]),i=(0,a.useCallback)(async()=>{try{await window.electronAPI.windowClose()}catch(e){console.error("ウィンドウ閉じるエラー:",e)}},[]);return(0,r.jsxs)("div",{className:"titlebar",children:[(0,r.jsx)("div",{className:"titlebar__title",children:"Voise Encoder - 音声録音・再生アプリ"}),(0,r.jsxs)("div",{className:"titlebar__controls",children:[(0,r.jsx)("button",{className:"titlebar__button titlebar__button--minimize",onClick:n,title:"最小化",children:"─"}),(0,r.jsx)("button",{className:"titlebar__button titlebar__button--maximize",onClick:o,title:e?"元のサイズに戻す":"最大化",children:e?"❐":"□"}),(0,r.jsx)("button",{className:"titlebar__button titlebar__button--close",onClick:i,title:"閉じる",children:"✕"})]})]})},x=()=>{const{selectedFile:e,setSelectedFile:t,setTranscriptionDisplayData:n,fileList:o,setFileList:i,recordingFile:s}=q(),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(null),[f,h]=(0,a.useState)(new Set),[p,g]=(0,a.useState)(new Map),m=(0,a.useCallback)(async e=>{try{const t=await window.electronAPI.getFileList(e),n=await Promise.all(t.map(async e=>{try{const t=await window.electronAPI.checkTranscriptionExists(e.filepath),n=t?await window.electronAPI.getTranscriptionPath(e.filepath):void 0,r=s&&(e.id===s.id||e.filename===s.filename||e.filepath===s.filepath),o={...e,hasTranscriptionFile:t,transcriptionPath:n,isRecording:r||!1};return console.log(`📁 ファイル処理結果 (${e.filename}):`,{hasTranscriptionFile:t,transcriptionPath:n,duration:e.duration,format:e.format,isRecording:o.isRecording,recordingFileId:s?.id,recordingFilename:s?.filename,fileId:e.id,filepath:e.filepath}),o}catch(t){return console.error(`文字起こしファイル確認エラー (${e.filename}):`,t),{...e,hasTranscriptionFile:!1,transcriptionPath:void 0,isRecording:!1}}}));i(n),console.log("ファイル一覧取得完了:",n.length,"件"),console.log("文字起こしファイル付き:",n.filter(e=>e.hasTranscriptionFile).length,"件"),console.log("ファイル一覧の詳細:",n.map(e=>({filename:e.filename,hasTranscriptionFile:e.hasTranscriptionFile,duration:e.duration,format:e.format})))}catch(e){console.error("ファイル一覧取得エラー:",e),i([])}},[i,s]),v=(0,a.useCallback)(async()=>{try{return(await window.electronAPI.loadSettings()).saveFolder||"デフォルトフォルダ"}catch(e){return console.error("デフォルトフォルダ取得エラー:",e),""}},[]);(0,a.useEffect)(()=>{(async()=>{if(l)console.log("LeftPanel初期化：既にフォルダが選択されているためスキップ:",l);else{console.log("LeftPanel初期化：デフォルトフォルダをチェック中...");try{const e=await v();e&&(console.log("デフォルトフォルダ:",e),c(e),await m(e))}catch(e){console.error("初期化エラー:",e)}}})()},[v,m,l]),(0,a.useEffect)(()=>(window.electronAPI.onFileSaved(e=>{console.log("📂 ファイル保存通知受信:",e),console.log("📂 現在の録音中ファイル:",s?{id:s.id,filename:s.filename,isRecording:s.isRecording}:"なし"),s&&s.isRecording?console.log("📂 録音中のため、すべてのファイル保存イベントを無視:",e.filename):(e.filename.startsWith("recording_")&&e.filename.endsWith(".webm")&&!s?console.log("📂 録音完了後の最終ファイル保存を検出、ファイル一覧を更新:",e.filename):console.log("📂 通常のファイル保存、ファイル一覧を更新:",e.filename),l===e.folder?setTimeout(()=>{m(e.folder)},500):l||(c(e.folder),setTimeout(()=>{m(e.folder)},500)))}),()=>{window.electronAPI.removeAllListeners("file:saved")}),[l,m,s]),(0,a.useEffect)(()=>{const e=e=>{const{audioFilePath:t}=e.detail;console.log("LeftPanel: 文字起こしリフレッシュイベント受信:",t);const n=o.find(e=>e.filepath===t);n&&(g(e=>{const t=new Map(e);return t.delete(n.id),console.log(`文字起こしキャッシュをクリア: ${n.filename}`),t}),h(e=>{const t=new Set(e);return t.delete(n.id),t}))};return window.addEventListener("transcriptionRefresh",e),()=>{window.removeEventListener("transcriptionRefresh",e)}},[o]);const y=(0,a.useCallback)(async()=>{try{const e=await window.electronAPI.selectFolder();e&&(c(e),m(e))}catch(e){console.error("フォルダ選択エラー:",e)}},[m]),b=(0,a.useCallback)(async e=>{d(e);const r=o.find(t=>t.id===e);if(r)if(t(r),console.log("ファイル選択:",r.filename),"rt.txt"===r.format)try{console.log("リアルタイム文字起こしファイル読み込み:",r.filepath);const e=await window.electronAPI.readFile(r.filepath),t=(e=>{const t=[],n=e.split("\n");let r="";for(const e of n){const n=e.match(/\[(\d+)s-(\d+)s\]\s*(.+)/);if(n){const e=parseInt(n[1]),r=parseInt(n[2]),o=n[3];o.trim()&&t.push({start:e,end:r,text:o.trim(),speaker:void 0})}else{if(e.includes("## 本文"))continue;!e.trim()||e.startsWith("#")||e.includes("status:")||e.includes("processed_chunks:")||(r+=e+" ")}}return 0===t.length&&r.trim()&&t.push({start:0,end:0,text:r.trim(),speaker:void 0}),t})((new TextDecoder).decode(e)),o={metadata:{audioFile:r.filename,model:"リアルタイム文字起こし",transcribedAt:r.createdAt.toISOString(),duration:0,segmentCount:t.length,language:"ja",speakers:[],coverage:100},segments:t,filePath:r.filepath,isModified:!1};n(o),console.log("リアルタイム文字起こし表示完了")}catch(e){console.error("リアルタイム文字起こしファイル読み込みエラー:",e)}else if(r.hasTranscriptionFile&&r.transcriptionPath)try{console.log("文字起こしファイルをロード:",r.transcriptionPath);const e=await window.electronAPI.loadTranscriptionFile(r.transcriptionPath);n(e),console.log("文字起こしファイルロード完了")}catch(e){console.error("文字起こしファイルロードエラー:",e),n(null)}else n(null),console.log("文字起こしファイルなし、transcriptionDisplayDataをクリア")},[o,t,n]),w=(0,a.useCallback)(async n=>{try{await window.electronAPI.deleteFile(n)&&l&&(m(l),e?.filepath===n&&(t(null),d(null)))}catch(e){console.error("ファイル削除エラー:",e)}},[l,e,m]),x=(0,a.useCallback)(async(e,t)=>{const n=new Set(f);if(f.has(e))n.delete(e),h(n);else try{console.log(`文字起こしファイル読み込み中: ${t}`);const r=await window.electronAPI.loadTranscriptionFile(t);g(t=>new Map(t).set(e,r)),console.log(`文字起こしファイル読み込み完了: ${e}`),n.add(e),h(n)}catch(e){console.error("文字起こしファイル読み込みエラー:",e),alert("文字起こしファイルの読み込みに失敗しました")}},[f]),k=(0,a.useCallback)(async e=>{try{const r=o.find(t=>t.id===e);if(!r||!r.transcriptionPath)return void console.error("文字起こしファイルパスが見つかりません");console.log(`文字起こしファイル読み込み中: ${r.transcriptionPath}`);const a=await window.electronAPI.loadTranscriptionFile(r.transcriptionPath);g(t=>new Map(t).set(e,a)),console.log(`文字起こしファイル読み込み完了: ${e}`),console.log("文字起こし結果表示:",a),t(r),d(e),n(a)}catch(e){console.error("文字起こしファイル読み込みエラー:",e),alert("文字起こしファイルの読み込みに失敗しました")}},[o,p,n,t]);return(0,r.jsxs)("div",{className:"left-panel",children:[(0,r.jsx)("div",{className:"left-panel__header",children:(0,r.jsx)("div",{className:"left-panel__title",children:"ファイルエクスプローラー"})}),(0,r.jsxs)("div",{className:"left-panel__content",children:[(0,r.jsx)("div",{className:"p-sm",children:(0,r.jsx)("button",{className:"btn btn--primary w-full",onClick:y,children:"📁 保存フォルダを選択"})}),l&&(0,r.jsxs)("div",{className:"p-sm",children:[(0,r.jsx)("div",{className:"text-secondary",style:{fontSize:"11px"},children:"選択フォルダ:"}),(0,r.jsx)("div",{className:"text-primary",style:{fontSize:"12px",wordBreak:"break-all"},children:l})]}),(0,r.jsx)("div",{className:"file-tree",children:0===o.length?(0,r.jsx)("div",{className:"p-sm text-secondary",style:{fontSize:"12px"},children:l?"音声ファイルがありません":"フォルダを選択してください"}):o.map(e=>{return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"file-tree__item "+(u===e.id?"file-tree__item--active":""),onClick:()=>b(e.id),onContextMenu:t=>{t.preventDefault(),s&&e.id===s.id?alert("録音中のファイルは削除できません。"):window.confirm(`"${e.filename}" を削除しますか？`)&&w(e.filepath)},style:{opacity:s&&e.id===s.id?.7:1,border:s&&e.id===s.id?"1px dashed var(--color-warning)":"none"},children:[(0,r.jsx)("span",{className:"file-tree__icon",children:s&&e.id===s.id?"🔴":"rt.txt"===e.format?"📝":"webm"===e.format?"🎬":"wav"===e.format?"🎵":"🎶"}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,r.jsxs)("div",{style:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[(0,r.jsxs)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,minWidth:0},children:[e.filename,s&&e.id===s.id&&(0,r.jsx)("span",{style:{color:"var(--color-warning)",marginLeft:"4px"},children:"録音中"})]}),(0,r.jsx)("span",{style:{fontSize:"9px",padding:"1px 4px",backgroundColor:"rt.txt"===e.format?"#9C27B0":"webm"===e.format?"#4CAF50":"wav"===e.format?"#2196F3":"#FF9800",color:"white",borderRadius:"2px",textTransform:"uppercase",flexShrink:0},children:"rt.txt"===e.format?"RT":e.format})]}),(0,r.jsxs)("div",{style:{fontSize:"10px",color:"var(--color-text-secondary)",display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"2px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleString("ja-JP",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),!0===e.hasTranscriptionFile&&(0,r.jsx)("span",{style:{fontSize:"8px",padding:"1px 3px",backgroundColor:"#FF5722",color:"white",borderRadius:"2px"},children:"📝済"})]}),(0,r.jsx)("span",{style:{fontWeight:"bold",color:"var(--color-text)"},children:"rt.txt"===e.format?"リアルタイム":e.duration?(t=e.duration,0===t?"--:--":`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`):"--:--"})]})]}),!0===e.hasTranscriptionFile&&"rt.txt"!==e.format&&(0,r.jsx)("span",{style:{cursor:"pointer",padding:"4px 8px",fontSize:"12px",color:"var(--color-accent)",flexShrink:0,marginLeft:"4px"},onClick:t=>{t.stopPropagation(),x(e.id,e.transcriptionPath)},children:f.has(e.id)?"▼":"▶"})]}),!0===e.hasTranscriptionFile&&f.has(e.id)&&(0,r.jsx)("div",{style:{marginLeft:"20px",borderLeft:"2px solid var(--color-border)",paddingLeft:"8px"},children:(0,r.jsxs)("div",{className:"file-tree__item",style:{fontSize:"11px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"3px",margin:"2px 0"},onClick:()=>k(e.id),children:[(0,r.jsx)("span",{className:"file-tree__icon",children:"📝"}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{color:"var(--color-text-primary)"},children:e.filename.replace(/\.(webm|wav|mp3)$/,".trans.txt")}),p.has(e.id)&&(0,r.jsxs)("div",{style:{fontSize:"9px",color:"var(--color-text-secondary)"},children:["モデル: ",p.get(e.id).metadata.model," | カバレッジ: ",p.get(e.id).metadata.coverage.toFixed(1),"%"]})]})]})})]},e.id);var t})})]})]})};class k{constructor(){this.watchFolder=null,this.isWatching=!1,this.detectedFiles=new Map,this.processedFiles=new Set,this.watchInterval=null,this.onNewFileCallbacks=[]}startWatching(e){this.isWatching?console.warn("既にファイル監視中です"):(this.watchFolder=e,this.isWatching=!0,this.detectedFiles.clear(),this.processedFiles.clear(),console.log(`チャンクファイル監視開始: ${e}`),this.watchInterval=setInterval(async()=>{try{await this.checkForNewFiles()}catch(e){console.error("ファイル監視エラー:",e)}},1e3))}stopWatching(){this.isWatching&&(console.log("チャンクファイル監視停止"),this.isWatching=!1,this.watchInterval&&(clearInterval(this.watchInterval),this.watchInterval=null),this.watchFolder=null)}async checkForNewFiles(){if(this.watchFolder)try{const e=await window.electronAPI.getFileList(this.watchFolder);for(const t of e)if(this.isChunkFile(t.filename)&&!this.detectedFiles.has(t.filename)){const e=this.parseChunkFilename(t.filename,t.filepath);e&&await this.checkFileStability(t.filepath)&&(e.isReady=!0,this.detectedFiles.set(t.filename,e),console.log(`新しいチャンクファイル検出: ${t.filename} (${e.size} bytes)`),this.onNewFileCallbacks.forEach(t=>t(e)))}}catch(e){console.error("ファイルリスト取得エラー:",e)}}isChunkFile(e){return/^chunk_\d{5}_\d+\.webm$/.test(e)}parseChunkFilename(e,t){const n=e.match(/^chunk_(\d{5})_(\d+)\.webm$/);return n?{filename:e,fullPath:t,sequenceNumber:parseInt(n[1],10),timestamp:parseInt(n[2],10),size:0,isReady:!1}:null}async checkFileStability(e){try{const t=await this.getFileSize(e);return await new Promise(e=>setTimeout(e,500)),t===await this.getFileSize(e)&&t>1e3}catch(e){return!1}}async getFileSize(e){try{return await window.electronAPI.getFileSize(e)}catch(e){return 0}}onNewFile(e){this.onNewFileCallbacks.push(e)}markAsProcessed(e){this.processedFiles.add(e),console.log(`ファイル処理完了: ${e}`)}getPendingFiles(){return Array.from(this.detectedFiles.values()).filter(e=>!this.processedFiles.has(e.filename)).sort((e,t)=>e.sequenceNumber-t.sequenceNumber)}getStats(){return{totalDetected:this.detectedFiles.size,totalProcessed:this.processedFiles.size,pendingCount:this.getPendingFiles().length,isWatching:this.isWatching}}cleanup(){this.stopWatching(),this.detectedFiles.clear(),this.processedFiles.clear(),this.onNewFileCallbacks=[]}}class S{constructor(e){this.processingQueue=[],this.processedFiles=new Set,this.errorLog=[],this.isRunning=!1,this.currentProcessing=null,this.queueInterval=null,this.processingTimes=[],this.config={maxRetryCount:1,processingTimeout:18e4,queueCheckInterval:1e3,enableAutoRetry:!0},this.onTranscriptionCompleteCallbacks=[],this.onErrorCallbacks=[],this.onStatsUpdateCallbacks=[],e&&(this.config={...this.config,...e}),console.log("FileBasedTranscriptionEngine初期化完了",this.config)}start(){this.isRunning?console.warn("TranscriptionEngine既に実行中です"):(this.isRunning=!0,console.log("FileBasedTranscriptionEngine開始"),this.queueInterval=setInterval(()=>{this.processQueue()},this.config.queueCheckInterval),this.updateStats())}stop(){this.isRunning&&(console.log("FileBasedTranscriptionEngine停止"),this.isRunning=!1,this.queueInterval&&(clearInterval(this.queueInterval),this.queueInterval=null),this.updateStats())}addChunkFile(e){if(this.processedFiles.has(e.filename)||this.processingQueue.some(t=>t.fileInfo.filename===e.filename))return;const t={fileInfo:e,retryCount:0,addedAt:Date.now()},n=this.processingQueue.findIndex(t=>t.fileInfo.sequenceNumber>e.sequenceNumber);-1===n?this.processingQueue.push(t):this.processingQueue.splice(n,0,t),console.log(`キューに追加: ${e.filename} (シーケンス: ${e.sequenceNumber})`),this.updateStats()}async processQueue(){if(!this.isRunning||this.currentProcessing||0===this.processingQueue.length)return;const e=this.processingQueue.shift();if(e){this.currentProcessing=e,e.processingStartedAt=Date.now(),console.log(`文字起こし開始: ${e.fileInfo.filename}`),this.updateStats();try{const t=Date.now(),n=await this.executeTranscriptionWithTimeout(e),r=Date.now()-t;this.processingTimes.push(r),this.processingTimes.length>100&&(this.processingTimes=this.processingTimes.slice(-100)),this.processedFiles.add(e.fileInfo.filename),console.log(`文字起こし完了: ${e.fileInfo.filename} (${r}ms)`),this.onTranscriptionCompleteCallbacks.forEach(t=>{try{t(n,e.fileInfo)}catch(e){console.error("TranscriptionCompleteコールバックエラー:",e)}})}catch(t){await this.handleTranscriptionError(e,t)}finally{this.currentProcessing=null,this.updateStats()}}}async executeTranscriptionWithTimeout(e){return new Promise((t,n)=>{const r=setTimeout(()=>{n(new Error(`処理タイムアウト: ${this.config.processingTimeout}ms`))},this.config.processingTimeout);this.executeTranscription(e.fileInfo.fullPath).then(e=>{clearTimeout(r),t(e)}).catch(e=>{clearTimeout(r),n(e)})})}async executeTranscription(e){try{return await window.electronAPI.speechTranscribe(e)}catch(e){throw console.error("文字起こしAPI呼び出しエラー:",e),e}}async handleTranscriptionError(e,t){const n=e.processingStartedAt?Date.now()-e.processingStartedAt:void 0,r=this.classifyError(t),o=this.determineSeverity(r,e.retryCount),a={filename:e.fileInfo.filename,errorType:r,message:t instanceof Error?t.message:String(t),timestamp:Date.now(),retryCount:e.retryCount,severity:o,suggestedAction:this.getSuggestedAction(r),processingTime:n};if(this.errorLog.push(a),console.error(`文字起こしエラー [${o}]: ${e.fileInfo.filename}`,{type:r,message:a.message,retryCount:e.retryCount,action:a.suggestedAction}),"critical"!==o&&"high"!==o||console.warn(`⚠️ 重要エラー: ${a.suggestedAction}`),this.config.enableAutoRetry&&e.retryCount<this.config.maxRetryCount&&this.shouldRetry(r)){e.retryCount++,console.log(`リトライ予定: ${e.fileInfo.filename} (${e.retryCount}/${this.config.maxRetryCount})`);const t=this.getRetryDelay(r),n=Math.min(t*Math.pow(2,e.retryCount),3e4);setTimeout(()=>{this.isRunning&&(this.processingQueue.unshift(e),console.log(`リトライ開始: ${e.fileInfo.filename}`))},n)}else console.log(`ファイルスキップ: ${e.fileInfo.filename} (最大リトライ回数に達しました / リトライ不可能なエラー)`),this.processedFiles.add(e.fileInfo.filename);this.onErrorCallbacks.forEach(e=>{try{e(a)}catch(e){console.error("Error callback実行エラー:",e)}})}classifyError(e){const t=(e instanceof Error?e.message:String(e)).toLowerCase();return t.includes("timeout")||t.includes("タイムアウト")?"timeout":t.includes("network")||t.includes("connection")||t.includes("接続")||t.includes("ネットワーク")||t.includes("econnrefused")||t.includes("enotfound")?"network_error":t.includes("server")||t.includes("サーバー")||t.includes("500")||t.includes("502")||t.includes("503")||t.includes("504")?"server_error":t.includes("audio")||t.includes("sound")||t.includes("音声")||t.includes("音質")||t.includes("no audio data")||t.includes("invalid audio")?"audio_quality_error":t.includes("file")||t.includes("ファイル")||t.includes("読み込み")||t.includes("enoent")||t.includes("corrupted")||t.includes("破損")?"file_error":"unknown"}determineSeverity(e,t){switch(e){case"network_error":case"timeout":return 0===t?"low":"medium";case"server_error":return 0===t?"medium":"high";case"audio_quality_error":return"high";case"file_error":return"critical";default:return"medium"}}getSuggestedAction(e){switch(e){case"network_error":return"ネットワーク接続を確認してください";case"server_error":return"しばらく待ってから再試行してください";case"timeout":return"ファイルサイズが大きい場合は分割を検討してください";case"audio_quality_error":return"音声ファイルの品質・形式を確認してください";case"file_error":return"ファイルの存在と権限を確認してください";default:return"システム管理者に連絡してください"}}shouldRetry(e){switch(e){case"network_error":case"server_error":case"timeout":case"unknown":default:return!0;case"audio_quality_error":case"file_error":return!1}}getRetryDelay(e){switch(e){case"network_error":return 2e3;case"server_error":return 5e3;case"timeout":return 3e3;default:return 1e3}}updateStats(){const e={server_error:0,file_error:0,timeout:0,network_error:0,audio_quality_error:0,unknown:0},t={low:0,medium:0,high:0,critical:0};let n=0;for(const r of this.errorLog)e[r.errorType]++,t[r.severity]++,n+=r.retryCount;const r=this.processedFiles.size+this.errorLog.length,o=r>0?this.processedFiles.size/r*100:100,a=this.errorLog.length>0?n/this.errorLog.length:0,i={totalProcessed:this.processedFiles.size,totalErrors:this.errorLog.length,totalSkipped:this.errorLog.filter(e=>e.retryCount>=this.config.maxRetryCount).length,averageProcessingTime:this.processingTimes.length>0?this.processingTimes.reduce((e,t)=>e+t,0)/this.processingTimes.length:0,isProcessing:null!==this.currentProcessing,currentFile:this.currentProcessing?.fileInfo.filename,queueLength:this.processingQueue.length,errorRate:r>0?this.errorLog.length/r*100:0,errorsByType:e,errorsBySeverity:t,successRate:o,averageRetryCount:a};this.onStatsUpdateCallbacks.forEach(e=>{try{e(i)}catch(e){console.error("Stats callback実行エラー:",e)}})}onTranscriptionComplete(e){this.onTranscriptionCompleteCallbacks.push(e)}onError(e){this.onErrorCallbacks.push(e)}onStatsUpdate(e){this.onStatsUpdateCallbacks.push(e)}getStats(){const e={server_error:0,file_error:0,timeout:0,network_error:0,audio_quality_error:0,unknown:0},t={low:0,medium:0,high:0,critical:0};let n=0;for(const r of this.errorLog)e[r.errorType]++,t[r.severity]++,n+=r.retryCount;const r=this.processedFiles.size+this.errorLog.length,o=r>0?this.processedFiles.size/r*100:100,a=this.errorLog.length>0?n/this.errorLog.length:0;return{totalProcessed:this.processedFiles.size,totalErrors:this.errorLog.length,totalSkipped:this.errorLog.filter(e=>e.retryCount>=this.config.maxRetryCount).length,averageProcessingTime:this.processingTimes.length>0?this.processingTimes.reduce((e,t)=>e+t,0)/this.processingTimes.length:0,isProcessing:null!==this.currentProcessing,currentFile:this.currentProcessing?.fileInfo.filename,queueLength:this.processingQueue.length,errorRate:r>0?this.errorLog.length/r*100:0,errorsByType:e,errorsBySeverity:t,successRate:o,averageRetryCount:a}}getErrorLog(){return[...this.errorLog]}updateConfig(e){this.config={...this.config,...e},console.log("TranscriptionEngine設定更新:",this.config)}cleanup(){this.stop(),this.processingQueue=[],this.processedFiles.clear(),this.errorLog=[],this.onTranscriptionCompleteCallbacks=[],this.onErrorCallbacks=[],this.onStatsUpdateCallbacks=[],this.processingTimes=[],console.log("FileBasedTranscriptionEngine クリーンアップ完了")}}class C{constructor(){this.MIN_FREE_SPACE_MB=100,this.RETRY_DELAY_MS=1e3,this.MAX_RETRY_COUNT=3,this.errorLog=[],this.onErrorCallbacks=[],console.log("FileSystemErrorHandler初期化完了")}handleFileSystemError(e,t){const n={type:this.classifyError(e),originalError:e,filePath:t,timestamp:Date.now(),recoverable:!1,suggestedAction:void 0};switch(n.type){case"disk_full":n.recoverable=!1,n.suggestedAction="ディスク容量を確保してください";break;case"permission_denied":n.recoverable=!1,n.suggestedAction="ファイル/フォルダの権限を確認してください";break;case"io_error":n.recoverable=!0,n.suggestedAction="一時的なエラーです。しばらく待ってからやり直してください";break;default:n.recoverable=!1,n.suggestedAction="システム管理者に連絡してください"}return this.errorLog.push(n),console.error(`ファイルシステムエラー [${n.type}]:`,{message:e.message,filePath:t,recoverable:n.recoverable,action:n.suggestedAction}),this.notifyError(n),n}classifyError(e){const t=e.message.toLowerCase();return t.includes("no space")||t.includes("disk full")||t.includes("enospc")?"disk_full":t.includes("permission denied")||t.includes("access denied")||t.includes("eacces")||t.includes("eperm")?"permission_denied":t.includes("eio")||t.includes("file is busy")||t.includes("resource temporarily unavailable")||t.includes("eagain")?"io_error":"unknown"}async checkDiskSpace(e){try{const t=await window.electronAPI.getDiskSpace(e);return{free:t.free,total:t.total,used:t.total-t.free,percentage:(t.total-t.free)/t.total*100}}catch(e){throw console.error("ディスク容量取得エラー:",e),e}}async checkDiskSpaceAvailable(e){try{const t=(await this.checkDiskSpace(e)).free/1048576;return console.log(`ディスク容量チェック: ${t.toFixed(1)}MB 空き容量`),t>=this.MIN_FREE_SPACE_MB}catch(e){return console.error("容量チェック失敗:",e),!1}}async executeWithRetry(e,t,n=0){try{return await e()}catch(r){const o=this.handleFileSystemError(r,t);if(o.recoverable&&n<this.MAX_RETRY_COUNT)return console.log(`操作リトライ中 (${n+1}/${this.MAX_RETRY_COUNT}): ${t||"不明"}`),await new Promise(e=>setTimeout(e,this.RETRY_DELAY_MS*(n+1))),this.executeWithRetry(e,t,n+1);throw o}}async safeFileWrite(e,t){if(!await this.checkDiskSpaceAvailable(e))throw this.handleFileSystemError(new Error("ディスク容量不足: 最低100MB必要です"),e);await this.executeWithRetry(async()=>{await window.electronAPI.saveFile(t,e)},e)}async safeFileRead(e){return this.executeWithRetry(async()=>await window.electronAPI.readFile(e),e)}notifyError(e){this.onErrorCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("FileSystem error callback実行エラー:",e)}})}onError(e){this.onErrorCallbacks.push(e)}getErrorStats(){const e={disk_full:0,permission_denied:0,io_error:0,unknown:0};for(const t of this.errorLog)e[t.type]++;const t=this.errorLog.slice(-10);return{total:this.errorLog.length,byType:e,recentErrors:t}}clearErrorLog(){this.errorLog=[],console.log("ファイルシステムエラーログをクリアしました")}cleanup(){this.onErrorCallbacks=[],this.errorLog=[],console.log("FileSystemErrorHandler クリーンアップ完了")}}class E{constructor(e){this.textBuffer=[],this.isModified=!1,this.writeInterval=null,this.currentTextFilePath=null,this.config={writeInterval:3e3,bufferSize:1e3,enableAutoSave:!0,fileFormat:"detailed"},this.onTextUpdateCallbacks=[],this.onFileWriteCallbacks=[],this.onErrorCallbacks=[],e&&(this.config={...this.config,...e}),this.metadata={status:"transcribing",processedChunks:0,totalChunks:0,startTime:Date.now(),lastUpdateTime:Date.now(),estimatedDuration:0,averageProcessingTime:0,errorCount:0},this.fileSystemErrorHandler=new C,this.fileSystemErrorHandler.onError(e=>{console.error("ファイルシステムエラー検出:",e),this.reportError(new Error(`${e.type}: ${e.originalError.message}`))}),console.log("RealtimeTextManager初期化完了",this.config)}start(e){this.currentTextFilePath=e,this.metadata.status="transcribing",this.metadata.startTime=Date.now(),console.log(`RealtimeTextManager開始: ${e}`),this.config.enableAutoSave&&this.startAutoSave(),this.notifyTextUpdate()}stop(){this.metadata.status="completed",this.stopAutoSave(),this.currentTextFilePath&&this.isModified&&this.writeToFile(),console.log("RealtimeTextManager停止"),this.notifyTextUpdate()}addTranscriptionResult(e,t){console.log(`文字起こし結果追加: ${t.filename} (${e.segments.length}セグメント)`),this.textBuffer=this.textBuffer.filter(e=>e.chunkSequence!==t.sequenceNumber);const n=e.segments.map((e,n)=>({chunkSequence:t.sequenceNumber,chunkFilename:t.filename,segmentIndex:n,start:e.start,end:e.end,text:e.text,confidence:e.words?.[0]?.word?.9:.8,isProcessed:!0,addedAt:Date.now()}));if(this.textBuffer.push(...n),this.textBuffer.sort((e,t)=>e.chunkSequence!==t.chunkSequence?e.chunkSequence-t.chunkSequence:e.segmentIndex-t.segmentIndex),this.textBuffer.length>this.config.bufferSize){const e=this.textBuffer.length-this.config.bufferSize;this.textBuffer.splice(0,e),console.log(`バッファサイズ制限により${e}セグメントを削除`)}this.metadata.processedChunks=Math.max(this.metadata.processedChunks,t.sequenceNumber),this.metadata.lastUpdateTime=Date.now(),this.isModified=!0,this.updateEstimatedDuration(),this.notifyTextUpdate(),console.log(`バッファ更新完了: ${this.textBuffer.length}セグメント (チャンク${t.sequenceNumber}の重複を除去)`)}reportError(e){this.metadata.errorCount++,this.metadata.lastUpdateTime=Date.now(),console.error("RealtimeTextManager エラー:",e),this.onErrorCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("Error callback実行エラー:",e)}}),this.notifyTextUpdate()}updateEstimatedDuration(){if(this.metadata.processedChunks>0){const e=(Date.now()-this.metadata.startTime)/this.metadata.processedChunks;if(this.metadata.averageProcessingTime=e,this.metadata.totalChunks>0){const t=this.metadata.totalChunks-this.metadata.processedChunks;this.metadata.estimatedDuration=t*e}}}generateFullText(){if(0===this.textBuffer.length)return"";const e=[...this.textBuffer].sort((e,t)=>e.chunkSequence!==t.chunkSequence?e.chunkSequence-t.chunkSequence:e.segmentIndex-t.segmentIndex),t=new Map;for(const n of e){const e=`${Math.floor(n.start)}-${Math.floor(n.end)}`,r=t.get(e);(!r||n.chunkSequence>r.chunkSequence)&&t.set(e,n)}const n=Array.from(t.values()).sort((e,t)=>e.start-t.start);let r="";for(const e of n)r+=e.text,e.text.endsWith(".")||e.text.endsWith("。")||(r+=" ");return r.trim()}startAutoSave(){this.writeInterval||(this.writeInterval=setInterval(()=>{this.isModified&&this.currentTextFilePath&&this.writeToFile()},this.config.writeInterval),console.log(`自動保存開始: ${this.config.writeInterval}ms間隔`))}stopAutoSave(){this.writeInterval&&(clearInterval(this.writeInterval),this.writeInterval=null,console.log("自動保存停止"))}async writeToFile(){if(this.currentTextFilePath)try{const e=this.generateFileContent(),t=(new TextEncoder).encode(e),n=(this.currentTextFilePath.split("\\").pop()||this.currentTextFilePath.split("/").pop()||this.currentTextFilePath).replace(/\.webm$/,".rt.txt");console.log(`リアルタイムテキストファイル書き込み: ${n}`),await window.electronAPI.saveFile(t.buffer,n),this.isModified=!1,console.log(`✓ リアルタイムテキストファイル書き込み完了: ${n}`),this.onFileWriteCallbacks.forEach(e=>{try{e(n)}catch(e){console.error("File write callback実行エラー:",e)}})}catch(e){this.metadata.errorCount<5?e instanceof Error?(console.error("ファイル書き込みエラー:",e.message),this.reportError(e)):(console.error("ファイル書き込みエラー:",e),this.reportError(new Error(String(e)))):(console.error("エラーが多すぎるため自動保存を停止します"),this.stopAutoSave())}}generateFileContent(){const e=this.generateFullText();if("simple"===this.config.fileFormat)return e;const t=["# リアルタイム文字起こし結果","","## メタデータ",`status: ${this.metadata.status}`,`processed_chunks: ${this.metadata.processedChunks}`,`total_chunks: ${this.metadata.totalChunks}`,`start_time: ${new Date(this.metadata.startTime).toISOString()}`,`last_update: ${new Date(this.metadata.lastUpdateTime).toISOString()}`,`error_count: ${this.metadata.errorCount}`,"","## 本文",e,"","## 処理状況"];if("transcribing"===this.metadata.status){if(t.push("※ リアルタイム文字起こし中..."),this.metadata.estimatedDuration>0){const e=Math.ceil(this.metadata.estimatedDuration/6e4);t.push(`※ 推定残り時間: 約${e}分`)}}else"completed"===this.metadata.status&&t.push("✓ 文字起こし完了");if(this.textBuffer.length>0){t.push("","## チャンク詳細");const e=new Map;for(const t of this.textBuffer)e.has(t.chunkSequence)||e.set(t.chunkSequence,[]),e.get(t.chunkSequence).push(t);for(const[n,r]of e){t.push(`### チャンク${n}: ${r[0].chunkFilename}`),t.push(`セグメント数: ${r.length}`);for(const e of r){const n=Math.floor(e.start),r=Math.floor(e.end);t.push(`[${n}s-${r}s] ${e.text}`)}t.push("")}}return t.join("\n")}notifyTextUpdate(){const e={metadata:{...this.metadata},segments:[...this.textBuffer],fullText:this.generateFullText(),isModified:this.isModified};this.onTextUpdateCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("Text update callback実行エラー:",e)}})}onTextUpdate(e){this.onTextUpdateCallbacks.push(e)}onFileWrite(e){this.onFileWriteCallbacks.push(e)}onError(e){this.onErrorCallbacks.push(e)}getCurrentData(){return{metadata:{...this.metadata},segments:[...this.textBuffer],fullText:this.generateFullText(),isModified:this.isModified}}updateConfig(e){const t={...this.config};this.config={...this.config,...e},t.writeInterval!==this.config.writeInterval&&this.writeInterval&&(this.stopAutoSave(),this.startAutoSave()),console.log("RealtimeTextManager設定更新:",this.config)}setTotalChunks(e){this.metadata.totalChunks=e,this.metadata.lastUpdateTime=Date.now(),this.updateEstimatedDuration(),this.notifyTextUpdate()}setStatus(e){this.metadata.status=e,this.metadata.lastUpdateTime=Date.now(),this.notifyTextUpdate()}async saveToFile(){this.currentTextFilePath&&await this.writeToFile()}async checkDiskSpace(e){try{const t=await this.fileSystemErrorHandler.checkDiskSpace(e);return{available:t.free>104857600,freeSpace:t.free}}catch(e){return console.error("ディスク容量チェックエラー:",e),{available:!1,freeSpace:0}}}getFileSystemErrorStats(){return this.fileSystemErrorHandler.getErrorStats()}cleanup(){this.stopAutoSave(),this.fileSystemErrorHandler.cleanup(),this.textBuffer=[],this.isModified=!1,this.currentTextFilePath=null,this.onTextUpdateCallbacks=[],this.onFileWriteCallbacks=[],this.onErrorCallbacks=[],console.log("RealtimeTextManager クリーンアップ完了")}}class T{constructor(e){this.isRunning=!1,this.startTime=0,this.currentWatchFolder=null,this.currentOutputFile=null,this.config={fileCheckInterval:1e3,maxRetryCount:1,processingTimeout:18e4,enableAutoRetry:!0,textWriteInterval:3e3,enableAutoSave:!0,textFormat:"detailed"},this.onStatsUpdateCallbacks=[],this.onErrorCallbacks=[],this.onTranscriptionCompleteCallbacks=[],e&&(this.config={...this.config,...e}),this.chunkWatcher=new k,this.transcriptionEngine=new S({maxRetryCount:this.config.maxRetryCount,processingTimeout:this.config.processingTimeout,queueCheckInterval:1e3,enableAutoRetry:this.config.enableAutoRetry}),this.textManager=new E({writeInterval:this.config.textWriteInterval,enableAutoSave:this.config.enableAutoSave,fileFormat:this.config.textFormat,bufferSize:1e3}),this.setupEventHandlers(),console.log("FileBasedRealtimeProcessor初期化完了",this.config)}setupEventHandlers(){this.chunkWatcher.onNewFile(e=>{console.log(`新しいチャンクファイル検出: ${e.filename}`),this.transcriptionEngine.addChunkFile(e),this.updateStats()}),this.transcriptionEngine.onTranscriptionComplete((e,t)=>{console.log(`文字起こし完了: ${t.filename} → ${e.segments.length}セグメント`),this.textManager.addTranscriptionResult(e,t),this.onTranscriptionCompleteCallbacks.forEach(n=>{try{n(e,t)}catch(e){console.error("TranscriptionComplete callback エラー:",e)}}),this.updateStats()}),this.transcriptionEngine.onError(e=>{console.error("文字起こしエラー:",e);const t=new Error(`文字起こしエラー [${e.filename}]: ${e.message}`);this.handleError(t)}),this.textManager.onError(e=>{console.error("テキスト管理エラー:",e),this.handleError(e)}),this.textManager.onTextUpdate(e=>{this.updateStats(),this.notifyUI("textUpdate",{textData:e,stats:this.getStats()})}),setInterval(()=>{this.isRunning&&(this.updateStats(),this.updateProgress())},5e3)}async start(e,t){if(this.isRunning)throw new Error("FileBasedRealtimeProcessor は既に実行中です");try{console.log(`FileBasedRealtimeProcessor開始: ${e} → ${t}`),this.isRunning=!0,this.startTime=Date.now(),this.currentWatchFolder=e,this.currentOutputFile=t,console.log("1. テキスト管理開始..."),this.textManager.start(t),console.log("2. 文字起こしエンジン開始..."),this.transcriptionEngine.start(),console.log("3. ファイル監視開始..."),this.chunkWatcher.startWatching(e),console.log("✓ FileBasedRealtimeProcessor 開始完了"),this.updateStats()}catch(e){throw this.isRunning=!1,this.currentWatchFolder=null,this.currentOutputFile=null,console.error("FileBasedRealtimeProcessor開始エラー:",e),e}}async stop(){if(this.isRunning)try{console.log("FileBasedRealtimeProcessor停止中..."),console.log("1. ファイル監視停止..."),this.chunkWatcher.stopWatching(),console.log("2. 文字起こしエンジン停止..."),this.transcriptionEngine.stop(),console.log("3. テキスト管理停止..."),this.textManager.stop(),this.isRunning=!1,this.currentWatchFolder=null,this.currentOutputFile=null,console.log("✓ FileBasedRealtimeProcessor 停止完了"),this.updateStats()}catch(e){console.error("FileBasedRealtimeProcessor停止エラー:",e),this.handleError(e instanceof Error?e:new Error(String(e)))}else console.warn("FileBasedRealtimeProcessor は実行中ではありません")}pause(){this.isRunning&&(console.log("FileBasedRealtimeProcessor一時停止"),this.transcriptionEngine.stop(),this.textManager.setStatus("paused"),this.updateStats())}resume(){this.isRunning&&(console.log("FileBasedRealtimeProcessor再開"),this.transcriptionEngine.start(),this.textManager.setStatus("transcribing"),this.updateStats())}async saveToFile(){this.isRunning&&await this.textManager.saveToFile()}handleError(e){console.error("システムエラー:",e),e.message.includes("ファイル書き込みエラー")||e.message.includes("リアルタイム文字起こしエラー")||this.textManager.reportError(e),this.onErrorCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("Error callback実行エラー:",e)}}),this.updateStats()}updateStats(){const e={isRunning:this.isRunning,startTime:this.startTime,watchingFolder:this.currentWatchFolder,fileWatcherStats:this.chunkWatcher.getStats(),transcriptionStats:this.transcriptionEngine.getStats(),textData:this.textManager.getCurrentData(),totalProcessingTime:this.isRunning?Date.now()-this.startTime:0,systemResourceUsage:this.calculateResourceUsage()};this.onStatsUpdateCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("Stats callback実行エラー:",e)}})}calculateResourceUsage(){const e=this.transcriptionEngine.getStats(),t=this.textManager.getCurrentData(),n=e.queueLength,r=e.errorRate,o=t.segments.length;return n>10||r>20||o>500?"high":n>5||r>10||o>200?"medium":"low"}onStatsUpdate(e){this.onStatsUpdateCallbacks.push(e)}onError(e){this.onErrorCallbacks.push(e)}onTranscriptionComplete(e){this.onTranscriptionCompleteCallbacks.push(e)}getStats(){return{isRunning:this.isRunning,startTime:this.startTime,watchingFolder:this.currentWatchFolder,fileWatcherStats:this.chunkWatcher.getStats(),transcriptionStats:this.transcriptionEngine.getStats(),textData:this.textManager.getCurrentData(),totalProcessingTime:this.isRunning?Date.now()-this.startTime:0,systemResourceUsage:this.calculateResourceUsage()}}updateConfig(e){this.config={...this.config,...e},this.transcriptionEngine.updateConfig({maxRetryCount:this.config.maxRetryCount,processingTimeout:this.config.processingTimeout,enableAutoRetry:this.config.enableAutoRetry}),this.textManager.updateConfig({writeInterval:this.config.textWriteInterval,enableAutoSave:this.config.enableAutoSave,fileFormat:this.config.textFormat}),console.log("FileBasedRealtimeProcessor設定更新:",this.config)}isActive(){return this.isRunning}getCurrentProcessingFile(){return this.transcriptionEngine.getStats().currentFile||null}getErrorLog(){return this.transcriptionEngine.getErrorLog()}notifyUI(e,t){try{const n=new CustomEvent("fileBasedRealtimeUpdate",{detail:{type:e,timestamp:Date.now(),...t}});window.dispatchEvent(n),console.log(`UI通知送信: ${e}`,t)}catch(e){console.error("UI通知エラー:",e)}}enableAutoScroll(){this.notifyUI("autoScroll",{action:"enable"})}updateProgress(){const e=this.getStats(),t={processedChunks:e.textData.metadata.processedChunks,totalChunks:e.textData.metadata.totalChunks,successRate:e.transcriptionStats.successRate,errorRate:e.transcriptionStats.errorRate,isProcessing:e.transcriptionStats.isProcessing,currentFile:e.transcriptionStats.currentFile};this.notifyUI("progress",t)}cleanup(){console.log("FileBasedRealtimeProcessor クリーンアップ開始");try{this.isRunning&&this.stop(),this.notifyUI("cleanup",{}),this.chunkWatcher.cleanup(),this.transcriptionEngine.cleanup(),this.textManager.cleanup(),this.onStatsUpdateCallbacks=[],this.onErrorCallbacks=[],this.onTranscriptionCompleteCallbacks=[],console.log("✓ FileBasedRealtimeProcessor クリーンアップ完了")}catch(e){console.error("クリーンアップエラー:",e)}}}const _=()=>{const{setFileList:e,setIsRecording:t,setRecordingFile:n,setSelectedFile:o}=q(),[i,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(0),[f,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(0),[m,v]=(0,a.useState)(0),[y,b]=(0,a.useState)([]),[w,x]=(0,a.useState)(""),[k,S]=(0,a.useState)("microphone"),[C,E]=(0,a.useState)([]),[_,P]=(0,a.useState)(""),[R,F]=(0,a.useState)(!1),[z,I]=(0,a.useState)(null),[A,N]=(0,a.useState)(null),[L,M]=(0,a.useState)([]),D=(0,a.useRef)(null),j=((0,a.useRef)(null),(0,a.useRef)(null)),$=(0,a.useRef)(0),U=(0,a.useRef)(0),O=(0,a.useRef)(null),W=(0,a.useRef)(null);(0,a.useCallback)(e=>{try{const t=new Uint8Array([26,69,223,163,159,66,134,129,1,66,247,129,1,66,242,129,4,66,243,129,8,66,130,132,119,101,98,109,66,135,129,4,66,133,129,2,24,83,128,103,1,255,255,255,255,255,255,255,21,73,169,102,142,42,215,177,131,15,66,64,77,128,132,119,101,98,109,87,65,132,119,101,98,109,22,84,174,107,167,174,160,215,129,1,115,197,136,1,0,0,0,0,0,0,1,131,129,2,134,134,65,95,79,80,85,83,225,135,181,132,71,112,0,0,159,129,2]),n=e.byteLength+8;let r;r=n<127?new Uint8Array([128|n]):n<16383?new Uint8Array([64|n>>8,255&n]):n<2097151?new Uint8Array([32|n>>16,n>>8&255,255&n]):new Uint8Array([1,255,255,255,255,255,255,255]);const o=new Uint8Array([31,67,182,117,...r,231,129,0]),a=t.length+o.length+e.byteLength,i=new ArrayBuffer(a),s=new Uint8Array(i);let l=0;return s.set(t,l),l+=t.length,s.set(o,l),l+=o.length,s.set(new Uint8Array(e),l),console.log(`WebMヘッダー作成完了: ${a} bytes (ヘッダー: ${t.length+o.length}, データ: ${e.byteLength})`),i}catch(e){throw console.error("WebMヘッダー作成エラー:",e),e}},[]),(0,a.useEffect)(()=>{(async()=>{try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind);b(e),e.length>0&&!w&&x(e[0].deviceId)}catch(e){console.error("デバイス取得エラー:",e)}})()},[w]),(0,a.useEffect)(()=>{"desktop"===k&&(async()=>{try{console.log("デスクトップソースを取得中...");const e=await window.electronAPI.getDesktopSources();console.log("取得したデスクトップソース:",e),E(e);const t=e.find(e=>e.name.includes("Screen")||e.name.includes("screen"));t&&!_&&(P(t.id),console.log("デフォルトスクリーンを選択:",t.name))}catch(e){console.error("デスクトップソース取得エラー:",e)}})()},[k,_]),(0,a.useEffect)(()=>(O.current=new T({fileCheckInterval:1e3,maxRetryCount:1,processingTimeout:18e4,enableAutoRetry:!0,textWriteInterval:3e3,enableAutoSave:!0,textFormat:"detailed"}),O.current.onStatsUpdate(e=>{I(e),console.log("リアルタイム文字起こし統計更新:",e)}),O.current.onError(e=>{console.error("リアルタイム文字起こしエラー:",e)}),O.current.onTranscriptionComplete((e,t)=>{console.log(`チャンク文字起こし完了: ${t.filename} → ${e.segments.length}セグメント`)}),()=>{O.current&&O.current.cleanup()}),[]),(0,a.useEffect)(()=>(i&&!l?j.current=setInterval(()=>{d(e=>e+1)},1e3):j.current&&(clearInterval(j.current),j.current=null),()=>{j.current&&(clearInterval(j.current),j.current=null)}),[i,l]);const B=(0,a.useCallback)(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},[]);(0,a.useEffect)(()=>()=>{W.current&&(W.current.cleanup(),W.current=null),O.current&&(O.current.cleanup(),O.current=null)},[]);const H=(0,a.useCallback)(async()=>{await Q(!0)},[]),V=(0,a.useCallback)(async()=>{await Q(!1)},[]),Q=(0,a.useCallback)(async r=>{try{let a,i,l;if(console.log("🎬 録音開始処理開始:",{inputType:k,selectedDevice:w,enableTranscription:r}),"desktop"===k){if(console.log("Starting desktop capture with desktopCapturer..."),!_)throw new Error("デスクトップソースが選択されていません");try{console.log("🖥️ デスクトップ音声録音開始 - Using desktop source:",_);try{console.log("🎵 音声のみでデスクトップキャプチャを試行..."),a=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_}},video:!1}),console.log("✅ 音声のみキャプチャ成功")}catch(e){console.warn("⚠️ 音声のみキャプチャ失敗、映像込みで試行:",e),a=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_,minWidth:640,maxWidth:1280,minHeight:360,maxHeight:720}}}),console.log("✅ 映像込みキャプチャ成功")}console.log("🎵 Desktop capture stream obtained:",{id:a.id,active:a.active,audioTracks:a.getAudioTracks().length,videoTracks:a.getVideoTracks().length});const e=a.getAudioTracks();if(console.log("🎤 Audio tracks:",e.map(e=>({id:e.id,kind:e.kind,label:e.label,enabled:e.enabled,readyState:e.readyState,constraints:e.getConstraints()}))),0===e.length)throw new Error("デスクトップからの音声トラックが取得できませんでした");const t=a.getVideoTracks();if(t.length>0&&(console.log("🎥 映像トラックを停止します:",t.length),t.forEach(e=>{console.log("🛑 Stopping video track:",e.id),e.stop(),a.removeTrack(e)})),console.log("🔊 最終ストリーム状態:",{audioTracks:a.getAudioTracks().length,videoTracks:a.getVideoTracks().length,active:a.active}),0===e.length)throw new Error("デスクトップ音声トラックが取得できませんでした。システム音声の出力がない可能性があります。");console.log("Desktop audio capture successful")}catch(e){console.error("Desktop capturer failed:",e),console.log("Falling back to traditional methods...");try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind);console.log("Available audio input devices:",e.map(e=>({deviceId:e.deviceId,label:e.label})));const t=e.find(e=>e.label.toLowerCase().includes("stereo mix")||e.label.toLowerCase().includes("what you hear")||e.label.toLowerCase().includes("system audio"));if(!t)throw new Error("システム音声デバイスが見つかりません");console.log("Found system audio device:",t.label),a=await navigator.mediaDevices.getUserMedia({audio:{deviceId:t.deviceId,echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),console.log("System audio device capture successful")}catch(t){console.error("All fallback methods failed:",t);const n=`🔊 デスクトップ音声キャプチャに失敗しました。\n\n❌ 発生したエラー:\n1. デスクトップキャプチャ: ${e instanceof Error?e.message:String(e)}\n2. フォールバック: ${t instanceof Error?t.message:String(t)}\n\n🔧 対処法:\n\n【方法1】Windows設定でステレオミックスを有効化\n- 音声設定 → 録音デバイス → ステレオミックス有効\n\n【方法2】仮想オーディオケーブルを使用\n- VB-Cable等のソフトウェアをインストール\n\n【方法3】確認事項\n- 音声を出力中のアプリケーションがあることを確認\n- デスクトップ音声の音量が0でないことを確認\n- 他のアプリケーションが音声デバイスを使用していないか確認\n\n【方法4】管理者権限で実行\n- アプリケーションを管理者として実行`;throw console.error("💡 デスクトップ音声録音のトラブルシューティング情報:",{selectedDesktopSource:_,errorDetails:{desktop:e,fallback:t}}),new Error(n)}}}else console.log("🎤 マイク音声でストリーム取得開始:",w),a=await navigator.mediaDevices.getUserMedia({audio:{deviceId:w}}),console.log("✅ マイクストリーム取得成功:",{id:a.id,active:a.active,audioTracks:a.getAudioTracks().length});const u=2e4;console.log("🎬 MediaRecorderの設定開始...");const f={audioBitsPerSecond:128e3};MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?(l="audio/webm;codecs=opus",f.mimeType=l,console.log("✅ audio/webm;codecs=opus サポート確認"),i=new MediaRecorder(a,f),console.log("Recording in WebM format with Opus codec (20s chunks)")):MediaRecorder.isTypeSupported("audio/webm")?(l="audio/webm",f.mimeType=l,console.log("✅ audio/webm サポート確認"),i=new MediaRecorder(a,f),console.log("Recording in WebM format with timeslice (20s chunks)")):(console.log("⚠️ WebM非サポート、フォールバック使用"),i=new MediaRecorder(a,f),l=i.mimeType,console.log("Recording in fallback format with timeslice:",l)),console.log("📝 MediaRecorder作成完了:",{state:i.state,mimeType:l,streamActive:a.active,audioTracks:a.getAudioTracks().length}),D.current=i,i.onstart=()=>{console.log("▶️ MediaRecorder開始イベント受信")},i.onerror=e=>{console.error("❌ MediaRecorderエラーイベント:",e),console.error("❌ MediaRecorderエラー詳細:",{error:e.error,state:i.state,mimeType:i.mimeType,memoryUsage:performance.memory?{usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit}:"N/A"});try{"recording"===i.state&&i.stop(),a.getTracks().forEach(e=>e.stop())}catch(e){console.error("エラー時のクリーンアップ失敗:",e)}};const h=[];let p=null,g=null,m=0,v=null;const y=[],b=[];let x=Date.now(),S=null,C=0;const E=500;S=setInterval(()=>{const e=C/1048576;if(performance.memory){const t=performance.memory,n=t.usedJSHeapSize/1048576,r=t.totalJSHeapSize/1048576;console.log(`🧠 メモリ使用量: ${n.toFixed(1)}MB / ${r.toFixed(1)}MB, 録音データ: ${e.toFixed(1)}MB`),(e>E||n>800)&&(console.warn("⚠️ メモリ使用量が危険レベルに達しました。録音を安全に停止します。"),"recording"===i.state&&(console.log("🛑 メモリ不足のため録音を停止します"),i.stop()),S&&(clearInterval(S),S=null))}},3e4),i.ondataavailable=async e=>{if(console.log("📊 ondataavailable イベント受信:",{dataSize:e.data.size,totalChunks:h.length+1,currentTime:(new Date).toISOString()}),e.data.size>0){h.push(e.data),b.push(e.data),C+=e.data.size;const t=Date.now();if(t-x>=u-1e3)try{m++;const e=Date.now(),n=`chunk_${String(m).padStart(5,"0")}_${e}.webm`;if(!v&&g){const e=g.replace(".webm","");v=`temp_${e}`,console.log(`チャンクファイル用テンポラリフォルダ: ${v}`)}if(v&&b.length>0){try{if(1===m){const e=new Blob(h,{type:l}),t=await e.arrayBuffer();await window.electronAPI.saveFile(t,n,v),y.push(`${v}/${n}`),console.log(`完全なWebMチャンク保存: ${n} (${t.byteLength} bytes)`)}else{const e=new Blob(h,{type:l}),t=await e.arrayBuffer();await window.electronAPI.saveFile(t,n,v),y.push(`${v}/${n}`),console.log(`累積WebMチャンク保存: ${n} (${t.byteLength} bytes)`)}}catch(e){console.error("チャンクファイル保存エラー:",e)}b.length=0,x=t}}catch(e){console.error("チャンクファイル保存エラー:",e)}if(h.length>0)try{const e=new Blob(h,{type:l}),t=await e.arrayBuffer();!p&&g?(p=await window.electronAPI.saveFile(t,g),console.log("録音中ファイルの初回書き込み:",p)):g&&(await window.electronAPI.saveFile(t,g),console.log("録音中ファイルの更新:",p,"サイズ:",t.byteLength,"bytes"))}catch(e){console.error("録音中ファイル書き込みエラー:",e)}}},i.onstop=async()=>{if(console.log("⏹️ MediaRecorder停止イベント受信"),S&&(clearInterval(S),S=null,console.log("🧠 メモリ監視を停止しました")),b.length>0){m++;const e=new Blob(b,{type:l});console.log(`最終チャンク情報: ${m}番目 (${e.size} bytes) - 情報のみ記録`)}console.log(`📁 チャンクファイル保存完了: ${y.length}個のファイル`),console.log(`📊 総メモリ使用量: ${(C/1048576).toFixed(1)}MB`);const e=Date.now()-$.current-U.current,r=Math.round(e/1e3);console.log("Recording stopped - Precise duration:",e,"ms (",r,"seconds)"),console.log("Recording format:",l);const o=new Blob(h,{type:l});console.log("Original WebM blob created, size:",o.size,"bytes");try{let e;console.log("Getting accurate duration using HTMLAudioElement...");try{e=await(a=o,new Promise((e,t)=>{const n=new Audio,r=URL.createObjectURL(a),o=()=>{URL.revokeObjectURL(r),n.remove()};n.src=r,n.addEventListener("loadedmetadata",()=>{const t=n.duration;if(isFinite(t))o(),e(t);else{n.currentTime=1e101;const t=()=>{n.removeEventListener("timeupdate",t),o(),e(n.duration)};n.addEventListener("timeupdate",t)}}),n.onerror=e=>{o(),t(new Error("音声メタデータの読み込みに失敗しました"))}})),console.log("Accurate duration obtained:",e,"seconds")}catch(t){console.warn("AudioElementでのduration取得に失敗:",t),e=r,console.log("計算されたdurationを使用:",e,"seconds")}const t=await o.arrayBuffer(),n=g||"recording.webm";console.log("録音開始時に決定されたファイル名で最終保存:",n),console.log("Saving WebM file with duration metadata:",n);try{console.log("録音停止時の最終ファイル保存:",{filename:n,bufferSize:t.byteLength,duration:e,recordingPath:p}),await window.electronAPI.saveFile(t,n);const r={duration:e,format:"webm",size:t.byteLength,recordedAt:(new Date).toISOString(),mimeType:l};await window.electronAPI.saveMetadata(n,r),console.log("📁 録音ファイルを保存しました:",n),console.log("⏱️ Accurate Duration:",e,"seconds"),console.log("📋 メタデータファイルも保存しました"),console.log("✅ WebMファイルと正確なdurationメタデータ保存完了")}catch(e){console.error("ファイル保存エラー:",e)}}catch(e){console.error("Duration取得エラー:",e),console.log("フォールバック: 元のWebMファイルを保存します（Duration情報なし）");const t=await o.arrayBuffer(),n=new Date,r=`recording_${n.getFullYear()}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getDate().toString().padStart(2,"0")}_${n.getHours().toString().padStart(2,"0")}${n.getMinutes().toString().padStart(2,"0")}${n.getSeconds().toString().padStart(2,"0")}.webm`;try{await window.electronAPI.saveFile(t,r),console.log("⚠️ 録音ファイルを保存しました（Duration無し）:",r)}catch(e){console.error("フォールバックファイル保存エラー:",e)}}var a;s(!1),t(!1),c(!1),d(0),setTimeout(()=>{n(null),console.log("🎯 録音中ファイルのグローバル状態をクリア")},500)};const T=async()=>{try{const t=new Date,r=`recording_${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}_${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}.webm`;p=null,g=r;const a=(await window.electronAPI.loadSettings()).saveFolder,i={id:r,filename:r,filepath:`${a}\\${r}`,format:"webm",size:0,createdAt:t,duration:0,hasTranscriptionFile:!1,transcriptionPath:void 0,isRecording:!0};e(e=>{const t=e.findIndex(e=>e.filename===r);if(t>=0){const n=[...e];return n[t]=i,n}return[i,...e]}),n(i),o(i),console.log("📁 録音中ファイルを左ペインに追加:",r),console.log("🎯 グローバル状態に録音中ファイルを設定:",i.filename),console.log("🎯 録音中ファイルを自動選択:",i.filename),console.log("🎯 録音中ファイルの詳細:",{id:i.id,filename:i.filename,isRecording:i.isRecording,filepath:i.filepath})}catch(e){console.error("録音中ファイルエントリ作成エラー:",e)}};if(await T(),"microphone"===k&&console.log("🎤 マイク監視は一時的に無効化されています（録音のトラブルシューティング中）"),console.log("🎬 MediaRecorder開始中...",{chunkSizeMs:u,state:i.state}),i.start(u),console.log("✅ MediaRecorder.start()呼び出し完了, 新しいstate:",i.state),s(!0),t(!0),d(0),console.log("📱 UI状態更新完了: isRecording = true"),$.current=Date.now(),U.current=0,console.log("Recording started at:",new Date($.current).toISOString()),g&&"string"==typeof g){const e=g.replace(".webm","");v=`temp_${e}`,console.log(`ファイルベースシステム用テンポラリフォルダ: ${v}`)}if(r&&O.current&&v&&g)try{console.log("ファイルベースリアルタイム文字起こし開始...");const e=(await window.electronAPI.loadSettings()).saveFolder,t=`${e}\\${g}`,n=`${e}\\${v}`;console.log(`監視フォルダ: ${n}`),console.log(`出力ファイル: ${t}`),await O.current.start(n,t),F(!0),console.log("✓ ファイルベースリアルタイム文字起こし開始完了")}catch(e){console.error("ファイルベースリアルタイム文字起こし開始エラー:",e)}else r?console.warn("ファイルベースリアルタイム文字起こし開始条件が満たされていません:",{realtimeProcessor:!!O.current,tempFolderPath:v,recordingFilename:g||"undefined"}):console.log("録音のみモード: リアルタイム文字起こしをスキップ")}catch(n){console.error("❌ 録音開始エラー:",n),console.error("❌ エラー詳細:",{name:n instanceof Error?n.name:"Unknown",message:n instanceof Error?n.message:String(n),stack:n instanceof Error?n.stack:"No stack trace",inputType:k,selectedDevice:w,enableTranscription:r});let o="",a="";if(n instanceof DOMException){o=`DOMException: ${n.name} - ${n.message}`,a=n.code?.toString()||"unknown",console.error("DOMException詳細:",{name:n.name,message:n.message,code:n.code,stack:n.stack});let e="";switch(n.name){case"NotAllowedError":e="権限が拒否されました。管理者として実行するか、Windows設定でスクリーンキャプチャを許可してください。";break;case"NotFoundError":e="キャプチャ可能なデバイスが見つかりません。別のアプリケーションが使用中の可能性があります。";break;case"NotSupportedError":e="このブラウザまたはシステムではデスクトップキャプチャがサポートされていません。";break;case"SecurityError":e="セキュリティ制限により拒否されました。HTTPSまたはローカル環境で実行してください。";break;default:e="システム設定を確認してください。"}o+=`\n詳細: ${e}`}else console.error("Unknown error type:",n),o=n?.toString()||"Unknown error";alert("desktop"===k?`デスクトップ音声へのアクセスが拒否されました。\n${o}\n\nWindows環境での対処法:\n1. 画面共有ダイアログで「システム音声を共有」をチェック\n2. Windowsプライバシー設定でデスクトップアプリのカメラ/マイクアクセスを許可\n3. Electronアプリを管理者として実行\n4. 他のアプリケーションがオーディオを使用していないか確認`:`マイクへのアクセスが拒否されました。\n${o}`),console.error("録音開始エラー (full):",n),s(!1),t(!1),c(!1),d(0);const i=async()=>{try{const t=(await window.electronAPI.loadSettings()).saveFolder,n=await window.electronAPI.getFileList(t),r=await Promise.all(n.map(async e=>{try{const t=await window.electronAPI.checkTranscriptionExists(e.filepath),n=t?await window.electronAPI.getTranscriptionPath(e.filepath):void 0;return{...e,hasTranscriptionFile:t,transcriptionPath:n,isRecording:!1}}catch(t){return console.error(`文字起こしファイル確認エラー (${e.filename}):`,t),{...e,hasTranscriptionFile:!1,transcriptionPath:void 0,isRecording:!1}}}));e(r),console.log("📁 録音エラー時のファイルリスト更新完了")}catch(e){console.error("録音エラー時のファイルリスト更新エラー:",e)}};i()}},[w,k,_]),Y=(0,a.useCallback)(async()=>{if(D.current&&i){if(D.current.stop(),D.current.stream.getTracks().forEach(e=>e.stop()),W.current)try{console.log("🎤 マイク監視を停止します..."),W.current.stopMonitoring(),W.current=null,N(null),console.log("✅ マイク監視停止完了")}catch(e){console.error("❌ マイク監視停止エラー:",e)}if(O.current&&R)try{console.log("ファイルベースリアルタイム文字起こし停止..."),await O.current.stop(),F(!1),console.log("✓ ファイルベースリアルタイム文字起こし停止完了")}catch(e){console.error("ファイルベースリアルタイム文字起こし停止エラー:",e)}}},[i,R]),K=(0,a.useCallback)(()=>{if(D.current)if(l){const e=Date.now();D.current.resume(),c(!1),console.log("Recording resumed at:",new Date(e).toISOString())}else{const e=Date.now();D.current.pause(),c(!0),console.log("Recording paused at:",new Date(e).toISOString()),setTimeout(()=>{if(l){const t=Date.now();U.current+=t-e,console.log("Paused duration so far:",U.current,"ms")}},100)}},[l]);return(0,r.jsx)("div",{className:"bottom-panel",children:(0,r.jsxs)("div",{className:"bottom-panel__content",children:[(0,r.jsxs)("div",{className:"flex items-center gap-md",children:[(0,r.jsx)("label",{className:"text-secondary",style:{minWidth:"100px"},children:"入力タイプ:"}),(0,r.jsxs)("select",{className:"select",value:k,onChange:e=>S(e.target.value),disabled:i,style:{width:"200px",opacity:i?.5:1},children:[(0,r.jsx)("option",{value:"microphone",children:"🎤 マイク音声"}),(0,r.jsx)("option",{value:"desktop",children:"🖥️ デスクトップ音声"})]}),"desktop"===k&&(0,r.jsx)("div",{className:"text-secondary",style:{fontSize:"11px"},children:"※画面共有で「システム音声を共有」を有効にしてください"})]}),"microphone"===k&&(0,r.jsxs)("div",{className:"flex items-center gap-md",children:[(0,r.jsx)("label",{className:"text-secondary",style:{minWidth:"100px"},children:"入力デバイス:"}),(0,r.jsx)("select",{className:"select flex-1",value:w,onChange:e=>x(e.target.value),disabled:i,style:{opacity:i?.5:1},children:y.map(e=>(0,r.jsx)("option",{value:e.deviceId,children:e.label||`マイク ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),"microphone"===k&&i&&A&&(0,r.jsxs)("div",{className:"flex items-center gap-md",children:[(0,r.jsx)("label",{className:"text-secondary",style:{minWidth:"100px"},children:"音声レベル:"}),(0,r.jsxs)("div",{className:"flex items-center gap-sm flex-1",children:[(0,r.jsxs)("div",{style:{width:"200px",height:"20px",backgroundColor:"#333",borderRadius:"10px",overflow:"hidden",border:"1px solid #555",position:"relative"},children:[(0,r.jsx)("div",{style:{width:`${A.inputLevel}%`,height:"100%",backgroundColor:A.inputLevel<30?"#4CAF50":A.inputLevel<70?"#FF9800":"#F44336",transition:"width 0.1s ease-out"}}),(0,r.jsx)("div",{style:{position:"absolute",left:`${A.peakLevel}%`,top:0,width:"2px",height:"100%",backgroundColor:"#fff",transition:"left 0.1s ease-out"}})]}),(0,r.jsxs)("div",{style:{fontSize:"12px",minWidth:"60px",color:A.inputLevel<5?"#F44336":A.inputLevel<15?"#FF9800":"#4CAF50"},children:[A.inputLevel,"%"]}),(0,r.jsx)("div",{style:{fontSize:"14px"},children:A.isSilent?"🔇":A.inputLevel<15?"🔉":A.inputLevel<50?"🔊":"📢"})]})]}),L.length>0&&L.slice(-1).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-md",children:[(0,r.jsx)("label",{className:"text-secondary",style:{minWidth:"100px"},children:"⚠️ 音声診断:"}),(0,r.jsxs)("div",{style:{fontSize:"12px",color:"error"===e.severity?"#F44336":"warning"===e.severity?"#FF9800":"#2196F3",flex:1},children:[e.message,e.recommendation&&(0,r.jsxs)("div",{style:{fontSize:"11px",color:"#888",marginTop:"2px"},children:["💡 ",e.recommendation]})]})]},t)),"desktop"===k&&(0,r.jsxs)("div",{className:"flex items-center gap-md",children:[(0,r.jsx)("label",{className:"text-secondary",style:{minWidth:"100px"},children:"キャプチャ対象:"}),(0,r.jsxs)("select",{className:"select flex-1",value:_,onChange:e=>P(e.target.value),disabled:i,style:{opacity:i?.5:1},children:[(0,r.jsx)("option",{value:"",children:"選択してください"}),C.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),0===C.length&&(0,r.jsx)("div",{className:"text-secondary",style:{fontSize:"11px"},children:"デスクトップソースを読み込み中..."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-md",children:[(0,r.jsx)("div",{className:"flex gap-sm",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"btn btn--error",onClick:Y,children:"■ 停止"}),(0,r.jsx)("button",{className:"btn",onClick:K,children:l?"▶ 再開":"⏸ 一時停止"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"btn btn--success",onClick:H,disabled:"microphone"===k&&!w||"desktop"===k&&!_,children:"● 録音・文字起こし"}),(0,r.jsx)("button",{className:"btn btn--secondary",onClick:V,disabled:"microphone"===k&&!w||"desktop"===k&&!_,children:"● 録音のみ"})]})}),(0,r.jsxs)("div",{className:"text-secondary",children:["録音時間: ",(0,r.jsx)("span",{className:"text-primary",children:B(u)})]}),i&&(0,r.jsx)("div",{className:"text-success",children:l?"⏸ 一時停止中":"● 録音中"})]})]})})},P=e=>{if(!isFinite(e)||isNaN(e)||e<0)return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return!isFinite(t)||!isFinite(n)||t<0||n<0?"0:00":`${t}:${n.toString().padStart(2,"0")}`},R=[{value:.5,label:"0.5x"},{value:.75,label:"0.75x"},{value:1,label:"1x"},{value:1.25,label:"1.25x"},{value:1.5,label:"1.5x"},{value:2,label:"2x"}],F=({currentTime:e,duration:t,onSeek:n,loading:o=!1,className:i=""})=>{const[s,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(0),d=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useRef)(null),p=t>0&&isFinite(t)?Math.min(100,e/t*100):0,g=s?c:p,m=s?c/100*(t||0):e;console.log("SeekBar render DEBUG:",JSON.stringify({currentTime:e,duration:t,progress:p,isDragging:s,dragPosition:c,displayProgress:g,displayTime:m,formatTimeResult:P(m),isCurrentTimeFinite:isFinite(e),isDurationFinite:isFinite(t)},null,2));const v=(0,a.useCallback)(e=>{if(!d.current)return 0;const t=d.current.getBoundingClientRect(),n=e.clientX-t.left;return Math.max(0,Math.min(100,n/t.width*100))},[]),y=(0,a.useCallback)(()=>{f.current&&(document.removeEventListener("mousemove",f.current,!0),f.current=null),h.current&&(document.removeEventListener("mouseup",h.current,!0),h.current=null)},[]),b=(0,a.useCallback)(e=>{if(o||t<=0)return;e.preventDefault(),e.stopPropagation(),y();const r=v(e);console.log("SeekBar: Drag Start at progress:",r),l(!0),u(r);const a=e=>{if(e.preventDefault(),d.current){const t=v(e);u(t)}},i=e=>{if(e.preventDefault(),console.log("SeekBar: Drag End"),d.current&&t>0&&isFinite(t)){const r=v(e),o=r/100*t;isFinite(o)&&o>=0&&o<=t?(console.log("SeekBar: Seek Execute",o),n(o)):console.warn("SeekBar: Invalid seek time",{seekTime:o,duration:t,finalProgress:r,isFiniteDuration:isFinite(t),isFiniteSeekTime:isFinite(o)})}else console.warn("SeekBar: Cannot seek - invalid duration",JSON.stringify({duration:t,isFiniteDuration:isFinite(t),hasSeekBarRef:!!d.current},null,2));setTimeout(()=>{l(!1),u(0)},100),y(),console.log("SeekBar: Event Listeners Cleaned")};f.current=a,h.current=i,console.log("SeekBar: ドラッグ開始"),document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",i,!0)},[o,t,v,n,y]),w=(0,a.useCallback)(e=>{if(o||t<=0||s||!isFinite(t))return;const r=v(e),a=r/100*t;isFinite(a)&&a>=0&&a<=t?(console.log("SeekBar: Click Seek Execute",a),n(a)):console.warn("SeekBar: Invalid click seek time",{seekTime:a,duration:t,progress:r,isFiniteDuration:isFinite(t),isFiniteSeekTime:isFinite(a)})},[o,t,s,v,n]);return(0,a.useEffect)(()=>()=>{console.log("SeekBar: コンポーネントアンマウント - イベントリスナーをクリーンアップ"),y()},[y]),(0,r.jsxs)("div",{className:`seek-bar ${i}`,children:[(0,r.jsxs)("div",{className:"seek-bar__time-display",children:[(0,r.jsx)("span",{className:"seek-bar__current-time",children:P(m)}),(0,r.jsx)("span",{className:"seek-bar__duration",children:P(t)})]}),(0,r.jsxs)("div",{className:"seek-bar__track "+(o?"seek-bar__track--loading":""),ref:d,onMouseDown:b,onClick:w,style:{cursor:o||t<=0?"default":"pointer"},children:[(0,r.jsx)("div",{className:"seek-bar__background"}),(0,r.jsx)("div",{className:"seek-bar__progress "+(s?"seek-bar__progress--dragging":""),style:{width:`${g}%`}}),t>0&&(0,r.jsx)("div",{className:"seek-bar__handle "+(s?"seek-bar__handle--dragging":""),style:{left:`${g}%`}}),o&&(0,r.jsx)("div",{className:"seek-bar__loading",children:"読み込み中..."})]})]})},z=({isPlaying:e,loading:t,volume:n,playbackRate:o,hasFile:a,onPlay:i,onPause:s,onStop:l,onVolumeChange:c,onPlaybackRateChange:u})=>(0,r.jsxs)("div",{className:"playback-controls",children:[(0,r.jsxs)("div",{className:"playback-controls__main",children:[(0,r.jsxs)("button",{className:"btn playback-controls__play-pause "+(e?"btn--warning":"btn--primary"),onClick:()=>{e?s():i()},disabled:!a||t,title:e?"一時停止":"再生",children:[t?"⏳":e?"⏸️":"▶️",(0,r.jsx)("span",{className:"playback-controls__button-text",children:t?"読み込み中":e?"一時停止":"再生"})]}),(0,r.jsx)("button",{className:"btn playback-controls__stop",onClick:l,disabled:!a||t,title:"停止",children:"⏹️"})]}),(0,r.jsxs)("div",{className:"playback-controls__volume",children:[(0,r.jsx)("label",{className:"playback-controls__volume-label",title:"音量",children:0===n?"🔇":n<.5?"🔉":"🔊"}),(0,r.jsx)("input",{type:"range",className:"playback-controls__volume-slider",min:"0",max:"1",step:"0.05",value:n,onChange:e=>c(parseFloat(e.target.value)),disabled:!a}),(0,r.jsxs)("span",{className:"playback-controls__volume-value",children:[Math.round(100*n),"%"]})]}),(0,r.jsxs)("div",{className:"playback-controls__rate",children:[(0,r.jsx)("label",{className:"playback-controls__rate-label",children:"速度:"}),(0,r.jsx)("select",{className:"select playback-controls__rate-select",value:o,onChange:e=>u(parseFloat(e.target.value)),disabled:!a,children:R.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),!a&&(0,r.jsx)("div",{className:"playback-controls__no-file",children:"ファイルを選択してください"})]}),I=({filePath:e,fileName:t,className:n=""})=>{const{selectedFile:o,setIsPlaying:i}=q(),[s,l]=(()=>{const e=(0,a.useRef)(null),t=(0,a.useRef)(null),[n,r]=(0,a.useState)({isPlaying:!1,currentTime:0,duration:0,volume:.8,playbackRate:1,loading:!1,error:null});(0,a.useEffect)(()=>{const t=new Audio;e.current=t;const o=()=>{r(e=>({...e,loading:!0,error:null}))},a=()=>{const e=t.duration;console.log("useAudioPlayer: loadedmetadata event, duration:",e),r(t=>t.duration>0?{...t,loading:!1}:isFinite(e)&&e>0?(console.log("Fallback: Setting duration from loadedmetadata event:",e),{...t,duration:e,loading:!1}):{...t,loading:!1})},i=()=>{console.log("useAudioPlayer: canplay event",{audioDuration:t.duration,isFiniteAudioDuration:isFinite(t.duration),readyState:t.readyState,networkState:t.networkState})},s=()=>{console.log("useAudioPlayer: canplaythrough event",{audioDuration:t.duration,isFiniteAudioDuration:isFinite(t.duration),readyState:t.readyState,networkState:t.networkState}),isFinite(t.duration)&&t.duration>0&&r(e=>0===e.duration?(console.log("Updating duration from canplaythrough:",t.duration),{...e,duration:t.duration}):e)},l=()=>{const e=t.currentTime;r(t=>({...t,currentTime:e})),Math.floor(e)%5==0&&console.log("useAudioPlayer: time update",e)},c=()=>{r(e=>({...e,isPlaying:!0}))},u=()=>{r(e=>({...e,isPlaying:!1}))},d=()=>{const e=t.currentTime;console.log("Audio ended, actual duration:",e),r(t=>({...t,isPlaying:!1,currentTime:0,duration:0===t.duration?e:t.duration}))},f=()=>{r(e=>({...e,loading:!1,isPlaying:!1,error:"音声ファイルの読み込みに失敗しました"}))},h=()=>{r(e=>({...e,volume:t.volume}))},p=()=>{r(e=>({...e,playbackRate:t.playbackRate}))};return t.addEventListener("loadstart",o),t.addEventListener("loadedmetadata",a),t.addEventListener("canplay",i),t.addEventListener("canplaythrough",s),t.addEventListener("timeupdate",l),t.addEventListener("play",c),t.addEventListener("pause",u),t.addEventListener("ended",d),t.addEventListener("error",f),t.addEventListener("volumechange",h),t.addEventListener("ratechange",p),t.volume=n.volume,t.playbackRate=n.playbackRate,()=>{t.removeEventListener("loadstart",o),t.removeEventListener("loadedmetadata",a),t.removeEventListener("canplay",i),t.removeEventListener("canplaythrough",s),t.removeEventListener("timeupdate",l),t.removeEventListener("play",c),t.removeEventListener("pause",u),t.removeEventListener("ended",d),t.removeEventListener("error",f),t.removeEventListener("volumechange",h),t.removeEventListener("ratechange",p),t.pause(),t.src=""}},[]);const o=(0,a.useCallback)(()=>{e.current&&!n.loading&&(console.log("Playing audio with src:",e.current.src.substring(0,100)+"..."),e.current.play().catch(t=>{console.error("音声再生エラー詳細:",{error:t,errorName:t.name,errorMessage:t.message,audioSrc:e.current?.src.substring(0,100)+"...",audioReadyState:e.current?.readyState,audioNetworkState:e.current?.networkState,audioDuration:e.current?.duration}),r(e=>({...e,error:"音声の再生に失敗しました",isPlaying:!1}))}))},[n.loading]),i=(0,a.useCallback)(()=>{e.current&&e.current.pause()},[]),s=(0,a.useCallback)(()=>{e.current&&(e.current.pause(),e.current.currentTime=0)},[]),l=(0,a.useCallback)(t=>{if(e.current&&n.duration>0&&isFinite(n.duration)){if(!isFinite(t)||isNaN(t))return void console.warn("useAudioPlayer: Invalid seek time - not finite or NaN",t);const r=Math.max(0,Math.min(t,n.duration));if(!isFinite(r)||isNaN(r))return void console.warn("useAudioPlayer: Invalid clamped time",{originalTime:t,clampedTime:r,duration:n.duration});console.log("useAudioPlayer: Seeking to",r);try{e.current.currentTime=r}catch(e){console.error("useAudioPlayer: Seek error",e)}}else console.warn("useAudioPlayer: Cannot seek",{hasAudio:!!e.current,duration:n.duration,isFiniteDuration:isFinite(n.duration)})},[n.duration]),c=(0,a.useCallback)(t=>{if(e.current){const n=Math.max(0,Math.min(1,t));e.current.volume=n}},[]),u=(0,a.useCallback)(t=>{if(e.current){const n=Math.max(.25,Math.min(4,t));e.current.playbackRate=n}},[]),d=(0,a.useCallback)(async(n,o)=>{if(!e.current)return;if(t.current===n)return void console.log("Audio File Already Loaded:",n);console.log("Audio File Loading:",{filePath:n,metadataDuration:o});const a=n.split("\\").pop()||n.split("/").pop()||"",i=(new Date).toISOString().split("T")[0].replace(/-/g,"");if(a.startsWith("recording_")&&a.includes(i))return console.warn("録音中のファイルのため、読み込みをスキップ:",a),void r(e=>({...e,currentTime:0,duration:o&&isFinite(o)?o:0,isPlaying:!1,error:"録音中のファイルは再生できません",loading:!1}));e.current.pause(),r(e=>({...e,currentTime:0,duration:o&&isFinite(o)?o:0,isPlaying:!1,error:null,loading:!0}));try{const r=await window.electronAPI.loadAudioFile(n);if(!r)throw new Error("Main process returned an empty data URL.");e.current.src=r,e.current.load(),t.current=n,console.log("Audio source set. Waiting for events...")}catch(e){console.error("Audio File Loading Error:",e),r(e=>({...e,loading:!1,error:"オーディオファイルの読み込みに失敗しました。"}))}},[]);return[n,{play:o,pause:i,stop:s,seek:l,setVolume:c,setPlaybackRate:u,loadFile:d}]})();(0,a.useEffect)(()=>{o?.filepath?l.loadFile(o.filepath).catch(e=>{console.error("AudioPlayer: ファイル読み込みエラー:",e)}):l.stop()},[o]),(0,a.useEffect)(()=>{i(s.isPlaying)},[s.isPlaying,i]);const c=Boolean(e);return console.log("AudioPlayer render DEBUG:",JSON.stringify({filePath:e,fileName:t,hasFile:c,audioState:{isPlaying:s.isPlaying,currentTime:s.currentTime,duration:s.duration,loading:s.loading,error:s.error}},null,2)),(0,r.jsxs)("div",{className:`audio-player ${n}`,children:[(0,r.jsxs)("div",{className:"audio-player__header",children:[(0,r.jsx)("div",{className:"audio-player__file-info",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"audio-player__file-name",title:t,children:["🎵 ",t||"Unknown"]}),(0,r.jsx)("div",{className:"audio-player__file-path",title:e,children:e})]}):(0,r.jsx)("div",{className:"audio-player__no-file",children:"ファイルが選択されていません"})}),s.error&&(0,r.jsxs)("div",{className:"audio-player__error",children:["⚠️ ",s.error]})]}),(0,r.jsx)(F,{currentTime:s.currentTime,duration:o?.duration??0,loading:s.loading,onSeek:l.seek,className:"audio-player__seek-bar"}),(0,r.jsx)(z,{isPlaying:s.isPlaying,loading:s.loading,volume:s.volume,playbackRate:s.playbackRate,hasFile:c,onPlay:l.play,onPause:l.pause,onStop:l.stop,onVolumeChange:l.setVolume,onPlaybackRateChange:l.setPlaybackRate})]})},A=({audioFileName:e,chunkSize:t,overlapSize:n,autoScroll:o})=>{const{setTranscriptionDisplayData:i}=q(),[s,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(0),[d,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)({averageTime:0,estimatedRemaining:0,failedCount:0});(0,a.useEffect)(()=>{const e=e=>{const{totalChunks:t,chunkSize:r}=e.detail;console.log("チャンク分割文字起こし開始:",t,"チャンク"),u(t),f(!0);const o=[];for(let e=0;e<t;e++)o.push({chunkId:`chunk_${e}`,sequenceNumber:e,status:"waiting",startTime:e*(r-n),endTime:(e+1)*(r-n)+n,segments:[]});l(o)};return window.addEventListener("chunkTranscriptionStart",e),()=>{window.removeEventListener("chunkTranscriptionStart",e)}},[t,n]),(0,a.useEffect)(()=>{const e=e=>{const{chunkId:t,segments:n,status:r,error:a,processingTime:i}=e.detail;console.log("チャンク完了:",t,r,n?.length||0,"セグメント"),l(e=>e.map(e=>e.chunkId===t?{...e,status:r||"completed",segments:n||[],processingTime:i,error:a}:e)),p(e=>({...e,failedCount:"failed"===r?e.failedCount+1:e.failedCount,averageTime:i?(e.averageTime+i)/2:e.averageTime})),o&&setTimeout(()=>{const e=document.getElementById(`chunk-${t}`);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},100)};return window.addEventListener("chunkTranscriptionCompleted",e),()=>{window.removeEventListener("chunkTranscriptionCompleted",e)}},[o]),(0,a.useEffect)(()=>{const e=e=>{const t=e.detail;console.log("チャンク分割文字起こし完了:",t),f(!1),i(t)};return window.addEventListener("chunkTranscriptionComplete",e),()=>{window.removeEventListener("chunkTranscriptionComplete",e)}},[i]);const g=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return d||0!==s.length?(0,r.jsxs)("div",{style:{padding:"var(--spacing-md)",backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",borderRadius:"var(--border-radius)",marginTop:"var(--spacing-md)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--spacing-md)",paddingBottom:"var(--spacing-sm)",borderBottom:"1px solid var(--color-border)"},children:[(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)",display:"flex",flexDirection:"column",gap:"4px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{children:"⚡ チャンク分割処理中"}),e.includes("recording_")&&(0,r.jsx)("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-warning)",backgroundColor:"rgba(255, 204, 2, 0.1)",padding:"2px 6px",borderRadius:"4px",border:"1px solid var(--color-warning)"},children:"録音中"})]}),(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["ファイル: ",((e,t=50)=>{if(e.length<=t)return e;const n=e.lastIndexOf(".");if(n>0){const r=e.substring(0,n),o=e.substring(n);return r.substring(0,t-o.length-3)+"..."+o}return e.substring(0,t-3)+"..."})(e,45)]})]}),(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"2px",minWidth:"120px"},children:[(0,r.jsxs)("div",{style:{fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)"},children:[s.filter(e=>"completed"===e.status).length," / ",c," 完了"]}),h.failedCount>0&&(0,r.jsxs)("div",{style:{color:"var(--color-error)",fontSize:"var(--font-size-xs)"},children:["失敗: ",h.failedCount,"個"]}),h.averageTime>0&&(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-xs)"},children:["平均: ",(h.averageTime/1e3).toFixed(1),"秒"]}),e.includes("recording_")&&(0,r.jsx)("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-warning)",fontWeight:"var(--font-weight-medium)"},children:"リアルタイム処理中"})]})]}),(0,r.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"var(--spacing-sm)"},children:s.map(e=>(0,r.jsxs)("div",{id:`chunk-${e.chunkId}`,style:{padding:"var(--spacing-sm)",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--border-radius)",opacity:"waiting"===e.status?.6:1,position:"relative"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:e.segments.length>0?"var(--spacing-sm)":0},children:[(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)"},children:["チャンク ",e.sequenceNumber+1," (",g(e.startTime)," - ",g(e.endTime),")"]}),(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-xs)",color:"completed"===e.status?"var(--color-success)":"processing"===e.status?"var(--color-warning)":"failed"===e.status?"var(--color-error)":"var(--color-text-secondary)",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"2px"},children:[(0,r.jsxs)("div",{children:["waiting"===e.status&&"⏳ 待機中","processing"===e.status&&"🔄 処理中","completed"===e.status&&"✅ 完了","failed"===e.status&&"❌ 失敗"]}),e.processingTime&&"completed"===e.status&&(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(e.processingTime/1e3).toFixed(1),"秒"]})]})]}),"processing"===e.status&&(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",backgroundColor:"var(--color-warning)",animation:"pulse 1.5s ease-in-out infinite"}}),e.segments.length>0&&(0,r.jsx)("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-primary)",lineHeight:"1.5",padding:"var(--spacing-sm)",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)"},children:e.segments.map((e,t)=>(0,r.jsx)("span",{style:{marginRight:"4px"},children:e.text},t))}),"failed"===e.status&&e.error&&(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-error)",marginTop:"var(--spacing-sm)",padding:"var(--spacing-sm)",backgroundColor:"rgba(244, 71, 71, 0.1)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-error)"},children:["エラー: ",e.error]})]},e.chunkId))}),(0,r.jsxs)("div",{style:{marginTop:"var(--spacing-md)",paddingTop:"var(--spacing-sm)",borderTop:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:["チャンクサイズ: ",t,"秒, オーバーラップ: ",n,"秒",e.includes("recording_")&&(0,r.jsx)("span",{style:{marginLeft:"8px",color:"var(--color-warning)",fontWeight:"var(--font-weight-medium)"},children:"(録音中のリアルタイム処理)"})]}),(0,r.jsx)("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:d?"処理中...":"処理完了"})]})]}):null};var N=n(723);const L=({selectedFile:e,onTranscriptionComplete:t})=>{const{transcriptionDisplayData:n,setFileList:o,currentModel:i,setTranscriptionDisplayData:s}=q(),[l,c]=(0,a.useState)(null),u=a.useRef(null);console.log("🔥 URGENT: SpeechRecognition コンポーネントレンダリング:",{selectedFile:e?.filename,hasTranscriptionResult:!!l,hasTranscriptionDisplayData:!!n});const[d,f]=(0,a.useState)(null),[h,p]=(0,a.useState)(""),[g,m]=(0,a.useState)(new Set),[v,y]=(0,a.useState)(new Map),[b,w]=(0,a.useState)(!1),[x,k]=(0,a.useState)({chunkSize:N._.CHUNK.DEFAULT_SIZE,overlapSize:N._.CHUNK.DEFAULT_OVERLAP,autoScroll:N._.CHUNK.ENABLE_AUTO_SCROLL});(0,a.useEffect)(()=>{const n=n=>{const r=n.detail;console.log("新しい音声認識結果を受信:",r),c(r),(async()=>{try{const t=r.segments.reduce((e,t)=>e+(t.text?t.text.length:0),0),n=10*r.duration,a=Math.min(t/n*100,100),s={metadata:{audioFile:e?.filename||"",model:i,transcribedAt:(new Date).toISOString(),duration:r.duration,segmentCount:r.segments.length,language:r.language,speakers:[],coverage:a},segments:r.segments.map(e=>({start:e.start,end:e.end,text:e.text,speaker:void 0,isEdited:!1})),filePath:"",isModified:!1};e&&(await window.electronAPI.saveTranscriptionFile(e.filepath,s),console.log("文字起こしファイル自動保存完了"),setTimeout(async()=>{try{const t=e.filepath.substring(0,e.filepath.lastIndexOf("\\")),n=await window.electronAPI.getFileList(t),r=await Promise.all(n.map(async e=>{try{const t=await window.electronAPI.checkTranscriptionExists(e.filepath),n=t?await window.electronAPI.getTranscriptionPath(e.filepath):void 0;return{...e,hasTranscriptionFile:t,transcriptionPath:n,isRecording:!1}}catch(t){return console.error(`文字起こしファイル確認エラー (${e.filename}):`,t),{...e,hasTranscriptionFile:!1,transcriptionPath:void 0,isRecording:!1}}}));o(r),console.log("文字起こし完了後のファイル一覧更新が完了しました:",r.length,"ファイル"),console.log("文字起こしファイル付き:",r.filter(e=>e.hasTranscriptionFile).length,"件")}catch(e){console.error("ファイル一覧更新エラー:",e)}},500))}catch(e){console.error("文字起こしファイル自動保存エラー:",e)}})(),t&&t(r)};return window.addEventListener("transcriptionComplete",n),()=>{window.removeEventListener("transcriptionComplete",n)}},[e,t,o]),(0,a.useEffect)(()=>{console.log("ファイルベースリアルタイム文字起こし監視開始:",{selectedFile:e?.filename,isRecording:e?.isRecording});const t=t=>{const n=t.detail;if(console.log("🔥 CustomEvent受信:",{eventType:n?.type,hasTextData:!!n?.textData,segmentCount:n?.textData?.segments?.length||0,selectedFile:e?.filename,isRecording:e?.isRecording}),n&&n.textData){console.log("🔥 ファイルベースリアルタイム文字起こし更新:",{segmentCount:n.textData.segments.length,metadata:n.textData.metadata,segments:n.textData.segments.slice(0,3)});const e=Math.max(0,n.textData.metadata.lastUpdateTime-n.textData.metadata.startTime),t={language:"ja",duration:Math.max(0,e/1e3),segments:n.textData.segments.map(e=>({start:e.start,end:e.end,text:e.text,words:[]})),created_at:n.textData.metadata.lastUpdateTime,segment_count:n.textData.segments.length};console.log("🔥 transcriptionResult更新:",t),c(t),setTimeout(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},100)}else console.log("🔥 CustomEvent受信したがtextDataなし:",n)},n=e=>{const t=e.detail;"autoScroll"===t.type&&"enable"===t.action&&setTimeout(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},100)};return window.addEventListener("fileBasedRealtimeUpdate",t),window.addEventListener("fileBasedRealtimeUpdate",n),()=>{console.log("ファイルベースリアルタイム文字起こし監視停止"),window.removeEventListener("fileBasedRealtimeUpdate",t),window.removeEventListener("fileBasedRealtimeUpdate",n)}},[]),(0,a.useEffect)(()=>{if(!e)return void console.log("🎆 SpeechRecognition - selectedFileが存在しないため、chunkTranscriptionCompletedイベントリスナーを登録しません");const t=t=>{const n=t.detail;console.log("🎆 SpeechRecognition - リアルタイムチャンク完了イベント受信:",n),console.log("🎆 現在の選択ファイル:",e?{filename:e.filename,filepath:e.filepath}:"null"),e?(console.log("✅ selectedFile存在確認OK"),n.segments&&n.segments.length>0?(console.log("✅ セグメント存在確認OK:",n.segments.length,"セグメント"),console.log("📝 リアルタイムチャンク結果を表示に追加:",n.segments.length,"セグメント"),c(e=>{console.log("📊 setTranscriptionResult呼び出し - 前回の結果:",e);const t=[...e?.segments||[],...n.segments],r={language:e?.language||"ja",duration:Math.max(e?.duration||0,Math.max(...n.segments.map(e=>e.end),0)),segments:t,created_at:Date.now(),segment_count:t.length};return console.log("📊 更新後の文字起こし結果:",{totalSegments:r.segments.length,duration:r.duration,latestSegment:r.segments[r.segments.length-1]?.text?.substring(0,50)+"..."}),console.log("🔥 URGENT: setTranscriptionResult実行 - 新しい結果を設定"),setTimeout(()=>{console.log("🔥 URGENT: setTranscriptionResult実行後の状態確認 - クロージャーでの確認")},0),r})):console.log("❌ セグメントが空か存在しない:",n.segments)):console.log("❌ selectedFileが存在しない - このイベントは無視")};return console.log("🎆 SpeechRecognition - chunkTranscriptionCompleted イベントリスナー登録 - selectedFile:",e?.filename),window.addEventListener("chunkTranscriptionCompleted",t),()=>{console.log("🎆 SpeechRecognition - chunkTranscriptionCompleted イベントリスナー削除 - selectedFile:",e?.filename),window.removeEventListener("chunkTranscriptionCompleted",t)}},[e]),(0,a.useEffect)(()=>{console.log("🔥 URGENT: transcriptionResult状態変化:",{hasResult:!!l,segmentCount:l?.segments?.length||0,duration:l?.duration||0,latestSegment:l?.segments?.[l.segments.length-1]?.text?.substring(0,50)+"...",selectedFile:e?.filename||"null",fullResult:l}),l&&l.segments&&console.log("🔥 URGENT: transcriptionResult詳細:",{segments:l.segments.slice(0,3),totalSegments:l.segments.length,firstSegmentText:l.segments[0]?.text,lastSegmentText:l.segments[l.segments.length-1]?.text}),null===l&&(console.log("🔥 URGENT: transcriptionResult が null になりました！"),console.log("🔥 URGENT: selectedFile:",e?.filename||"null"),console.trace("transcriptionResult null 設定時のスタックトレース"))},[l,e]),(0,a.useEffect)(()=>{const t=async t=>{const{audioFilePath:n,transcriptionResult:r}=t.detail;console.log("文字起こしリフレッシュイベント受信:",n);try{if(f(null),p(""),m(new Set),y(new Map),e?.filepath.includes("recording_")||s(null),c(r),e){const t=e.filepath.substring(0,e.filepath.lastIndexOf("\\")),n=await window.electronAPI.getFileList(t),r=await Promise.all(n.map(async e=>{try{const t=await window.electronAPI.checkTranscriptionExists(e.filepath),n=t?await window.electronAPI.getTranscriptionPath(e.filepath):void 0;return{...e,hasTranscriptionFile:t,transcriptionPath:n,isRecording:!1}}catch(t){return console.error(`文字起こしファイル確認エラー (${e.filename}):`,t),{...e,hasTranscriptionFile:!1,transcriptionPath:void 0,isRecording:!1}}}));o(r),console.log("再文字起こし後のファイル一覧更新完了:",r.length,"ファイル")}const t=document.createElement("div");t.textContent="文字起こしが更新されました",t.style.cssText="\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          background: var(--color-success);\n          color: white;\n          padding: 12px 20px;\n          border-radius: 4px;\n          z-index: 1000;\n          font-size: 14px;\n        ",document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},3e3)}catch(e){console.error("文字起こしリフレッシュエラー:",e)}};return window.addEventListener("transcriptionRefresh",t),()=>{window.removeEventListener("transcriptionRefresh",t)}},[e,o,s]),(0,a.useEffect)(()=>{const e=e=>{const{totalChunks:t,chunkSize:n,overlapSize:r}=e.detail;console.log("チャンク分割文字起こし開始:",t,"チャンク"),w(!0),k({chunkSize:n||N._.CHUNK.DEFAULT_SIZE,overlapSize:r||N._.CHUNK.DEFAULT_OVERLAP,autoScroll:N._.CHUNK.ENABLE_AUTO_SCROLL})};return window.addEventListener("chunkTranscriptionStart",e),()=>{window.removeEventListener("chunkTranscriptionStart",e)}},[]),(0,a.useEffect)(()=>{const e=e=>{const t=e.detail;console.log("チャンク分割文字起こし完了:",t),w(!1),s(t)};return window.addEventListener("chunkTranscriptionComplete",e),()=>{window.removeEventListener("chunkTranscriptionComplete",e)}},[s]),(0,a.useEffect)(()=>{const e=e=>{e.ctrlKey&&"s"===e.key&&(e.preventDefault(),g.size>0&&P()),"Escape"===e.key&&null!==d&&(e.preventDefault(),T())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[g.size,d]);const S=(e,t)=>{f(e),p(t)},C=e=>{p(e.target.value)},E=e=>{const t=n||l;if(!t||!t.segments)return;const r=t.segments[e],o=r?.text?.trim()||"",a=h.trim();if(a!==o){if(m(t=>new Set(t).add(e)),y(t=>new Map(t).set(e,a)),l){const t=[...l.segments];t[e]={...t[e],text:a,isEdited:!0},c({...l,segments:t})}}else m(t=>{const n=new Set(t);return n.delete(e),n}),y(t=>{const n=new Map(t);return n.delete(e),n});f(null),p("")},T=()=>{f(null),p("")},_=(e,t)=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(e.preventDefault(),T()):(e.preventDefault(),E(t))},P=async()=>{const t=n||l;if(t&&e)try{const n=t.segments.map((e,t)=>({...e,text:F(e,t),isEdited:g.has(t)||e.isEdited||!1})),r={metadata:{...t.metadata,lastModified:(new Date).toISOString(),hasEdits:g.size>0},segments:n,filePath:"",isModified:g.size>0};await window.electronAPI.saveTranscriptionFile(e.filepath,r),console.log("編集済み文字起こしファイル保存完了");const o=document.createElement("div");o.textContent="文字起こしが保存されました",o.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: var(--color-success);\n        color: white;\n        padding: 12px 20px;\n        border-radius: 4px;\n        z-index: 1000;\n        font-size: 14px;\n      ",document.body.appendChild(o),setTimeout(()=>{document.body.removeChild(o)},3e3)}catch(e){console.error("文字起こしファイル保存エラー:",e),alert("文字起こしの保存に失敗しました")}},R=async()=>{const e=n||l;if(e)try{const t=e.segments.map((e,t)=>F(e,t)).filter(e=>e.length>0).join("\n");await navigator.clipboard.writeText(t);const n=document.createElement("div");n.textContent="クリップボードにコピーしました",n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: var(--color-accent);\n        color: white;\n        padding: 12px 20px;\n        border-radius: 4px;\n        z-index: 1000;\n        font-size: 14px;\n      ",document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},2e3)}catch(e){console.error("クリップボードコピーエラー:",e),alert("クリップボードへのコピーに失敗しました")}},F=(e,t)=>v.get(t)||e.text?.trim()||"";return console.log("🔥 URGENT: SpeechRecognition return:",{showChunkDisplay:b,selectedFile:e?.filename,isRecording:e?.filepath.includes("recording_"),hasTranscriptionResult:!!l}),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[b&&!e?.filepath.includes("recording_")&&(0,r.jsx)(A,{audioFileName:e?.filename||"",chunkSize:x.chunkSize,overlapSize:x.overlapSize,autoScroll:x.autoScroll}),(!b||e?.filepath.includes("recording_"))&&(()=>{const t=l&&(e?.filepath.includes("recording_")||e?.isRecording||l.created_at>Date.now()-3e5)?(console.log("🔥 データ選択: 録音中のファイル - transcriptionResult使用 (セグメント数:",l.segments?.length||0,")"),l):n&&n.segments?.length>0?(console.log("🔥 データ選択: 文字起こしファイル - transcriptionDisplayData使用"),n):l&&l.segments?.length>0?(console.log("🔥 データ選択: フォールバック - transcriptionResult使用"),l):(console.log("🔥 データ選択: データなし"),null);if(console.log("🔥 URGENT: renderTranscriptionData - データ選択:",{selectedFile:e?.filename,isRecording:e?.filepath.includes("recording_"),isRecordingFlag:e?.isRecording,hasTranscriptionResult:!!l,hasTranscriptionDisplayData:!!n,selectedData:t?"data exists":"data is null",transcriptionResultSegments:l?.segments?.length||0,transcriptionDisplayDataSegments:n?.segments?.length||0,selectedDataSource:t===l?"transcriptionResult":t===n?"transcriptionDisplayData":"null",dataStructure:t?Object.keys(t):"no data",condition1:!!(l&&(e?.filepath.includes("recording_")||e?.isRecording)&&l.segments?.length>0),condition2:!!(n&&n.segments?.length>0),condition3:!!(l&&l.segments?.length>0)}),t&&console.log("🔥 URGENT: 選択されたデータの詳細:",{hasSegments:!!t.segments,segmentsLength:t.segments?.length||0,firstSegment:t.segments?.[0],metadata:t.metadata,structure:t}),!t)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"var(--spacing-sm) var(--spacing-md)",marginBottom:"var(--spacing-sm)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)"},children:(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:["📄 ",e?.filename||"ファイル未選択"]})}),(0,r.jsxs)("div",{style:{padding:"var(--spacing-xl)",textAlign:"center",color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",lineHeight:"1.6"},children:[(0,r.jsx)("div",{style:{marginBottom:"var(--spacing-md)"},children:e?.isRecording||l&&l.created_at>Date.now()-3e5?"🎙️ 録音中...":"📝 文字起こし結果がありません"}),(0,r.jsx)("div",{style:{fontSize:"var(--font-size-sm)"},children:e?.isRecording||l&&l.created_at>Date.now()-3e5?"リアルタイム文字起こし処理中です":"音声ファイルを選択して音声認識を実行してください"})]})]});if(t.metadata&&(t.content||t.segments)||t.segments&&Array.isArray(t.segments)){const n=t.segments||t.content?.segments||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"var(--spacing-sm) var(--spacing-md)",marginBottom:"var(--spacing-sm)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)"},children:(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:["📄 ",e?.filename||"ファイル未選択"]})}),(0,r.jsxs)("div",{style:{padding:"var(--spacing-md)",marginBottom:"var(--spacing-md)",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"var(--spacing-md)"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-sm)"},children:[(0,r.jsx)("button",{className:"btn btn--secondary",style:{fontSize:"var(--font-size-sm)",padding:"4px 8px"},onClick:P,disabled:0===g.size,title:g.size>0?"編集内容を保存":"編集された内容がありません",children:"💾 保存"}),(0,r.jsx)("button",{className:"btn btn--secondary",style:{fontSize:"var(--font-size-sm)",padding:"4px 8px"},onClick:R,children:"📋 コピー"}),g.size>0&&(0,r.jsxs)("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-warning)",alignSelf:"center",fontWeight:"var(--font-weight-medium)"},children:[g.size,"件編集済み"]})]}),(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:["モデル: ",t.metadata?.model||"リアルタイム文字起こし"," | 言語: ",t.language||t.content?.language||t.metadata?.language||"日本語"," | 時間: ",t.duration?(t.duration/1e3).toFixed(1):t.metadata?.duration?t.metadata.duration.toFixed(1):"不明","秒 | セグメント: ",n.length,"個 | カバレッジ: ",t.metadata?.coverage?t.metadata.coverage.toFixed(1):"不明","%"]})]}),(0,r.jsx)("div",{style:{flex:1,backgroundColor:"var(--color-bg-primary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)",overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,r.jsx)("div",{ref:u,style:{flex:1,overflowY:"auto",padding:"0"},children:0===n.length?(0,r.jsxs)("div",{style:{padding:"var(--spacing-xl)",textAlign:"center",color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",lineHeight:"1.6"},children:[(0,r.jsx)("div",{style:{marginBottom:"var(--spacing-md)"},children:e?.isRecording||l&&l.created_at>Date.now()-3e5?"🎙️ 録音中...":"📝 文字起こし結果がありません"}),(0,r.jsx)("div",{style:{fontSize:"var(--font-size-sm)"},children:e?.isRecording||l&&l.created_at>Date.now()-3e5?"リアルタイム文字起こし処理中です":"音声ファイルを選択して音声認識を実行してください"})]}):n.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",padding:"var(--spacing-sm) 0",borderBottom:t<n.length-1?"1px solid var(--color-border)":"none",backgroundColor:t%2==0?"var(--color-bg-secondary)":"transparent"},children:[(0,r.jsxs)("div",{style:{width:"120px",minWidth:"120px",padding:"0 var(--spacing-md)",fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",fontFamily:"var(--font-family-mono)",textAlign:"right",backgroundColor:"var(--color-bg-tertiary)",borderRight:"1px solid var(--color-border)",lineHeight:"1.6",userSelect:"none"},children:[e.start?e.start.toFixed(1):"0.0","s"]}),(0,r.jsx)("div",{style:{flex:1,padding:"0 var(--spacing-md)",fontSize:"var(--font-size-md)",color:"var(--color-text-primary)",lineHeight:"1.6",cursor:"text",position:"relative"},children:d===t?(0,r.jsx)("textarea",{value:h,onChange:C,onKeyDown:e=>_(e,t),onBlur:()=>E(t),autoFocus:!0,style:{width:"100%",minHeight:"40px",padding:"4px",border:"1px solid var(--color-accent)",borderRadius:"4px",fontSize:"var(--font-size-md)",fontFamily:"inherit",lineHeight:"1.6",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",resize:"vertical"}}):(0,r.jsxs)("div",{onDoubleClick:()=>S(t,F(e,t)),style:{minHeight:"24px",padding:"4px",borderRadius:"4px",backgroundColor:g.has(t)?"rgba(255, 193, 7, 0.1)":"transparent",border:g.has(t)?"1px solid rgba(255, 193, 7, 0.3)":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>{g.has(t)||(e.currentTarget.style.backgroundColor="rgba(0, 123, 255, 0.05)",e.currentTarget.style.border="1px solid rgba(0, 123, 255, 0.2)")},onMouseLeave:e=>{g.has(t)||(e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.border="1px solid transparent")},title:"ダブルクリックで編集",children:[F(e,t),g.has(t)&&(0,r.jsx)("span",{style:{position:"absolute",top:"-2px",right:"-2px",fontSize:"10px",backgroundColor:"var(--color-warning)",color:"white",borderRadius:"50%",width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"✎"})]})})]},t))})})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"var(--spacing-sm) var(--spacing-md)",marginBottom:"var(--spacing-sm)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)"},children:(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:["📄 ",e?.filename||"ファイル未選択"]})}),(0,r.jsxs)("div",{style:{padding:"var(--spacing-md)",marginBottom:"var(--spacing-md)",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"var(--spacing-md)"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-sm)"},children:[(0,r.jsx)("button",{className:"btn btn--secondary",style:{fontSize:"var(--font-size-sm)",padding:"4px 8px"},onClick:P,disabled:0===g.size,title:g.size>0?"編集内容を保存":"編集された内容がありません",children:"💾 保存"}),(0,r.jsx)("button",{className:"btn btn--secondary",style:{fontSize:"var(--font-size-sm)",padding:"4px 8px"},onClick:R,children:"📋 コピー"}),g.size>0&&(0,r.jsxs)("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-warning)",alignSelf:"center",fontWeight:"var(--font-weight-medium)"},children:[g.size,"件編集済み"]})]}),(0,r.jsxs)("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:["言語: ",t.language," | 時間: ",t.duration?t.duration.toFixed(1):"不明","秒 | セグメント: ",t.segment_count||0,"個"]})]}),(0,r.jsx)("div",{style:{flex:1,backgroundColor:"var(--color-bg-primary)",borderRadius:"var(--border-radius)",border:"1px solid var(--color-border)",overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,r.jsx)("div",{ref:u,style:{flex:1,overflowY:"auto",padding:"0"},children:(t.segments||[]).map((e,n)=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",padding:"var(--spacing-sm) 0",borderBottom:n<(t.segments||[]).length-1?"1px solid var(--color-border)":"none",backgroundColor:n%2==0?"var(--color-bg-secondary)":"transparent"},children:[(0,r.jsxs)("div",{style:{width:"120px",minWidth:"120px",padding:"0 var(--spacing-md)",fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",fontFamily:"var(--font-family-mono)",textAlign:"right",backgroundColor:"var(--color-bg-tertiary)",borderRight:"1px solid var(--color-border)",lineHeight:"1.6",userSelect:"none"},children:[e.start?e.start.toFixed(1):"0.0","s"]}),(0,r.jsx)("div",{style:{flex:1,padding:"0 var(--spacing-md)",fontSize:"var(--font-size-md)",color:"var(--color-text-primary)",lineHeight:"1.6",cursor:"text",position:"relative"},children:d===n?(0,r.jsx)("textarea",{value:h,onChange:C,onKeyDown:e=>_(e,n),onBlur:()=>E(n),autoFocus:!0,style:{width:"100%",minHeight:"40px",padding:"4px",border:"1px solid var(--color-accent)",borderRadius:"4px",fontSize:"var(--font-size-md)",fontFamily:"inherit",lineHeight:"1.6",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",resize:"vertical"}}):(0,r.jsxs)("div",{onDoubleClick:()=>S(n,F(e,n)),style:{minHeight:"24px",padding:"4px",borderRadius:"4px",backgroundColor:g.has(n)?"rgba(255, 193, 7, 0.1)":"transparent",border:g.has(n)?"1px solid rgba(255, 193, 7, 0.3)":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>{g.has(n)||(e.currentTarget.style.backgroundColor="rgba(0, 123, 255, 0.05)",e.currentTarget.style.border="1px solid rgba(0, 123, 255, 0.2)")},onMouseLeave:e=>{g.has(n)||(e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.border="1px solid transparent")},title:"ダブルクリックで編集",children:[F(e,n),g.has(n)&&(0,r.jsx)("span",{style:{position:"absolute",top:"-2px",right:"-2px",fontSize:"10px",backgroundColor:"var(--color-warning)",color:"white",borderRadius:"50%",width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"✎"})]})})]},n))})})]})})()]})};var M=n(454);class D{constructor(e=2){this.queue=[],this.processing=new Map,this.completed=new Map,this.failed=new Map,this.maxConcurrency=2,this.isProcessing=!1,this.processingCallbacks=[],this.progressCallbacks=[],this.maxConcurrency=e,this.stats={totalItems:0,pendingItems:0,processingItems:0,completedItems:0,failedItems:0,averageProcessingTime:0,totalProcessingTime:0,queueStartTime:0}}enqueue(e,t=0){const n={id:e.id,chunk:e,priority:t,retryCount:0,maxRetries:3,addedAt:Date.now()},r=this.queue.findIndex(e=>e.priority<t);-1===r?this.queue.push(n):this.queue.splice(r,0,n),this.stats.totalItems++,this.stats.pendingItems++,this.updateStats(),console.log(`チャンクをキューに追加: ${e.id} (優先度: ${t})`)}async startProcessing(){if(this.isProcessing)return void console.warn("既に処理中です");this.isProcessing=!0,this.stats.queueStartTime=Date.now(),console.log("チャンクキュー処理開始");const e=[];for(let t=0;t<this.maxConcurrency;t++)e.push(this.processNext());await Promise.all(e),this.isProcessing=!1,console.log("チャンクキュー処理完了")}async processNext(){for(;this.isProcessing&&this.queue.length>0;){const e=this.queue.shift();if(e){this.stats.pendingItems--,this.stats.processingItems++,this.processing.set(e.id,e),e.startedAt=Date.now();try{console.log(`チャンク処理開始: ${e.id} (${e.retryCount+1}/${e.maxRetries+1}回目)`);const t=await this.processChunk(e.chunk);e.completedAt=Date.now();const n=e.completedAt-e.startedAt;this.processing.delete(e.id),this.completed.set(e.id,t),this.stats.processingItems--,this.stats.completedItems++,this.stats.totalProcessingTime+=n,this.stats.averageProcessingTime=this.stats.totalProcessingTime/this.stats.completedItems,this.processingCallbacks.forEach(e=>e(t)),console.log(`チャンク処理完了: ${e.id} (処理時間: ${n}ms)`)}catch(t){if(console.error(`チャンク処理エラー: ${e.id}`,t),e.retryCount<e.maxRetries)e.retryCount++,e.error=String(t),this.processing.delete(e.id),e.priority=Math.max(e.priority-1,0),this.queue.push(e),this.stats.processingItems--,this.stats.pendingItems++,console.log(`チャンクを再キューイング: ${e.id} (リトライ: ${e.retryCount}/${e.maxRetries})`);else{e.error=String(t),this.processing.delete(e.id),this.failed.set(e.id,e),this.stats.processingItems--,this.stats.failedItems++,console.error(`チャンク処理最終失敗: ${e.id}`);const n={chunkId:e.chunk.id,sequenceNumber:e.chunk.sequenceNumber,status:"failed",segments:[],confidence:0,processingTime:0,error:String(t)};this.processingCallbacks.forEach(e=>e(n))}}this.updateStats()}}}async processChunk(e){if(e.id.startsWith("pending_chunk_")||e.id.startsWith("recording_live_chunk_")||e.id.startsWith("safe_recording_chunk_")||e.id.startsWith("safe_minimal_chunk_")||e.id.startsWith("live_real_chunk_")||e.id.startsWith("recording_")){console.log(`🎆 録音中チャンク ${e.id} を処理中 - リアルタイム文字起こしを実行`);try{const t=await this.createTempAudioFile(e);try{console.log(`📝 録音中チャンク ${e.id} の文字起こしを開始`);const n=await window.electronAPI.speechTranscribe(t);return console.log(`📝 録音中チャンク ${e.id} の文字起こし完了:`,{segments:n.segments.length,duration:n.duration,language:n.language}),{chunkId:e.id,sequenceNumber:e.sequenceNumber,status:"completed",segments:n.segments.map(t=>({...t,start:t.start+e.startTime,end:t.end+e.startTime})),confidence:n.segments.length>0?.8:0,processingTime:0}}finally{try{await window.electronAPI.deleteFile(t)}catch(e){console.warn("録音中チャンクの一時ファイル削除エラー:",e)}}}catch(t){console.error(`🚨 録音中チャンク ${e.id} の文字起こしエラー:`,t);const n={chunkId:e.id,sequenceNumber:e.sequenceNumber,status:"completed",segments:[{start:e.startTime,end:e.endTime,text:`[録音中チャンク ${e.sequenceNumber+1}: ${e.startTime.toFixed(1)}秒-${e.endTime.toFixed(1)}秒] 文字起こし処理中にエラーが発生しました。`}],confidence:0,processingTime:1e3,error:String(t)};return console.log(`🎆 録音中チャンク ${e.id} のエラー処理完了 - フォールバック結果を返しました`),n}}const t=await this.createTempAudioFile(e);try{const n=await window.electronAPI.speechTranscribe(t);return{chunkId:e.id,sequenceNumber:e.sequenceNumber,status:"completed",segments:n.segments.map(t=>({...t,start:t.start+e.startTime,end:t.end+e.startTime})),confidence:n.segments.length>0?.8:0,processingTime:0}}finally{try{await window.electronAPI.deleteFile(t)}catch(e){console.warn("一時ファイル削除エラー:",e)}}}async createTempAudioFile(e){const t=`chunk_${e.id}_${Date.now()}.wav`,{AudioChunkProcessor:r}=await Promise.resolve().then(n.bind(n,454)),o=(new r).createWavBuffer(e);return await window.electronAPI.saveFile(o,t)}updateStats(){this.progressCallbacks.forEach(e=>e(this.stats))}stop(){this.isProcessing=!1,console.log("チャンクキュー処理停止")}getCompletedResults(){return new Map(this.completed)}getFailedItems(){return new Map(this.failed)}getStats(){return{...this.stats}}onProcessingComplete(e){this.processingCallbacks.push(e)}onProgress(e){this.progressCallbacks.push(e)}clearCallbacks(){this.processingCallbacks=[],this.progressCallbacks=[]}clear(){this.queue=[],this.processing.clear(),this.completed.clear(),this.failed.clear(),this.stats={totalItems:0,pendingItems:0,processingItems:0,completedItems:0,failedItems:0,averageProcessingTime:0,totalProcessingTime:0,queueStartTime:0}}}class j{constructor(e){this.settings={overlapThreshold:N._.CONSOLIDATION.OVERLAP_THRESHOLD,qualityThreshold:N._.CONSOLIDATION.QUALITY_THRESHOLD,enableTextSmoothing:!0,enableTimeAdjustment:!0,maxGapFill:N._.CONSOLIDATION.MAX_GAP_FILL,...e},this.stats={totalChunks:0,processedChunks:0,duplicatesRemoved:0,segmentsConsolidated:0,timeAdjustments:0,qualityScore:0,coveragePercentage:0}}consolidate(e,t){console.log("結果統合開始:",e.length,"チャンク"),this.stats.totalChunks=e.length,this.stats.processedChunks=0;const n=e.filter(e=>"completed"===e.status).sort((e,t)=>e.sequenceNumber-t.sequenceNumber);if(this.stats.processedChunks=n.length,0===n.length)return console.warn("統合可能なチャンクがありません"),this.createEmptyTranscriptionFile(t);const r=this.collectAllSegments(n);console.log("収集した生セグメント数:",r.length);const o=this.removeDuplicates(r);console.log("重複除去後セグメント数:",o.length);const a=this.adjustTimeAlignment(o);console.log("時間軸調整後セグメント数:",a.length);const i=this.filterByQuality(a);console.log("品質フィルタ後セグメント数:",i.length);const s=this.smoothText(i);console.log("テキスト平滑化後セグメント数:",s.length);const l=this.fillGaps(s);console.log("ギャップ補完後セグメント数:",l.length),this.calculateFinalStats(l,n);const c=this.createTranscriptionFile(l,t,n);return console.log("結果統合完了:",{totalSegments:c.segments.length,coverage:c.metadata.coverage,quality:this.stats.qualityScore}),c}collectAllSegments(e){const t=[];return e.forEach(e=>{e.segments.forEach(n=>{t.push({start:n.start,end:n.end,text:n.text,isEdited:!1,confidence:e.confidence})})}),t.sort((e,t)=>e.start-t.start)}removeDuplicates(e){const t=[],n=this.settings.overlapThreshold;for(let r=0;r<e.length;r++){const o=e[r];let a=!1;for(let e=t.length-1;e>=0;e--){const r=t[e];if(r.end<o.start-n)break;if(this.isOverlapping(o,r,n)){a=!0,((o.confidence||0)>(r.confidence||0)||(o.confidence||0)===(r.confidence||0)&&o.text.length>r.text.length)&&(t[e]=o),this.stats.duplicatesRemoved++;break}}a||t.push(o)}return t}isOverlapping(e,t,n){const r=Math.min(e.end,t.end)-Math.max(e.start,t.start),o=Math.min(e.end-e.start,t.end-t.start);return r>n&&r>.5*o}adjustTimeAlignment(e){if(!this.settings.enableTimeAdjustment)return e;const t=[];for(let n=0;n<e.length;n++){const r={...e[n]};if(n>0){const e=t[n-1],o=r.start-e.end;if(o>0&&o<.5){const t=e.end+o/2;e.end=t,r.start=t,this.stats.timeAdjustments++}}t.push(r)}return t}filterByQuality(e){return e.filter(e=>!((e.confidence||0)<this.settings.qualityThreshold||e.text.trim().length<2||e.end-e.start<.1))}smoothText(e){return this.settings.enableTextSmoothing?e.map(e=>({...e,text:this.smoothTextContent(e.text)})):e}smoothTextContent(e){return e.replace(/\s+/g," ").replace(/([。．！？])\s*([あ-んア-ン])/g,"$1 $2").replace(/([、，])\s*/g,"$1 ").trim()}fillGaps(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(t.push(r),n<e.length-1){const o=e[n+1];o.start-r.end>this.settings.maxGapFill&&t.push({start:r.end,end:o.start,text:"[無音]",isEdited:!1,confidence:0})}}return t}calculateFinalStats(e,t){this.stats.segmentsConsolidated=e.length;const n=e.reduce((e,t)=>e+(t.confidence||0),0);this.stats.qualityScore=e.length>0?n/e.length:0;const r=e.length>0?Math.max(...e.map(e=>e.end)):0,o=e.reduce((e,t)=>e+(t.end-t.start),0);this.stats.coveragePercentage=r>0?o/r*100:0}createTranscriptionFile(e,t,n){const r=t.split("\\").pop()||t,o=e.length>0?Math.max(...e.map(e=>e.end)):0;return{metadata:{audioFile:r,model:"chunk-transcription-v2",transcribedAt:(new Date).toISOString(),duration:o,segmentCount:e.length,language:"ja",speakers:[],coverage:this.stats.coveragePercentage,chunkCount:n.length,qualityScore:this.stats.qualityScore},segments:e.map(e=>({start:e.start,end:e.end,text:e.text,speaker:void 0,isEdited:!1})),filePath:"",isModified:!1}}createEmptyTranscriptionFile(e){return{metadata:{audioFile:e.split("\\").pop()||e,model:"chunk-transcription-v2",transcribedAt:(new Date).toISOString(),duration:0,segmentCount:0,language:"ja",speakers:[],coverage:0},segments:[],filePath:"",isModified:!1}}getStats(){return{...this.stats}}updateSettings(e){this.settings={...this.settings,...e}}}class ${constructor(){this.isProcessing=!1,this.processingInterval=null,this.lastProcessedOffset=0,this.chunkSequence=0,this.processingChunkId=null,this.audioFilePath="",this.chunkSize=N._.CHUNK.DEFAULT_SIZE,this.onChunkCompletedCallbacks=[],this.processedChunks=new Map,this.consecutiveErrorCount=0,this.lastErrorTime=0,this.serverCheckInterval=null,this.isServerChecking=!1}async startRealTimeTranscription(e,t=N._.CHUNK.DEFAULT_SIZE){if(this.isProcessing)console.warn("🔄 既にリアルタイム処理中です");else{console.log("🎆 リアルタイム文字起こし開始:",e),console.log("🎆 設定 - チャンクサイズ:",t,"秒"),this.audioFilePath=e,this.chunkSize=t,this.isProcessing=!0,this.lastProcessedOffset=0,this.chunkSequence=0,this.processingChunkId=null,this.processedChunks.clear(),this.startServerMonitoring(),console.log("🔍 初回データチェックを実行");try{await this.checkAndProcessNewData()}catch(e){console.error("🚨 初回データチェックエラー:",e)}this.processingInterval=setInterval(async()=>{try{await this.checkAndProcessNewData()}catch(e){console.error("🚨 リアルタイム処理エラー:",e)}},N._.REALTIME.PROCESSING_INTERVAL),console.log(`✅ リアルタイム文字起こしを開始しました (${N._.REALTIME.PROCESSING_INTERVAL}ms間隔)`)}}stop(){console.log("リアルタイム文字起こし停止"),this.isProcessing=!1,this.processingInterval&&(clearInterval(this.processingInterval),this.processingInterval=null),this.stopServerMonitoring(),this.clearProcessingFlags(),this.forceReset()}clearProcessingFlags(){console.log("🧹 処理中フラグクリア開始");const e=Array.from(this.processedChunks.keys()).filter(e=>e.startsWith("processing_"));console.log(`🧹 削除対象の処理中フラグ: ${e.join(", ")}`),e.forEach(e=>{const t=this.processedChunks.delete(e);console.log(`🧹 停止時 - 処理中フラグ削除: ${e} - ${t?"成功":"失敗"}`)}),console.log(`🧹 処理中フラグクリア完了: ${e.length}個削除`);const t=Array.from(this.processedChunks.keys()).filter(e=>e.startsWith("processing_"));t.length>0&&console.warn(`⚠️ 削除後にも処理中フラグが残っています: ${t.join(", ")}`)}cleanupOldProcessingFlags(){const e=Date.now(),t=Array.from(this.processedChunks.keys()).filter(e=>e.startsWith("processing_"));let n=0;t.forEach(t=>{const r=this.processedChunks.get(t);r&&r.processingTime&&e-r.processingTime>18e4&&this.processedChunks.delete(t)&&(n++,console.log(`🧹 古い処理中フラグを削除: ${t} (経過時間: ${Math.round((e-r.processingTime)/1e3)}秒)`))}),n>0&&console.log(`🧹 古い処理中フラグクリーンアップ完了: ${n}個削除`)}async checkAndProcessNewData(){if(this.isProcessing){if(this.cleanupOldProcessingFlags(),this.consecutiveErrorCount>=3){if(Date.now()-this.lastErrorTime<N._.REALTIME.ERROR_RECOVERY_DELAY)return void console.log(`🔄 エラー回復待機中... (連続エラー: ${this.consecutiveErrorCount}回)`);console.log("🔄 エラー回復待機終了 - 処理を再開します"),this.consecutiveErrorCount=0}try{const e=await window.electronAPI.getFileSize(this.audioFilePath);if(console.log(`📊 ファイルサイズチェック: ${e} bytes (前回処理位置: ${this.lastProcessedOffset})`),e>this.lastProcessedOffset&&e>N._.REALTIME.MIN_FILE_SIZE){console.log(`📈 新しいデータを検出: ${e-this.lastProcessedOffset} bytes`);const t=Math.max((e-this.lastProcessedOffset)/N._.REALTIME.BYTES_PER_SECOND,1),n=N._.REALTIME.MIN_PROCESSING_TIME,r=this.chunkSize,o=0===this.chunkSequence,a=o?Math.min(n,this.chunkSize):n;t>=a?(console.log(`🎯 処理開始条件満たしました: ${t.toFixed(1)}秒分 (最小: ${a}秒)${o?" [初回チャンク]":""}`),console.log(`🎯 チャンクサイズ設定: ${r}秒`),await this.processNewChunk(e,r)):console.log(`⏳ データ蓄積待機中: ${t.toFixed(1)}秒分 (最小: ${a}秒)${o?" [初回チャンク]":""}`)}else e<=N._.REALTIME.MIN_FILE_SIZE&&console.log("📉 ファイルサイズが小さく、録音開始直後の可能性があります")}catch(e){console.error("新しいデータのチェック中にエラー:",e)}}}async processNewChunk(e,t){const n=`realtime_chunk_${this.chunkSequence}`,r=this.chunkSequence*this.chunkSize,o=r+this.chunkSize;if(console.log(`🎯 チャンク時間範囲: ${r.toFixed(1)}s - ${o.toFixed(1)}s (実際サイズ: ${t}秒, 設定サイズ: ${this.chunkSize}秒, シーケンス: ${this.chunkSequence})`),this.processedChunks.has(n))return void console.log(`⏭️ チャンク ${n} は既に処理済みのためスキップ`);if(this.processingChunkId===n)return void console.log(`🔄 チャンク ${n} は既に処理中のためスキップ (processingChunkId: ${this.processingChunkId})`);const a=`processing_${n}`;if(this.processedChunks.has(a)){console.log(`🔄 チャンク ${n} は既に処理中のためスキップ`);const t=this.processedChunks.get(a);if(t){const n=(Date.now()-(t.processingTime||0))/1e3;if(console.log(`🔄 処理中フラグの詳細: ${a} - 経過時間: ${n.toFixed(1)}秒`),n>180)return console.warn(`⚠️ 古い処理中フラグを強制削除: ${a} (経過時間: ${n.toFixed(1)}秒)`),this.processedChunks.delete(a),this.processingChunkId=null,this.processNewChunk(e,this.chunkSize)}return}this.processingChunkId=n,this.processedChunks.set(a,{chunkId:n,sequenceNumber:this.chunkSequence,status:"processing",segments:[],confidence:0,processingTime:Date.now()}),console.log(`🎯 新しいチャンク処理開始: ${n} (${r.toFixed(1)}s - ${o.toFixed(1)}s)`),console.log(`🏷️ 処理中フラグ設定: ${a} - 総チャンク数: ${this.processedChunks.size}`);let i=!1;try{const t=await this.transcribeRecordingChunk(this.audioFilePath,n,this.chunkSequence,r,o);t?(this.processedChunks.set(n,t),this.onChunkCompletedCallbacks.forEach(e=>e(t)),console.log(`✅ チャンク処理完了: ${n} - "${t.segments.map(e=>e.text).join(" ")}"`),this.lastProcessedOffset=e,this.chunkSequence++,console.log(`🎯 チャンク処理完了 - 次のチャンクの準備: lastProcessedOffset=${this.lastProcessedOffset}, chunkSequence=${this.chunkSequence}`),i=!0):(this.lastProcessedOffset=e,this.chunkSequence++,console.log(`🎯 結果null - 次のチャンクの準備: lastProcessedOffset=${this.lastProcessedOffset}, chunkSequence=${this.chunkSequence}`),i=!0)}catch(t){console.error(`❌ チャンク ${n} の処理エラー:`,t);const a=String(t);if(a.includes("server")||a.includes("connection")||a.includes("timeout")||a.includes("タイムアウト")||a.includes("切断")){console.warn("⚠️ チャンク処理でサーバー関連のエラーを検出"),this.consecutiveErrorCount++,this.lastErrorTime=Date.now();try{await this.checkServerStatus(),await new Promise(e=>setTimeout(e,3e3))}catch(e){console.error("サーバー状態確認エラー:",e)}}const i={chunkId:n,sequenceNumber:this.chunkSequence,status:"failed",segments:[{start:r,end:o,text:`[エラー] チャンク ${this.chunkSequence+1}の処理中にエラーが発生しました`}],confidence:0,processingTime:0,error:String(t)};this.processedChunks.set(n,i),this.onChunkCompletedCallbacks.forEach(e=>e(i)),this.lastProcessedOffset=e,this.chunkSequence++,console.log(`🎯 エラー時 - 次のチャンクの準備: lastProcessedOffset=${this.lastProcessedOffset}, chunkSequence=${this.chunkSequence}`)}finally{if(!i){const e=this.processedChunks.delete(a);this.processingChunkId=null,console.log(`🧹 finally - 処理中フラグ削除: ${a} - ${e?"成功":"失敗または既に削除済み"}`)}}}async transcribeRecordingChunk(e,t,n,r,o){let a=0;for(;a<=N._.REALTIME.MAX_RETRY_COUNT;)try{console.log(`📝 録音中チャンク文字起こし開始: ${t} (試行 ${a+1}/${N._.REALTIME.MAX_RETRY_COUNT+1})`);const i=await this.createTempWavFromRecording(e,t,r,o);if(!i)return console.warn(`WAVファイル作成に失敗: ${t}`),null;try{if(!await this.ensureServerRunning())return console.error("❌ サーバーが利用できません - 処理をスキップ"),null;console.log(`🔊 文字起こしAPI呼び出し: ${i}`);const e=await window.electronAPI.speechTranscribe(i);console.log(`📋 文字起こし結果: ${e.segments.length}セグメント, ${e.duration}秒`),this.consecutiveErrorCount=0;const r={chunkId:t,sequenceNumber:n,status:"completed",segments:e.segments.map(e=>({...e,start:e.start,end:e.end})),confidence:e.segments.length>0?.8:0,processingTime:Date.now()};return console.log(`🎵 時間軸調整完了: ${e.segments.length}セグメント`),console.log(`🎵 調整後の時間範囲: ${r.segments.length>0?r.segments[0].start.toFixed(1):"N/A"}s - ${r.segments.length>0?r.segments[r.segments.length-1].end.toFixed(1):"N/A"}s`),console.log(`🧹 処理完了 - 処理中フラグを削除: processing_${t}`),r}finally{try{await window.electronAPI.deleteFile(i),console.log(`🗑️ 一時ファイル削除完了: ${i}`)}catch(e){console.warn("一時ファイル削除エラー:",e)}}}catch(e){console.error(`録音中チャンク文字起こしエラー (${t}) - 試行 ${a+1}:`,e),a++,this.consecutiveErrorCount++,this.lastErrorTime=Date.now();const n=String(e);if(n.includes("server")||n.includes("connection")||n.includes("timeout")||n.includes("タイムアウト")){console.warn("⚠️ サーバー関連のエラーを検出 - サーバー状態を確認");try{await this.checkServerStatus(),await new Promise(e=>setTimeout(e,3e3))}catch(e){console.error("サーバー状態確認エラー:",e)}}if(a>N._.REALTIME.MAX_RETRY_COUNT)throw console.error(`❌ チャンク ${t} の処理を諦めます (最大リトライ回数に達しました)`),e;let r=N._.REALTIME.RETRY_DELAY;(n.includes("server")||n.includes("connection"))&&(r=1e4),console.log(`⏳ ${r}ms後にリトライします...`),await new Promise(e=>setTimeout(e,r))}return null}async createTempWavFromRecording(e,t,n,r){try{console.log(`🎵 録音中ファイルからWAV作成開始: ${e}`),console.log(`🎵 時間範囲: ${n.toFixed(1)}s - ${r.toFixed(1)}s (チャンクサイズ: ${r-n}秒)`);const o=r-n,a=o*N._.REALTIME.BYTES_PER_SECOND;console.log(`🎵 チャンクサイズ制限: ${a} bytes (${o}秒分)`);const i=await window.electronAPI.loadPartialAudioFile(e);if(!i)return console.warn("部分データの取得に失敗"),null;const s=await fetch(i),l=await s.arrayBuffer();if(0===l.byteLength)return console.warn("取得したデータが空です"),null;const c=Math.floor(n*N._.REALTIME.BYTES_PER_SECOND),u=Math.min(Math.floor(r*N._.REALTIME.BYTES_PER_SECOND),l.byteLength);if(console.log(`🎵 時間ベース抽出: ${c} - ${u} bytes (開始: ${n}s, 終了: ${r}s)`),u<=c)return console.warn(`⚠️ 無効な時間範囲: ${c} >= ${u}`),null;if(c>=l.byteLength)return console.log(`⏳ 開始位置 ${c} がファイルサイズ ${l.byteLength} を超過 - データ不足`),null;let d=c,f=u;0===this.chunkSequence&&(console.log("🔄 初回チャンクの処理: 開始位置を0に調整"),d=0,f=Math.min(Math.floor(this.chunkSize*N._.REALTIME.BYTES_PER_SECOND),l.byteLength),console.log(`🎵 調整後の時間ベース抽出: ${d} - ${f} bytes`));let h=l.slice(d,f);if(console.log(`🎵 抽出されたデータサイズ: ${h.byteLength} bytes (推定時間: ${(h.byteLength/N._.REALTIME.BYTES_PER_SECOND).toFixed(1)}秒)`),0===h.byteLength)return console.warn("抽出されたデータが空です"),null;const p=this.chunkSize*N._.REALTIME.BYTES_PER_SECOND,g=1.5*p;if(h.byteLength>g){console.warn(`⚠️ 抽出データが期待チャンクサイズを大幅に超過: ${h.byteLength} bytes`),console.warn(`⚠️ 期待サイズ: ${p} bytes (${this.chunkSize}秒), 最大許容: ${g} bytes`);const e=h.slice(0,g);console.log(`🔪 データを最大サイズに制限: ${h.byteLength} → ${e.byteLength} bytes`);const n=`realtime_${t}_${Date.now()}.wav`,r=await window.electronAPI.saveFile(e,n);return console.log(`💾 一時WAVファイル作成完了: ${r} (${e.byteLength} bytes, 推定時間: ${(e.byteLength/N._.REALTIME.BYTES_PER_SECOND).toFixed(1)}秒)`),r}const m=`realtime_${t}_${Date.now()}.wav`,v=await window.electronAPI.saveFile(h,m);return console.log(`💾 一時WAVファイル作成完了: ${v} (${h.byteLength} bytes, 推定時間: ${(h.byteLength/N._.REALTIME.BYTES_PER_SECOND).toFixed(1)}秒)`),v}catch(e){return console.error("録音中ファイルからのWAV作成エラー:",e),null}}fixAudioDataFormat(e){try{const t=16e3,n=16,r=1,o=t*r*n/8,a=r*n/8,i=e.byteLength,s=36+i,l=new ArrayBuffer(44),c=new DataView(l),u=(e,t)=>{for(let n=0;n<t.length;n++)c.setUint8(e+n,t.charCodeAt(n))};u(0,"RIFF"),c.setUint32(4,s,!0),u(8,"WAVE"),u(12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,r,!0),c.setUint32(24,t,!0),c.setUint32(28,o,!0),c.setUint16(32,a,!0),c.setUint16(34,n,!0),u(36,"data"),c.setUint32(40,i,!0);const d=new ArrayBuffer(l.byteLength+e.byteLength),f=new Uint8Array(d),h=new Uint8Array(l),p=new Uint8Array(e);return f.set(h,0),f.set(p,l.byteLength),console.log(`🎵 WAVヘッダーを追加: ${l.byteLength} + ${e.byteLength} = ${d.byteLength} bytes`),d}catch(t){return console.error("音声データフォーマット修正エラー:",t),e}}onChunkCompleted(e){this.onChunkCompletedCallbacks.push(e)}getProcessedChunks(){return new Map(this.processedChunks)}getStats(){const e=this.processedChunks.size,t=Array.from(this.processedChunks.values()).filter(e=>"completed"===e.status).length,n=Array.from(this.processedChunks.values()).filter(e=>"failed"===e.status).length;return{isProcessing:this.isProcessing,totalChunks:e,completedChunks:t,failedChunks:n,currentSequence:this.chunkSequence,lastProcessedOffset:this.lastProcessedOffset,consecutiveErrorCount:this.consecutiveErrorCount,lastErrorTime:this.lastErrorTime,successRate:e>0?t/e*100:0}}clearCallbacks(){this.onChunkCompletedCallbacks=[]}forceReset(){console.log("🔄 強制リセット開始"),this.processedChunks.clear(),this.lastProcessedOffset=0,this.chunkSequence=0,this.processingChunkId=null,this.consecutiveErrorCount=0,this.lastErrorTime=0,console.log("🔄 強制リセット完了 - 全状態がクリアされました")}getProcessingFlagDetails(){const e={};return Array.from(this.processedChunks.keys()).filter(e=>e.startsWith("processing_")).forEach(t=>{const n=this.processedChunks.get(t);e[t]={chunkId:n?.chunkId,status:n?.status,processingTime:n?.processingTime,ageInSeconds:n?.processingTime?(Date.now()-n.processingTime)/1e3:0}}),e}manualClearProcessingFlags(){console.log("🔧 手動処理中フラグクリア開始");const e=this.getProcessingFlagDetails();console.log("🔧 現在の処理中フラグ:",e);const t=Array.from(this.processedChunks.keys()).filter(e=>e.startsWith("processing_"));t.forEach(e=>{this.processedChunks.delete(e),console.log(`🔧 手動削除: ${e}`)}),console.log(`🔧 手動処理中フラグクリア完了: ${t.length}個削除`)}startServerMonitoring(){console.log("🔍 サーバー監視開始"),this.serverCheckInterval=setInterval(async()=>{if(this.isProcessing&&!this.isServerChecking){this.isServerChecking=!0;try{await this.checkServerStatus()}catch(e){console.error("サーバー監視エラー:",e)}finally{this.isServerChecking=!1}}},1e4)}stopServerMonitoring(){console.log("🔍 サーバー監視停止"),this.serverCheckInterval&&(clearInterval(this.serverCheckInterval),this.serverCheckInterval=null),this.isServerChecking=!1}async checkServerStatus(){try{(await window.electronAPI.speechGetServerStatus()).isRunning||(console.warn("⚠️ サーバーが停止しています - 自動再起動を試行"),await window.electronAPI.speechStartServer()?(console.log("✅ サーバー再起動成功"),await new Promise(e=>setTimeout(e,5e3)),this.consecutiveErrorCount=0,this.lastErrorTime=0):(console.error("❌ サーバー再起動失敗"),this.consecutiveErrorCount++,this.lastErrorTime=Date.now()))}catch(e){console.error("サーバー状態チェックエラー:",e)}}async ensureServerRunning(){try{return!!(await window.electronAPI.speechGetServerStatus()).isRunning||(console.warn("⚠️ 文字起こし実行前にサーバーが停止 - 再起動を試行"),await window.electronAPI.speechStartServer()?(console.log("✅ 文字起こし前サーバー再起動成功"),await new Promise(e=>setTimeout(e,3e3)),!0):(console.error("❌ 文字起こし前サーバー再起動失敗"),!1))}catch(e){return console.error("サーバー状態確認エラー:",e),!1}}}class U{constructor(){this.audioChunkProcessor=new M.AudioChunkProcessor,this.chunkQueue=new D,this.resultConsolidator=new j,this.realTimeProcessor=new $,this.chunks=new Map,this.progress={isTranscribing:!1,totalChunks:0,processedChunks:0,failedChunks:0,currentProcessingChunk:0,averageProcessingTime:0,estimatedTimeRemaining:0},this.settings={chunkSize:N._.CHUNK.DEFAULT_SIZE,overlapSize:N._.CHUNK.DEFAULT_OVERLAP,maxConcurrency:N._.CHUNK.MAX_CONCURRENCY,enableAutoScroll:N._.CHUNK.ENABLE_AUTO_SCROLL,qualityMode:N._.CHUNK.QUALITY_MODE},this.isTranscribing=!1,this.isRealTimeMode=!1,this.currentAudioFile=null,this.progressCallbacks=[],this.chunkCompletedCallbacks=[],this.setupQueueCallbacks(),this.setupRealTimeCallbacks()}setupQueueCallbacks(){this.chunkQueue.onProcessingComplete(e=>{this.chunks.set(e.chunkId,e),this.progress.processedChunks++,"failed"===e.status&&this.progress.failedChunks++,this.updateAverageProcessingTime(e.processingTime),this.updateEstimatedTimeRemaining(),this.chunkCompletedCallbacks.forEach(t=>t(e)),this.notifyProgress()}),this.chunkQueue.onProgress(e=>{this.progress.currentProcessingChunk=e.processingItems,this.progress.averageProcessingTime=e.averageProcessingTime,this.notifyProgress()})}setupRealTimeCallbacks(){this.realTimeProcessor.onChunkCompleted(e=>{this.chunks.set(e.chunkId,e),this.progress.processedChunks++,"failed"===e.status&&this.progress.failedChunks++,this.updateAverageProcessingTime(e.processingTime),this.chunkCompletedCallbacks.forEach(t=>t(e)),this.notifyProgress(),console.log(`🎆 リアルタイムチャンク完了: ${e.chunkId}`)})}async startChunkTranscription(e){if(console.log("チャンク分割文字起こし開始:",e),this.isTranscribing)throw new Error("既に文字起こし処理中です");this.isTranscribing=!0,this.currentAudioFile=e,this.chunks.clear(),this.chunkQueue.clear();try{if(console.log("🔍 ファイルパス分析:",{audioFilePath:e,isRecordingFile:e.includes("recording_"),isWebMFile:e.includes(".webm"),shouldUseRealTime:e.includes("recording_")&&e.includes(".webm")}),e.includes("recording_")&&e.includes(".webm"))return console.log("🎆 録音中WebMファイル検出 - リアルタイム文字起こしモードを開始"),console.log("🎆 チャンクサイズ設定:",this.settings.chunkSize,"秒"),this.isRealTimeMode=!0,console.log("🔄 RealTimeProcessor.startRealTimeTranscription を呼び出し中..."),await this.realTimeProcessor.startRealTimeTranscription(e,this.settings.chunkSize),console.log("✅ RealTimeProcessor.startRealTimeTranscription 呼び出し完了"),this.progress={isTranscribing:!0,totalChunks:0,processedChunks:0,failedChunks:0,currentProcessingChunk:0,averageProcessingTime:0,estimatedTimeRemaining:0},this.notifyProgress(),void console.log("✅ リアルタイム文字起こしモードが開始されました");let t;console.log("🔍 チャンク処理開始 - アプリケーションクラッシュを防ぐためのtry-catchでラップ");try{t=await this.audioChunkProcessor.processAudioFile(e,this.settings.chunkSize,this.settings.overlapSize),console.log("🔍 チャンク処理成功:",t.length,"個のチャンクを生成")}catch(e){throw console.error("🚨 チャンク処理でエラー発生:",e),e}if(this.progress={isTranscribing:!0,totalChunks:t.length,processedChunks:0,failedChunks:0,currentProcessingChunk:0,averageProcessingTime:0,estimatedTimeRemaining:0},0===t.length)throw console.warn("チャンクが0個です。音声ファイルの情報を確認してください。"),console.log("音声ファイルパス:",e),this.progress={isTranscribing:!1,totalChunks:0,processedChunks:0,failedChunks:0,currentProcessingChunk:0,averageProcessingTime:0,estimatedTimeRemaining:0},this.notifyProgress(),new Error("音声ファイルからチャンクを生成できませんでした。ファイルが短すぎるか、音声データが不足している可能性があります。");t.some(e=>e.id.startsWith("pending_chunk_"))&&console.log("録音中のファイルが検出されました。ペンディングチャンクを処理します。"),this.chunkQueue=new D(this.settings.maxConcurrency),this.setupQueueCallbacks(),t.forEach(e=>{const n=t.length-e.sequenceNumber;this.chunkQueue.enqueue(e,n)}),window.dispatchEvent(new CustomEvent("chunkTranscriptionStart",{detail:{totalChunks:t.length,chunkSize:this.settings.chunkSize,overlapSize:this.settings.overlapSize}})),await this.chunkQueue.startProcessing(),console.log("チャンク分割文字起こし完了:",e)}catch(e){console.error("チャンク分割文字起こしエラー:",e),this.isTranscribing=!1,this.currentAudioFile=null,this.progress.isTranscribing=!1,this.chunks.clear(),this.chunkQueue.clear(),this.notifyProgress();try{this.audioChunkProcessor.cleanup()}catch(e){console.warn("クリーンアップエラー:",e)}throw e}}async stopAndConsolidate(){console.log("チャンク分割文字起こし停止・統合開始"),this.isTranscribing=!1,this.isRealTimeMode&&(console.log("リアルタイムモード停止処理を実行"),this.realTimeProcessor.stop(),this.isRealTimeMode=!1),this.chunkQueue.stop();const e=Array.from(this.chunks.values());console.log(`統合対象のチャンク数: ${e.length}`);const t=this.resultConsolidator.consolidate(e,this.currentAudioFile||""),n=this.resultConsolidator.getStats();return console.log("統合統計:",n),this.progress.isTranscribing=!1,this.currentAudioFile=null,this.notifyProgress(),t}updateAverageProcessingTime(e){const t=this.progress.processedChunks,n=this.progress.averageProcessingTime;this.progress.averageProcessingTime=(n*(t-1)+e)/t}updateEstimatedTimeRemaining(){const e=this.progress.totalChunks-this.progress.processedChunks;this.progress.estimatedTimeRemaining=e*this.progress.averageProcessingTime/this.settings.maxConcurrency}notifyProgress(){this.progressCallbacks.forEach(e=>e(this.progress))}getProgress(){return{...this.progress}}updateSettings(e){this.settings={...this.settings,...e},this.resultConsolidator.updateSettings({overlapThreshold:this.settings.overlapSize/2,enableTextSmoothing:"speed"!==this.settings.qualityMode,enableTimeAdjustment:"speed"!==this.settings.qualityMode})}onProgress(e){this.progressCallbacks.push(e)}onChunkTranscribed(e){this.chunkCompletedCallbacks.push(e)}removeAllListeners(){this.progressCallbacks=[],this.chunkCompletedCallbacks=[],this.chunkQueue.clearCallbacks(),this.realTimeProcessor.clearCallbacks()}}const O=({selectedFile:e})=>{const{currentModel:t,setCurrentModel:n,isTranscribing:o,setIsTranscribing:i}=q(),[s,l]=(0,a.useState)({isRunning:!1}),[c,u]=(0,a.useState)(""),[d,f]=(0,a.useState)(""),[h,p]=(0,a.useState)(t),[g,m]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[b,w]=(0,a.useState)(null),[x,k]=(0,a.useState)({isTranscribing:!1,totalChunks:0,processedChunks:0,failedChunks:0,currentProcessingChunk:0,averageProcessingTime:0,estimatedTimeRemaining:0}),[S,C]=(0,a.useState)({chunkSize:N._.CHUNK.DEFAULT_SIZE,overlapSize:N._.CHUNK.DEFAULT_OVERLAP,maxConcurrency:N._.CHUNK.MAX_CONCURRENCY,enableAutoScroll:N._.CHUNK.ENABLE_AUTO_SCROLL,qualityMode:N._.CHUNK.QUALITY_MODE});(0,a.useEffect)(()=>{p(t)},[t]),(0,a.useEffect)(()=>{const e=async()=>{try{const e=await window.electronAPI.speechGetServerStatus();l(e)}catch(e){console.error("サーバー状態取得エラー:",e)}};e();const t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>(window.electronAPI.onSpeechProgress(e=>{console.log("音声認識進捗:",e),"transcription_progress"===e.type&&u(`処理中: ${e.status}`)}),()=>{window.electronAPI.removeAllListeners("speech:progress")}),[]);const E=async()=>{if(e){i(!0),u(""),f("");try{console.log("音声認識開始:",e.filename);const t=await window.electronAPI.speechTranscribe(e.filepath);t&&(console.log("音声認識完了:",t),e.filepath.includes("recording_")||window.dispatchEvent(new CustomEvent("transcriptionComplete",{detail:t})),e.hasTranscriptionFile&&!e.filepath.includes("recording_")&&window.dispatchEvent(new CustomEvent("transcriptionRefresh",{detail:{audioFilePath:e.filepath,transcriptionResult:t}})))}catch(e){console.error("音声認識エラー:",e),f("音声認識エラー: "+String(e))}finally{i(!1),u("")}}},T=e=>{const t={...S,...e};C(t),b&&b.updateSettings(t)};return(0,a.useEffect)(()=>()=>{b&&b.removeAllListeners()},[b]),(0,r.jsxs)("div",{style:{padding:"var(--spacing-md)",display:"flex",flexDirection:"column",gap:"var(--spacing-md)",background:"var(--color-bg-primary)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-lg)",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[(0,r.jsx)("span",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:"サーバー状態:"}),(0,r.jsx)("span",{style:{fontSize:"var(--font-size-sm)",color:s.isRunning?"var(--color-success)":"var(--color-error)",fontWeight:"var(--font-weight-medium)"},children:s.isRunning?"🟢 起動中":"🔴 停止中"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-sm)"},children:[(0,r.jsx)("button",{onClick:async()=>{console.log("🔴 handleStartServer called");try{f(""),console.log("🔴 Calling speechStartServer()"),await window.electronAPI.speechStartServer()?setTimeout(async()=>{const e=await window.electronAPI.speechGetServerStatus();l(e)},2e3):f("サーバーの起動に失敗しました")}catch(e){f("サーバー起動エラー: "+String(e))}},disabled:s.isRunning,className:"btn btn--success",style:{fontSize:"var(--font-size-sm)",padding:"6px 12px",opacity:s.isRunning?.5:1},children:"起動"}),(0,r.jsx)("button",{onClick:async()=>{console.log("🔴 handleStopServer called");try{f(""),console.log("🔴 Calling speechStopServer()"),await window.electronAPI.speechStopServer(),setTimeout(async()=>{const e=await window.electronAPI.speechGetServerStatus();l(e)},1e3)}catch(e){f("サーバー停止エラー: "+String(e))}},disabled:!s.isRunning,className:"btn btn--error",style:{fontSize:"var(--font-size-sm)",padding:"6px 12px",opacity:s.isRunning?1:.5},children:"停止"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)"},children:[(0,r.jsx)("label",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",minWidth:"80px"},children:"モデル:"}),(0,r.jsxs)("select",{value:h,onChange:e=>(async e=>{if(e!==t){m(!0),p(e);try{await window.electronAPI.speechChangeModel(e)?(n(e),console.log("モデル変更成功:",e)):(f("モデル変更に失敗しました"),p(t))}catch(e){f("モデル変更エラー: "+String(e)),p(t)}finally{m(!1)}}})(e.target.value),disabled:g||o,className:"select",style:{fontSize:"var(--font-size-sm)",padding:"6px 8px",minWidth:"200px"},children:[(0,r.jsx)("option",{value:"small",children:"kotoba-whisper-small (高速)"}),(0,r.jsx)("option",{value:"kotoba-tech/kotoba-whisper-v2.0-faster",children:"kotoba-whisper-medium (高精度)"}),(0,r.jsx)("option",{value:"large-v2",children:"kotoba-whisper-large-v2 (最高精度)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-sm)"},children:[(0,r.jsx)("button",{onClick:async()=>{e&&(e.hasTranscriptionFile?y(!0):await E())},disabled:!e||!s.isRunning||o||g||x.isTranscribing||e&&(e.isRecording||0===e.size),className:"btn btn--primary",style:{flex:1,padding:"var(--spacing-md)",fontSize:"var(--font-size-md)",fontWeight:"var(--font-weight-medium)",opacity:!e||!s.isRunning||o||g||x.isTranscribing?.5:1},children:o?`🎤 処理中... (${t}モデル)`:g?"モデル変更中...":"🎤 通常文字起こし"}),(0,r.jsx)("button",{onClick:x.isTranscribing?async()=>{if(b)try{await b.stopAndConsolidate(),w(null),k({isTranscribing:!1,totalChunks:0,processedChunks:0,failedChunks:0,currentProcessingChunk:0,averageProcessingTime:0,estimatedTimeRemaining:0})}catch(e){console.error("チャンク分割文字起こし停止エラー:",e)}}:async()=>{if(console.log("🔥 チャンク分割文字起こしボタンが押されました！"),console.log("🔥 現在の状態:",{selectedFile:e?{filename:e.filename,filepath:e.filepath,isRecording:e.isRecording,size:e.size}:null,serverRunning:s.isRunning}),e)if(s.isRunning)try{f(""),e.filepath.includes("recording_")&&e.filepath.includes(".webm")&&console.log("🎆 録音中WebMファイルのチャンク分割文字起こしを安全モードで実行"),console.log("チャンク分割文字起こし開始 - ファイル情報:",{filename:e.filename,filepath:e.filepath,size:e.size,isRecording:e.isRecording}),(e.isRecording||0===e.size)&&console.log("録音中ファイルのチャンク分割文字起こしを開始します。");let t=e;if(!e.isRecording&&0===e.size){console.log("選択されたファイルが録音中ではありません。録音中のファイルを検索します。");try{const e=await window.electronAPI.loadSettings(),n=(await window.electronAPI.getFileList(e.saveFolder)).filter(e=>e.isRecording||e.size>0&&e.createdAt).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())[0];n&&n.size>0?(console.log("録音中のファイルを発見:",{filename:n.filename,size:n.size,isRecording:n.isRecording}),t=n):console.warn("録音中のファイルが見つかりませんでした。選択されたファイルで続行します。")}catch(e){console.error("録音中ファイル検索エラー:",e)}}t.isRecording||0===t.size&&!1!==t.isRecording?(console.log("録音中またはサイズ0のファイルを検出:",t.filename),console.log("録音中のファイルのため、部分的なチャンク分割文字起こしを開始します。")):console.log("録音完了後のファイルに対してチャンク分割文字起こしを開始:",t.filename),b&&await b.stopAndConsolidate();const n=new U;if(w(n),n.onProgress(e=>{k(e)}),n.onChunkTranscribed(e=>{console.log("チャンク完了:",e.chunkId,e.status),console.log("チャンク完了:",e.chunkId,e.status,e.segments?.length,"セグメント");const t={chunkId:e.chunkId,segments:e.segments||[],status:e.status,error:e.error,processingTime:e.processingTime};console.log("🚀 chunkTranscriptionCompleted イベントを発火:",t),window.dispatchEvent(new CustomEvent("chunkTranscriptionCompleted",{detail:t})),console.log("✅ chunkTranscriptionCompleted イベント発火完了")}),n.updateSettings(S),window.dispatchEvent(new CustomEvent("chunkTranscriptionStart",{detail:{totalChunks:0,chunkSize:S.chunkSize,overlapSize:S.overlapSize}})),console.log("実際に処理するファイル:",t.filepath),await n.startChunkTranscription(t.filepath),t.filepath.includes("recording_")&&t.filepath.includes(".webm"))return console.log("🎆 録音中ファイル - リアルタイム処理を継続中、手動停止まで待機"),w(n),void console.log("リアルタイム文字起こしが開始されました。録音を停止するか、手動で停止するまで継続します。");console.log("📁 録音完了ファイル - 通常のチャンク分割処理を実行");const r=await n.stopAndConsolidate();await window.electronAPI.chunkSaveConsolidatedResult(t.filepath,r),window.dispatchEvent(new CustomEvent("chunkTranscriptionComplete",{detail:r})),window.dispatchEvent(new CustomEvent("transcriptionComplete",{detail:{language:r.metadata.language,duration:r.metadata.duration,segments:r.segments.map(e=>({start:e.start,end:e.end,text:e.text})),created_at:Date.now(),segment_count:r.metadata.segmentCount}})),t.hasTranscriptionFile&&!t.filepath.includes("recording_")&&window.dispatchEvent(new CustomEvent("transcriptionRefresh",{detail:{audioFilePath:t.filepath,transcriptionResult:r}}))}catch(e){console.error("チャンク分割文字起こしエラー:",e);let t="";t=e instanceof Error?e.message.includes("音声ファイルからチャンクを生成できませんでした")?"音声ファイルからチャンクを生成できませんでした。ファイルが短すぎるか、音声データが不足している可能性があります。":e.message.includes("ファイルの読み込みに失敗")?"音声ファイルの読み込みに失敗しました。ファイルが破損している可能性があります。":`チャンク分割文字起こしエラー: ${e.message}`:"チャンク分割文字起こしで予期しないエラーが発生しました。",f(t)}else console.log("❌ サーバーが動作していないため処理を停止");else console.log("❌ selectedFileがnullのため処理を停止")},disabled:!e||!s.isRunning||o||g,className:x.isTranscribing?"btn btn--error":"btn btn--accent",style:{flex:1,padding:"var(--spacing-md)",fontSize:"var(--font-size-md)",fontWeight:"var(--font-weight-medium)",opacity:!e||!s.isRunning||o||g?.5:1},children:x.isTranscribing?`⚡ 停止 (${x.processedChunks}/${x.totalChunks})`:"⚡ チャンク分割文字起こし"})]}),!e&&(0,r.jsx)("p",{style:{margin:"var(--spacing-sm) 0 0 0",fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:"音声ファイルを選択してください"}),e&&0===e.size&&(0,r.jsxs)("div",{style:{margin:"var(--spacing-sm) 0 0 0",fontSize:"var(--font-size-sm)",color:"var(--color-warning)"},children:[(0,r.jsx)("p",{style:{margin:"0 0 4px 0"},children:"🎤 通常文字起こし：録音完了後に実行してください"}),(0,r.jsx)("p",{style:{margin:"0",color:"var(--color-accent)"},children:"⚡ チャンク分割文字起こし：録音中でも実行可能（リアルタイム処理）"})]}),e&&!e.isRecording&&e.size>0&&(0,r.jsx)("div",{style:{margin:"var(--spacing-sm) 0 0 0",fontSize:"var(--font-size-sm)",color:"var(--color-success)"},children:(0,r.jsx)("p",{style:{margin:"0"},children:"✓ 録音完了ファイルが選択されています。文字起こしを開始できます。"})})]}),c&&(0,r.jsx)("div",{style:{padding:"var(--spacing-md)",backgroundColor:"rgba(255, 204, 2, 0.1)",border:"1px solid var(--color-warning)",borderRadius:"var(--border-radius)"},children:(0,r.jsx)("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--color-text-primary)"},children:c})}),x.isTranscribing&&(0,r.jsxs)("div",{style:{padding:"var(--spacing-md)",backgroundColor:"rgba(0, 123, 255, 0.1)",border:"1px solid var(--color-accent)",borderRadius:"var(--border-radius)",marginTop:"var(--spacing-sm)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--spacing-sm)"},children:[(0,r.jsx)("span",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)"},children:"⚡ チャンク分割処理中"}),(0,r.jsxs)("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[x.processedChunks," / ",x.totalChunks," チャンク"]})]}),(0,r.jsx)("div",{style:{width:"100%",height:"8px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"4px",overflow:"hidden",marginBottom:"var(--spacing-sm)"},children:(0,r.jsx)("div",{style:{width:(x.totalChunks>0?x.processedChunks/x.totalChunks*100:0)+"%",height:"100%",backgroundColor:"var(--color-accent)",transition:"width 0.3s ease"}})}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(0,r.jsxs)("span",{children:["現在処理中: チャンク ",x.currentProcessingChunk]}),(0,r.jsxs)("span",{children:["推定残り時間: ",x.estimatedTimeRemaining>0?`${Math.ceil(x.estimatedTimeRemaining)}秒`:"計算中..."]})]}),x.failedChunks>0&&(0,r.jsxs)("div",{style:{marginTop:"var(--spacing-sm)",fontSize:"var(--font-size-xs)",color:"var(--color-error)"},children:["⚠️ 失敗したチャンク: ",x.failedChunks,"個"]})]}),(0,r.jsxs)("div",{style:{padding:"var(--spacing-md)",backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--border-radius)",marginTop:"var(--spacing-sm)"},children:[(0,r.jsx)("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--color-text-primary)",marginBottom:"var(--spacing-sm)"},children:"⚙️ チャンク分割設定"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-sm)"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"チャンクサイズ"}),(0,r.jsxs)("select",{value:S.chunkSize,onChange:e=>T({chunkSize:parseInt(e.target.value)}),disabled:x.isTranscribing,className:"select",style:{fontSize:"var(--font-size-xs)",padding:"4px 6px",width:"100%"},children:[(0,r.jsx)("option",{value:10,children:"10秒"}),(0,r.jsx)("option",{value:15,children:"15秒"}),(0,r.jsx)("option",{value:20,children:"20秒"}),(0,r.jsx)("option",{value:30,children:"30秒"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"オーバーラップ"}),(0,r.jsxs)("select",{value:S.overlapSize,onChange:e=>T({overlapSize:parseInt(e.target.value)}),disabled:x.isTranscribing,className:"select",style:{fontSize:"var(--font-size-xs)",padding:"4px 6px",width:"100%"},children:[(0,r.jsx)("option",{value:.5,children:"0.5秒"}),(0,r.jsx)("option",{value:1,children:"1秒"}),(0,r.jsx)("option",{value:2,children:"2秒"}),(0,r.jsx)("option",{value:3,children:"3秒"})]})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--spacing-sm)"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"並列処理数"}),(0,r.jsxs)("select",{value:S.maxConcurrency,onChange:e=>T({maxConcurrency:parseInt(e.target.value)}),disabled:x.isTranscribing,className:"select",style:{fontSize:"var(--font-size-xs)",padding:"4px 6px",width:"100%"},children:[(0,r.jsx)("option",{value:1,children:"1チャンク"}),(0,r.jsx)("option",{value:2,children:"2チャンク"}),(0,r.jsx)("option",{value:3,children:"3チャンク"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"品質モード"}),(0,r.jsxs)("select",{value:S.qualityMode,onChange:e=>T({qualityMode:e.target.value}),disabled:x.isTranscribing,className:"select",style:{fontSize:"var(--font-size-xs)",padding:"4px 6px",width:"100%"},children:[(0,r.jsx)("option",{value:"speed",children:"速度優先"}),(0,r.jsx)("option",{value:"balance",children:"バランス"}),(0,r.jsx)("option",{value:"accuracy",children:"精度優先"})]})]})]}),(0,r.jsxs)("div",{style:{marginTop:"var(--spacing-sm)",display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[(0,r.jsx)("input",{type:"checkbox",id:"autoScroll",checked:S.enableAutoScroll,onChange:e=>T({enableAutoScroll:e.target.checked}),disabled:x.isTranscribing,style:{margin:0}}),(0,r.jsx)("label",{htmlFor:"autoScroll",style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",cursor:x.isTranscribing?"not-allowed":"pointer"},children:"自動スクロール"})]})]}),d&&(0,r.jsx)("div",{style:{padding:"var(--spacing-md)",backgroundColor:"rgba(244, 71, 71, 0.1)",border:"1px solid var(--color-error)",borderRadius:"var(--border-radius)"},children:(0,r.jsx)("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--color-error)"},children:d})}),v&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,r.jsxs)("div",{style:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--border-radius)",padding:"var(--spacing-lg)",maxWidth:"400px",width:"90%",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[(0,r.jsx)("h3",{style:{margin:"0 0 var(--spacing-md) 0",fontSize:"var(--font-size-lg)",color:"var(--color-text-primary)",fontWeight:"var(--font-weight-medium)"},children:"⚠️ 文字起こしデータの上書き"}),(0,r.jsxs)("p",{style:{margin:"0 0 var(--spacing-lg) 0",fontSize:"var(--font-size-md)",color:"var(--color-text-secondary)",lineHeight:"1.5"},children:["このファイルには既に文字起こしデータが存在します。",(0,r.jsx)("br",{}),"再度文字起こしを実行すると、既存のデータが上書きされます。",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"編集済みの内容も失われます。"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-sm)",justifyContent:"flex-end"},children:[(0,r.jsx)("button",{onClick:()=>{y(!1)},className:"btn btn--secondary",style:{fontSize:"var(--font-size-sm)",padding:"8px 16px"},children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>{y(!1),E()},className:"btn btn--error",style:{fontSize:"var(--font-size-sm)",padding:"8px 16px"},children:"上書きして実行"})]})]})})]})},W=()=>{const{selectedFile:e,isRecording:t,isPlaying:n,isTranscribing:o}=q(),[i,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)({processedChunks:0,totalChunks:0}),[u,d]=(0,a.useState)({transcription:!0,recognition:!1,player:!1,recording:!1}),f=e=>{d(t=>({...t,[e]:!t[e]}))};return a.useEffect(()=>{const e=e=>{const{totalChunks:t}=e.detail;s(!0),c({processedChunks:0,totalChunks:t})},t=e=>{const{processedChunks:t,totalChunks:n}=e.detail;c({processedChunks:t,totalChunks:n})},n=()=>{s(!1),c({processedChunks:0,totalChunks:0})};return window.addEventListener("chunkTranscriptionStart",e),window.addEventListener("chunkProgress",t),window.addEventListener("chunkTranscriptionComplete",n),()=>{window.removeEventListener("chunkTranscriptionStart",e),window.removeEventListener("chunkProgress",t),window.removeEventListener("chunkTranscriptionComplete",n)}},[]),(0,r.jsxs)("div",{className:"right-panel",children:[(0,r.jsxs)("div",{className:"accordion-section accordion-section--main",children:[(0,r.jsxs)("div",{className:"accordion-header",onClick:()=>f("transcription"),children:[(0,r.jsx)("h3",{className:"accordion-title",children:"📝 文字起こし結果"}),(0,r.jsx)("span",{className:"accordion-icon",children:u.transcription?"▼":"▶"})]}),(0,r.jsx)("div",{className:"accordion-content "+(u.transcription?"accordion-content--expanded":""),style:{display:u.transcription?"flex":"none"},children:(0,r.jsx)(L,{selectedFile:e,onTranscriptionComplete:e=>{console.log("音声認識完了:",e)}})})]}),(0,r.jsxs)("div",{className:"accordion-section",children:[(0,r.jsxs)("div",{className:"accordion-header",onClick:()=>f("recognition"),children:[(0,r.jsxs)("h3",{className:"accordion-title",children:["🎤 音声認識",o&&(0,r.jsx)("span",{style:{marginLeft:"8px",color:"var(--color-warning)"},children:"⏳ 処理中"}),i&&(0,r.jsxs)("span",{style:{marginLeft:"8px",color:"var(--color-accent)"},children:["⚡ チャンク処理中 (",l.processedChunks,"/",l.totalChunks,")"]})]}),(0,r.jsx)("span",{className:"accordion-icon",children:u.recognition?"▼":"▶"})]}),(0,r.jsx)("div",{className:"accordion-content "+(u.recognition?"accordion-content--expanded":""),style:{display:u.recognition?"block":"none"},children:(0,r.jsx)(O,{selectedFile:e})})]}),(0,r.jsxs)("div",{className:"accordion-section",children:[(0,r.jsxs)("div",{className:"accordion-header",onClick:()=>f("player"),children:[(0,r.jsxs)("h3",{className:"accordion-title",children:["🎵 音声プレイヤー",n&&(0,r.jsx)("span",{style:{marginLeft:"8px",color:"var(--color-success)"},children:"▶ 再生中"})]}),(0,r.jsx)("span",{className:"accordion-icon",children:u.player?"▼":"▶"})]}),(0,r.jsx)("div",{className:"accordion-content "+(u.player?"accordion-content--expanded":""),style:{display:u.player?"block":"none"},children:(0,r.jsx)(I,{filePath:e?.filepath,fileName:e?.filename,className:"accordion-audio-player"})})]}),(0,r.jsxs)("div",{className:"accordion-section",children:[(0,r.jsxs)("div",{className:"accordion-header",onClick:()=>f("recording"),children:[(0,r.jsxs)("h3",{className:"accordion-title",children:["📹 録音コントロール",t&&(0,r.jsx)("span",{style:{marginLeft:"8px",color:"var(--color-error)"},children:"● 録音中"})]}),(0,r.jsx)("span",{className:"accordion-icon",children:u.recording?"▼":"▶"})]}),(0,r.jsx)("div",{className:"accordion-content "+(u.recording?"accordion-content--expanded":""),style:{display:u.recording?"block":"none"},children:(0,r.jsx)(_,{})})]})]})},B=()=>{const[e,t]=(0,a.useState)(300),[n,o]=(0,a.useState)(!1),i=(0,a.useCallback)(e=>{o(!0),e.preventDefault()},[]),s=(0,a.useCallback)(e=>{if(!n)return;const r=e.clientX;r>=200&&r<=600&&t(r)},[n]),l=(0,a.useCallback)(()=>{o(!1)},[]);return a.useEffect(()=>(n?(document.addEventListener("mousemove",s),document.addEventListener("mouseup",l),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),document.body.style.cursor="",document.body.style.userSelect=""}),[n,s,l]),(0,r.jsxs)("div",{className:"main-layout",children:[(0,r.jsx)("div",{className:"left-panel",style:{width:`${e}px`,minWidth:`${e}px`,maxWidth:`${e}px`},children:(0,r.jsx)(x,{})}),(0,r.jsx)("div",{className:"resize-handle",onMouseDown:i,style:{width:"4px",backgroundColor:n?"var(--color-accent)":"var(--color-border)",cursor:"col-resize",userSelect:"none",transition:n?"none":"background-color 0.2s ease"}}),(0,r.jsx)("div",{className:"right-panel",style:{flex:1},children:(0,r.jsx)(W,{})})]})},H=(0,a.createContext)(null),q=()=>{const e=(0,a.useContext)(H);if(!e)throw new Error("useAppContext must be used within AppProvider");return e};void 0===globalThis.global&&(globalThis.global=globalThis),window.addEventListener("error",e=>{console.error("Global Error:",e.error),console.error("Error details:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:e.error?.stack})}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled Promise Rejection:",e.reason)}),window.electronAPI?console.log("Electron API が正常に読み込まれました"):console.error("Electron API が利用できません。Electronアプリケーション内で実行してください。");const V=document.getElementById("root");if(!V)throw new Error("Root要素が見つかりません");(0,o.H)(V).render((0,r.jsx)(()=>{const[e,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),[f,h]=(0,a.useState)("small"),[p,g]=(0,a.useState)(!1),[m,v]=(0,a.useState)(null),y={fileList:e,setFileList:t,selectedFile:n,setSelectedFile:o,transcriptionDisplayData:i,setTranscriptionDisplayData:s,isRecording:l,setIsRecording:c,isPlaying:u,setIsPlaying:d,currentModel:f,setCurrentModel:h,isTranscribing:p,setIsTranscribing:g,recordingFile:m,setRecordingFile:v};return(0,r.jsx)(H.Provider,{value:y,children:(0,r.jsxs)("div",{className:"app",children:[(0,r.jsx)(w,{}),(0,r.jsx)(B,{})]})})},{}))})();