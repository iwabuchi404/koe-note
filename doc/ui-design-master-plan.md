# 高機能音声録音・文字起こしアプリ UI設計プラン (最終版)

## 1. 設計思想と基本原則

本アプリケーションは、単なる録音ツールではなく、**音声を中心とした知的生産活動のプラットフォーム**となることを目指す。

1.  **ワークフロー起点**: ユーザーの「何をしたいか」という目的（録音、文字起こし）を開始点とし、それに必要な設定を自然な流れで提示する。
2.  **マルチタスクとシングルフォーカス**: **タブUI**を導入し、複数の作業の並行を可能にする。一方で、各タブは単一の役割（録音、再生、編集）に特化させ、ユーザーが目の前のタスクに集中できる環境を提供する。
3.  **コンテキストに応じたUI**: メインのコントロールパネルやタブ内の表示は、ユーザーが現在行っている操作（モード）に応じて動的に変化し、常に最適なツールを提供する。
4.  **非破壊的編集**: 外部からインポートしたユーザーの元ファイルを、アプリケーションが直接変更することはない。

## 2. UIレイアウトと主要コンポーネント

### 2.1 全体レイアウト (ASCIIアート)

```
+----------------------------------------------------------------------+
| Window Title Bar                                                     |
+----------------------+-----------------------------------------------+
|                      | Tab Bar                                       |
| Left Panel           | (録音, 音声, テキスト等のタブが開かれる)      |
| (Workspace Explorer) +-----------------------------------------------+
|                      |                                               |
|                      | Main Content Area                             |
|                      | (Active Tab's Content & Controls)             |
|                      |                                               |
|                      +-----------------------------------------------+
|                      | Main Control Panel (Context-sensitive)        |
+----------------------+-----------------------------------------------+
```

### 2.2 主要コンポーネントの役割

*   **Left Panel (Workspace Explorer)**:
    *   ワークスペースフォルダ内の音声ファイルと関連ファイル（`.trans.txt`）をツリー表示する。
    *   ファイルのドラッグ＆ドロップによるインポートに対応する。

*   **Tab Bar**:
    *   現在開いているすべてのタブを表示する。

*   **Main Content Area**:
    *   アクティブなタブのコンテンツと、そのタブに特化したコントロールを表示する。

*   **Main Control Panel (下部パネル)**:
    *   **アプリケーションの主要なアクションを開始する起点。**
    *   アイドル時には主要アクションボタン（「録音＋文字起こし」など）を表示。
    *   タブが開かれている間は、そのタブのコンテキストに応じた状態（処理中の表示など）に変化する。
    *   アプリケーション全体の設定を開くための歯車アイコン (`⚙`) を常に配置する。

## 3. 主要ワークフローとUIの状態遷移

### 3.1 アイドル状態（起動時）

*   **Main Content Area**: ウェルカムスクリーンを表示。
*   **Main Control Panel**: 3つの主要アクションボタンを表示。

    *   **ASCIIアート（アイドル時）**:
        ```
        +----------------------+-----------------------------------------------+
        |                      | [*Welcome*]                                   |
        | Left Panel           +-----------------------------------------------+
        |                      |      << 何をしますか？ >>                    |
        |                      +-----------------------------------------------+
        |                      | [🎙️録音＋文字起こし] [⏺️録音] [A→Bファイル...] [⚙]|
        +----------------------+-----------------------------------------------+
        ```

### 3.2 ワークフロー1：リアルタイム録音＋文字起こし

1.  **トリガー**: アイドル時、コントロールパネルの**「🎙️ 録音＋文字起こし」**ボタンをクリック。
2.  **設定**: **「リアルタイム録音設定」モーダル**が表示される。
    *   録音ソース（マイク/デスクトップ/ミックス）
    *   文字起こしの精度（速度優先など）
3.  **実行**: 「録音開始」をクリックすると、モーダルが閉じ、**「録音タブ」**が新規作成・アクティブ化される。
4.  **録音中の状態**:
    *   **録音タブ**: タブ内に専用の録音コントロール（レベルメーター、経過時間、停止ボタン）と、リアルタイム文字起こしエリアが表示される。
    *   **Main Control Panel**: 非表示になるか、「録音中...」というステータス表示に切り替わる。
    *   **ASCIIアート（録音タブがアクティブ）**:
        ```
        +----------------------+-----------------------------------------------+
        |                      | [*● recording_...*] [+]                        |
        | Left Panel           +-----------------------------------------------+
        |                      | [Mic:...] [■ Stop] [01:23] <--- (In-Tab Controls) |
        |                      +-----------------------------------------------+
        |                      | [リアルタイム文字起こし結果...]               |
        |                      +-----------------------------------------------+
        |                      | [録音中...] [⚙]                                 |
        +----------------------+-----------------------------------------------+
        ```
5.  **完了**: 録音タブ内の「停止」ボタンを押すと、録音が完了。ファイルが保存され、タブは自動的に**「音声タブ」**と**「テキストタブ」**に分割されるか、あるいは単一の「閲覧・編集タブ」に変換される。

### 3.3 ワークフロー2：録音のみ

*   **トリガー**: アイドル時、コントロールパネルの**「⏺️ 録音」**ボタンをクリック。
*   **設定**: 文字起こし設定のない、シンプルな**「録音設定」モーダル**が表示される。
*   **実行**: 文字起こしエリアのない、シンプルな「録音タブ」が開く。

### 3.4 ワークフロー3：既存ファイルの文字起こし

1.  **トリガー**: アイドル時、コントロールパネルの**「A→B ファイルを文字起こし」**ボタンをクリック。
2.  **設定**: ファイル選択ダイアログの後、**「文字起こし設定」モーダル**が表示される。
    *   対象ファイル名
    *   精度、モデルなどを詳細に選択可能。
3.  **実行**: 「文字起こし開始」をクリックすると、ファイルのインポート処理後、**「音声タブ」**が新規作成・アクティブ化される。
4.  **処理中の状態**:
    *   **音声タブ**: プログレスバーやスピナーで処理中であることを表示。
    *   **Main Control Panel**: **「処理をキャンセル」ボタンのみ**を表示する。
    *   **Left Panel**: 対象ファイルに「(処理中...)」のようなステータスを表示。
5.  **完了**: 処理が完了すると、左パネルに`.trans.txt`ファイルが生成され、通知が表示される。コントロールパネルと音声タブは通常の閲覧状態に戻る。

## 4. 各タブの詳細設計

### 4.1 音声タブ (Audio Tab) - 「聞く」場所

*   **役割**: 音声の再生と分析に特化。
*   **メインコンテンツ**: タブ内に配置された再生コントロール（再生/一時停止、シークバー、音量）と、大きな音声波形。
*   **Main Control Panel**: 空。

### 4.2 テキストタブ (Text Tab) - 「読む・編集する」場所

*   **役割**: 文字起こし結果の閲覧と編集に特化。
*   **メインコンテンツ**: テキスト編集エリアが画面全体を占める。
*   **Main Control Panel**: 空。操作はショートカットキーやコンテキストメニューで行う。

## 5. 将来的な拡張構想

### 5.1 AIパネル
*   **テキストタブ**から起動。メインコンテンツを垂直分割し、右側にAIチャットパネルを表示。文字起こし結果をコンテキストとして、要約や校正などの対話を行う。

この設計ドキュメントは、ユーザーの目的意識に基づいた明確なワークフローを提供し、タブUIによる高度なマルチタスク性能と、各タブの役割特化によるシンプルな操作感を両立させることを目指しています。これが、あなたのアプリケーション開発を成功に導くための強固な青写真となるでしょう。